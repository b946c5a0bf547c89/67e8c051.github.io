<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>SAS HBA | 无常,无形,无功;不动,不破,不空</title><meta name="keywords" content="scsi,mpt3sas"><meta name="author" content="Homer"><meta name="copyright" content="Homer"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><meta name="description" content="mptsasupgrade firmware12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788899091$ sas">
<meta property="og:type" content="article">
<meta property="og:title" content="SAS HBA">
<meta property="og:url" content="http://yoursite.com/2018/09/27/hba/index.html">
<meta property="og:site_name" content="无常,无形,无功;不动,不破,不空">
<meta property="og:description" content="mptsasupgrade firmware12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788899091$ sas">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://homerl.github.io/img/hard-disk_223cf.jpg">
<meta property="article:published_time" content="2018-09-27T13:20:22.000Z">
<meta property="article:modified_time" content="2021-02-16T03:52:22.000Z">
<meta property="article:author" content="Homer">
<meta property="article:tag" content="scsi">
<meta property="article:tag" content="mpt3sas">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://homerl.github.io/img/hard-disk_223cf.jpg"><link rel="shortcut icon" href="/img/stout-shield.png"><link rel="canonical" href="http://yoursite.com/2018/09/27/hba/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><script>var GLOBAL_CONFIG = { 
  root: '/',
  hexoversion: '5.2.0',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"We didn't find any results for the search: ${query}"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: 'Just',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: undefined,
  ClickShowText: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  justifiedGallery: {
    js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
    css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: false
};

var saveToLocal = {
  set: function setWithExpiry(key, value, ttl) {
    const now = new Date()
    const expiryDay = ttl * 86400000
    const item = {
      value: value,
      expiry: now.getTime() + expiryDay,
    }
    localStorage.setItem(key, JSON.stringify(item))
  },

  get: function getWithExpiry(key) {
    const itemStr = localStorage.getItem(key)

    if (!itemStr) {
      return undefined
    }
    const item = JSON.parse(itemStr)
    const now = new Date()

    if (now.getTime() > item.expiry) {
      localStorage.removeItem(key)
      return undefined
    }
    return item.value
  }
}</script><script id="config_change">var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isSidebar: true,
  postUpdate: '2021-02-16 11:52:22'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(function () {
  window.activateDarkMode = function () {
    document.documentElement.setAttribute('data-theme', 'dark')
    if (document.querySelector('meta[name="theme-color"]') !== null) {
      document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
    }
  }
  window.activateLightMode = function () {
    document.documentElement.setAttribute('data-theme', 'light')
    if (document.querySelector('meta[name="theme-color"]') !== null) {
      document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
    }
  }

  const autoChangeMode = 'false'
  const t = saveToLocal.get('theme')
  if (autoChangeMode === '1') {
    const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
    const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
    const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
    const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

    if (t === undefined) {
      if (isLightMode) activateLightMode()
      else if (isDarkMode) activateDarkMode()
      else if (isNotSpecified || hasNoSupport) {
        const now = new Date()
        const hour = now.getHours()
        const isNight = hour <= 6 || hour >= 18
        isNight ? activateDarkMode() : activateLightMode()
      }
      window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
        if (saveToLocal.get('theme') === undefined) {
          e.matches ? activateDarkMode() : activateLightMode()
        }
      })
    } else if (t === 'light') activateLightMode()
    else activateDarkMode()
  } else if (autoChangeMode === '2') {
    const now = new Date()
    const hour = now.getHours()
    const isNight = hour <= 6 || hour >= 18
    if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
    else if (t === 'light') activateLightMode()
    else activateDarkMode()
  } else {
    if (t === 'dark') activateDarkMode()
    else if (t === 'light') activateLightMode()
  }
})()</script><meta name="generator" content="Hexo 5.2.0"><link rel="alternate" href="/atom.xml" title="无常,无形,无功;不动,不破,不空" type="application/atom+xml">
</head><body><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="/img/fighting-spiri-logot.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">Articles</div><div class="length_num">56</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">Tags</div><div class="length_num">54</div></a></div></div><div class="mobile_data_item is-center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">Categories</div><div class="length_num">7</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> List</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></li><li><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></li><li><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div></div></div><div id="body-wrap"><div id="sidebar"><i class="fas fa-arrow-right on" id="toggle-sidebar"></i><div class="sidebar-toc"><div class="sidebar-toc__title">Catalog</div><div class="sidebar-toc__progress"><span class="progress-notice">You've read</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#mptsas"><span class="toc-number">1.</span> <span class="toc-text">mptsas</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#upgrade-firmware"><span class="toc-number">1.1.</span> <span class="toc-text">upgrade firmware</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#install"><span class="toc-number">1.2.</span> <span class="toc-text">install</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#parameters"><span class="toc-number">1.3.</span> <span class="toc-text">parameters</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Error-code"><span class="toc-number">1.4.</span> <span class="toc-text">Error code</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#mpt3sas-error-code-check"><span class="toc-number">1.5.</span> <span class="toc-text">mpt3sas error code check</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#The-others"><span class="toc-number">1.5.1.</span> <span class="toc-text">The others</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#hba"><span class="toc-number">1.6.</span> <span class="toc-text">hba</span></a></li></ol></li></ol></div></div></div><header class="post-bg" id="page-header" style="background-image: url(https://homerl.github.io/img/hard-disk_223cf.jpg)"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">无常,无形,无功;不动,不破,不空</a></span><span id="menus"><div id="search_button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> Search</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> List</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></li><li><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></li><li><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div><span class="close" id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></span></span></nav><div id="post-info"><div id="post-title"><div class="posttitle">SAS HBA</div></div><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" datetime="2018-09-27T13:20:22.000Z" title="Created 2018-09-27 21:20:22">2018-09-27</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2021-02-16T03:52:22.000Z" title="Updated 2021-02-16 11:52:22">2021-02-16</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Storage/">Storage</a></span></div><div class="meta-secondline"> <span class="post-meta-separator">|</span><span class="post-meta-pv-cv"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">Post View:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout_post" id="content-inner"><article id="post"><div class="post-content" id="article-container"><h2 id="mptsas"><a href="#mptsas" class="headerlink" title="mptsas"></a>mptsas</h2><h3 id="upgrade-firmware"><a href="#upgrade-firmware" class="headerlink" title="upgrade firmware"></a>upgrade firmware</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line">$ sas3ircu list <span class="comment"># show the index for sas3flash -c $index</span></span><br><span class="line">$ sas3flash -c 2 -f ./SAS9300_8e_IT.bin -b ./mpt3x64.rom -noreset</span><br><span class="line">$ sas3flash -c 2 -f ./3008IT16.ROM -b ./mpt3x64.rom -noreset</span><br><span class="line">Avago Technologies SAS3 Flash Utility</span><br><span class="line">Version 16.00.00.00 (2017.05.02)</span><br><span class="line">Copyright 2008-2017 Avago Technologies. All rights reserved.</span><br><span class="line"></span><br><span class="line">	Adapter Selected is a Avago SAS: SAS3008(C0)</span><br><span class="line"></span><br><span class="line">	Executing Operation: Flash Firmware Image</span><br><span class="line"></span><br><span class="line">		Firmware Image has a Valid Checksum.</span><br><span class="line">		Firmware Version 16.00.10.00</span><br><span class="line">		Firmware Image compatible with Controller.</span><br><span class="line"></span><br><span class="line">		Valid NVDATA Image found.</span><br><span class="line">		NVDATA Major Version 0e.01</span><br><span class="line">		Checking <span class="keyword">for</span> a compatible NVData image...</span><br><span class="line"></span><br><span class="line">		NVDATA Device ID and Chip Revision match verified.</span><br><span class="line">		NVDATA Versions Compatible.</span><br><span class="line">		Valid Initialization Image verified.</span><br><span class="line">		Valid BootLoader Image verified.</span><br><span class="line"></span><br><span class="line">		Beginning Firmware Download...</span><br><span class="line">		Firmware Download Successful.</span><br><span class="line"></span><br><span class="line">		Verifying Download...</span><br><span class="line"></span><br><span class="line">		Firmware Flash Successful.</span><br><span class="line"></span><br><span class="line">		Adapter Not Reset on User Request.</span><br><span class="line"></span><br><span class="line">		New Firmware Downloaded Will Not Run Until Adapter Reset or System Reboot.</span><br><span class="line"></span><br><span class="line">		NVDATA Version 0e.01.30.28</span><br><span class="line">	Executing Operation: Flash BIOS Image</span><br><span class="line"></span><br><span class="line">		Validating BIOS Image...</span><br><span class="line"></span><br><span class="line">		BIOS Header Signature is Valid</span><br><span class="line"></span><br><span class="line">		BIOS Image has a Valid Checksum.</span><br><span class="line"></span><br><span class="line">		BIOS PCI Structure Signature Valid.</span><br><span class="line"></span><br><span class="line">		BIOS Image Compatible with the SAS Controller.</span><br><span class="line"></span><br><span class="line">		Attempting to Flash BIOS Image...</span><br><span class="line"></span><br><span class="line">		Verifying Download...</span><br><span class="line"></span><br><span class="line">		Flash BIOS Image Successful.</span><br><span class="line"></span><br><span class="line">	Finished Processing Commands Successfully.</span><br><span class="line">	Exiting SAS3Flash.</span><br><span class="line"></span><br><span class="line"><span class="comment">## dmesg kernel log, reset mpt3sas</span></span><br><span class="line">[Tue Feb 16 11:40:24 2021] mpt3sas_cm1: sending diag reset !!</span><br><span class="line">[Tue Feb 16 11:40:32 2021] mpt3sas_cm1: diag reset: SUCCESS</span><br><span class="line">[Tue Feb 16 11:40:32 2021] mpt3sas_cm1: CurrentHostPageSize is 0: Setting default host page size to 4k</span><br><span class="line">[Tue Feb 16 11:40:32 2021] mpt3sas_cm1: _base_display_fwpkg_version: complete</span><br><span class="line">[Tue Feb 16 11:40:32 2021] mpt3sas_cm1: LSISAS3008: FWVersion(16.00.01.00), ChipRevision(0x02), BiosVersion(08.37.00.00)</span><br><span class="line">[Tue Feb 16 11:40:32 2021] mpt3sas_cm1: Protocol=(Initiator,Target), Capabilities=(TLR,EEDP,Snapshot Buffer,Diag Trace Buffer,Task Set Full,NCQ)</span><br><span class="line">[Tue Feb 16 11:40:32 2021] mpt3sas_cm1: sending port <span class="built_in">enable</span> !!</span><br><span class="line">[Tue Feb 16 11:40:40 2021] mpt3sas_cm1: port <span class="built_in">enable</span>: SUCCESS</span><br><span class="line">[Tue Feb 16 11:40:40 2021] mpt3sas_cm1: search <span class="keyword">for</span> end-devices: start</span><br><span class="line">[Tue Feb 16 11:40:40 2021] mpt3sas_cm1: search <span class="keyword">for</span> end-devices: complete</span><br><span class="line">[Tue Feb 16 11:40:40 2021] mpt3sas_cm1: search <span class="keyword">for</span> end-devices: start</span><br><span class="line">[Tue Feb 16 11:40:40 2021] mpt3sas_cm1: search <span class="keyword">for</span> PCIe end-devices: complete</span><br><span class="line">[Tue Feb 16 11:40:40 2021] mpt3sas_cm1: search <span class="keyword">for</span> expanders: start</span><br><span class="line">[Tue Feb 16 11:40:40 2021] mpt3sas_cm1: search <span class="keyword">for</span> expanders: complete</span><br><span class="line">[Tue Feb 16 11:40:40 2021] mpt3sas_cm1: host reset: SUCCESS</span><br><span class="line">[Tue Feb 16 11:40:40 2021] mpt3sas_cm1: removing unresponding devices: start</span><br><span class="line">[Tue Feb 16 11:40:40 2021] mpt3sas_cm1: removing unresponding devices: end-devices</span><br><span class="line">[Tue Feb 16 11:40:40 2021] mpt3sas_cm1: Removing unresponding devices: pcie end-devices</span><br><span class="line">[Tue Feb 16 11:40:40 2021] mpt3sas_cm1: removing unresponding devices: expanders</span><br><span class="line">[Tue Feb 16 11:40:40 2021] mpt3sas_cm1: removing unresponding devices: complete</span><br><span class="line">[Tue Feb 16 11:40:40 2021] mpt3sas_cm1: scan devices: start</span><br><span class="line">[Tue Feb 16 11:40:40 2021] mpt3sas_cm1: 	scan devices: expanders start</span><br><span class="line">[Tue Feb 16 11:40:40 2021] mpt3sas_cm1: 	<span class="built_in">break</span> from expander scan: ioc_status(0x0022), loginfo(0x310f0400)</span><br><span class="line">[Tue Feb 16 11:40:40 2021] mpt3sas_cm1: 	scan devices: expanders complete</span><br><span class="line">[Tue Feb 16 11:40:40 2021] mpt3sas_cm1: 	scan devices: end devices start</span><br><span class="line">[Tue Feb 16 11:40:40 2021] mpt3sas_cm1: 	<span class="built_in">break</span> from end device scan: ioc_status(0x0022), loginfo(0x310f0400)</span><br><span class="line">[Tue Feb 16 11:40:40 2021] mpt3sas_cm1: 	scan devices: end devices complete</span><br><span class="line">[Tue Feb 16 11:40:40 2021] mpt3sas_cm1: 	scan devices: pcie end devices start</span><br><span class="line">[Tue Feb 16 11:40:40 2021] mpt3sas_cm1: log_info(0x3003011d): originator(IOP), code(0x03), sub_code(0x011d)</span><br><span class="line">[Tue Feb 16 11:40:40 2021] mpt3sas_cm1: log_info(0x3003011d): originator(IOP), code(0x03), sub_code(0x011d)</span><br><span class="line">[Tue Feb 16 11:40:40 2021] mpt3sas_cm1: 	<span class="built_in">break</span> from pcie end device scan: ioc_status(0x0021), loginfo(0x3003011d)</span><br><span class="line">[Tue Feb 16 11:40:40 2021] mpt3sas_cm1: 	pcie devices: pcie end devices complete</span><br><span class="line">[Tue Feb 16 11:40:40 2021] mpt3sas_cm1: scan devices: complete</span><br></pre></td></tr></table></figure>
<h3 id="install"><a href="#install" class="headerlink" title="install"></a>install</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#compile to local</span></span><br><span class="line">$ make -j4 CONFIG_DEBUG_INFO=1 -C /lib/modules/$(uname -r)/build M=/lsi-9300-8e/mpt3sas</span><br><span class="line"></span><br><span class="line"><span class="comment">#compile to local kernel</span></span><br><span class="line">$ make -j4 CONFIG_DEBUG_INFO=1 -C /lib/modules/$(uname -r)/build M=/lsi-9300-8e/mpt3sas modules_install</span><br></pre></td></tr></table></figure>

<h3 id="parameters"><a href="#parameters" class="headerlink" title="parameters"></a>parameters</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">logging_level:</span></span><br><span class="line"><span class="string">The</span> <span class="string">logging_level</span> <span class="string">feature</span> <span class="string">prints</span> <span class="string">debug</span> <span class="string">messages</span> <span class="string">of</span> <span class="string">the</span> <span class="string">enabled</span> <span class="string">log</span> <span class="string">areas</span> <span class="string">to</span> <span class="string">the</span> <span class="string">kernel</span> <span class="string">message</span> <span class="string">log</span> <span class="string">file</span> <span class="string">/var/log/messages.</span> <span class="string">Below</span> <span class="string">is</span> <span class="string">the</span> <span class="string">bit</span> <span class="string">map</span> <span class="string">for</span> <span class="string">enabling</span> <span class="string">additional</span> <span class="string">logging</span> <span class="string">feature</span> <span class="string">to</span> <span class="string">debug</span> <span class="string">below</span> <span class="string">listed</span> <span class="string">areas.</span></span><br><span class="line"></span><br><span class="line"><span class="string">Default=0</span></span><br><span class="line"><span class="string">MPT_DEBUG</span> <span class="number">0x00000001</span></span><br><span class="line"><span class="string">MPT_DEBUG_MSG_FRAME</span> <span class="number">0x00000002</span></span><br><span class="line"><span class="string">MPT_DEBUG_SG</span> <span class="number">0x00000004</span></span><br><span class="line"><span class="string">MPT_DEBUG_EVENTS</span> <span class="number">0x00000008</span></span><br><span class="line"><span class="string">MPT_DEBUG_EVENT_WORK_TASK</span> <span class="number">0x00000010</span></span><br><span class="line"><span class="string">MPT_DEBUG_INIT</span> <span class="number">0x00000020</span></span><br><span class="line"><span class="string">MPT_DEBUG_EXIT</span> <span class="number">0x00000040</span></span><br><span class="line"><span class="string">MPT_DEBUG_FAIL</span> <span class="number">0x00000080</span></span><br><span class="line"><span class="string">MPT_DEBUG_TM</span> <span class="number">0x00000100</span></span><br><span class="line"><span class="string">MPT_DEBUG_REPLY</span> <span class="number">0x00000200</span></span><br><span class="line"><span class="string">MPT_DEBUG_HANDSHAKE</span> <span class="number">0x00000400</span></span><br><span class="line"><span class="string">MPT_DEBUG_CONFIG</span> <span class="number">0x00000800</span></span><br><span class="line"><span class="string">MPT_DEBUG_DL</span> <span class="number">0x00001000</span></span><br><span class="line"><span class="string">MPT_DEBUG_RESET</span> <span class="number">0x00002000</span></span><br><span class="line"><span class="string">MPT_DEBUG_SCSI</span> <span class="number">0x00004000</span></span><br><span class="line"><span class="string">MPT_DEBUG_IOCTL</span> <span class="number">0x00008000</span></span><br><span class="line"><span class="string">MPT_DEBUG_CSMISAS</span> <span class="number">0x00010000</span></span><br><span class="line"><span class="string">MPT_DEBUG_SAS</span> <span class="number">0x00020000</span></span><br><span class="line"><span class="string">MPT_DEBUG_TRANSPORT</span> <span class="number">0x00040000</span></span><br><span class="line"><span class="string">MPT_DEBUG_TASK_SET_FULL</span> <span class="number">0x00080000</span></span><br><span class="line"></span><br><span class="line"><span class="attr">sdev_queue_depth:</span></span><br><span class="line"><span class="string">This</span> <span class="string">is</span> <span class="string">the</span> <span class="string">global</span> <span class="string">setting</span> <span class="string">for</span> <span class="string">SAS</span> <span class="string">devices</span> <span class="string">queue</span> <span class="string">depth.</span> <span class="string">This</span> <span class="string">means</span> <span class="string">Scsi</span> <span class="string">Mid</span> <span class="string">Layer</span> <span class="string">can</span> <span class="string">send</span> <span class="string">commands</span> <span class="string">to</span> <span class="string">the</span> <span class="string">drive</span> <span class="string">until</span> <span class="string">the</span> <span class="string">number</span> <span class="string">of</span> <span class="string">pending</span> <span class="string">commands</span> <span class="string">reaches</span> <span class="string">the</span> <span class="string">set</span> <span class="string">queue</span> <span class="string">depth.</span></span><br><span class="line"><span class="string">(Default</span> <span class="attr">Queue Depths:</span> <span class="string">SAS</span> <span class="string">-&gt;</span> <span class="number">254</span><span class="string">,</span> <span class="string">SATA</span> <span class="string">-&gt;</span> <span class="number">32</span><span class="string">,</span> <span class="string">NVMe</span> <span class="string">-&gt;</span> <span class="number">128</span><span class="string">)</span></span><br><span class="line"></span><br><span class="line"><span class="attr">max_sectors:</span></span><br><span class="line"><span class="string">Driver</span> <span class="string">imposed</span> <span class="string">sector</span> <span class="string">transfer</span> <span class="string">limit.</span> <span class="string">It</span> <span class="string">indicates</span> <span class="string">the</span> <span class="string">maximum</span> <span class="string">number</span> <span class="string">of</span> <span class="string">sectors</span> <span class="string">to</span> <span class="string">transfer</span> <span class="string">per</span> <span class="string">SCSI</span> <span class="string">IO</span> <span class="string">command.</span> <span class="string">Max_sectors</span> <span class="string">range</span> [<span class="number">64</span> <span class="string">to</span> <span class="number">32767</span>]<span class="string">.</span></span><br><span class="line"><span class="string">Default=32767</span> <span class="string">(int)</span></span><br><span class="line"></span><br><span class="line"><span class="attr">command_retry_count:</span></span><br><span class="line"><span class="string">The</span> <span class="string">set</span> <span class="string">number</span> <span class="string">of</span> <span class="string">times</span> <span class="string">the</span> <span class="string">internally</span> <span class="string">SCSI</span> <span class="string">Scan</span> <span class="string">(e.g.</span> <span class="string">Inquiry,</span> <span class="string">TUR,</span> <span class="string">Report</span> <span class="string">Lun</span> <span class="string">etc.)</span> <span class="string">commands</span> <span class="string">will</span> <span class="string">be</span> <span class="string">retired</span> <span class="string">during</span> <span class="string">drive</span> <span class="string">discovery</span> <span class="string">process</span> <span class="string">when</span> <span class="string">drive</span> <span class="string">is</span> <span class="string">hot</span> <span class="string">added.</span> <span class="string">Default=144</span> <span class="string">(int)</span></span><br><span class="line"></span><br><span class="line"><span class="attr">missing_delay:</span></span><br><span class="line"><span class="attr">This field has Device missing delay and Io missing delay as an array of Int. Device missing delay:</span> <span class="string">The</span> <span class="string">number</span> <span class="string">of</span> <span class="string">seconds</span> <span class="string">the</span> <span class="string">IOC</span> <span class="string">will</span> <span class="string">delay</span> <span class="string">reporting</span> <span class="string">a</span> <span class="string">target</span> <span class="string">device</span> <span class="string">missing</span> <span class="string">after</span> <span class="string">it</span> <span class="string">becomes</span> <span class="string">unavailable.</span> <span class="string">The</span> <span class="string">device</span> <span class="string">will</span> <span class="string">not</span> <span class="string">be</span> <span class="string">reported</span> <span class="string">as</span> <span class="string">missing</span> <span class="string">if</span> <span class="string">it</span> <span class="string">returns</span> <span class="string">before</span> <span class="string">this</span> <span class="string">timer</span> <span class="string">expires.</span></span><br><span class="line"></span><br><span class="line"><span class="attr">IO Missing Delay:</span> <span class="string">The</span> <span class="string">number</span> <span class="string">of</span> <span class="string">seconds</span> <span class="string">the</span> <span class="string">IOC</span> <span class="string">will</span> <span class="string">delay</span> <span class="string">replying</span> <span class="string">to</span> <span class="string">SCSI</span> <span class="string">Initiators</span> <span class="string">request</span> <span class="string">messages</span> <span class="string">when</span> <span class="string">the</span> <span class="string">addressed</span> <span class="string">device</span> <span class="string">is</span> <span class="string">missing</span> <span class="string">because</span> <span class="string">of</span> <span class="string">the</span> <span class="string">inability</span> <span class="string">to</span> <span class="string">access</span> <span class="string">the</span> <span class="string">target</span> <span class="string">device.</span></span><br><span class="line"></span><br><span class="line"><span class="attr">max_lun:</span></span><br><span class="line"><span class="string">This</span> <span class="string">sets</span> <span class="string">max_lun</span> <span class="string">field</span> <span class="string">in</span> <span class="string">the</span> <span class="string">Scsi_Host</span> <span class="string">data</span> <span class="string">structure.</span></span><br><span class="line"><span class="string">Default=16895</span> <span class="string">(int)</span></span><br><span class="line"></span><br><span class="line"><span class="attr">hbas_to_enumerate:</span></span><br><span class="line"><span class="string">A</span> <span class="string">System</span> <span class="string">might</span> <span class="string">have</span> <span class="string">multiple</span> <span class="string">HBA’s.</span> <span class="string">This</span> <span class="string">option</span> <span class="string">enables</span> <span class="string">user</span> <span class="string">to</span> <span class="string">select</span> <span class="string">the</span> <span class="string">HBA’s</span> <span class="string">to</span> <span class="string">be</span> <span class="string">managed</span> <span class="string">by</span> <span class="string">the</span> <span class="string">driver.</span></span><br><span class="line"><span class="number">0</span> <span class="bullet">-</span> <span class="string">Enumerates</span> <span class="string">all</span> <span class="string">SAS</span> <span class="number">2.0</span><span class="string">,</span> <span class="string">PCIe</span> <span class="string">HBA,</span> <span class="string">SAS3.0</span> <span class="string">&amp;</span> <span class="string">above</span> <span class="string">generation</span></span><br><span class="line"><span class="string">of</span> <span class="string">HBAs.</span></span><br><span class="line"><span class="number">1</span> <span class="bullet">-</span> <span class="string">Enumerates</span> <span class="string">only</span> <span class="string">PCIe</span> <span class="string">HBA</span> <span class="string">&amp;</span> <span class="string">SAS</span> <span class="number">2.0</span> <span class="string">generation</span> <span class="string">HBAs.</span></span><br><span class="line"><span class="number">2</span> <span class="bullet">-</span> <span class="string">Enumerates</span> <span class="string">PCIe</span> <span class="string">HBA,</span> <span class="string">SAS</span> <span class="number">3.0</span> <span class="string">&amp;</span> <span class="string">above</span> <span class="string">generation</span> <span class="string">HBAs.</span></span><br><span class="line"><span class="string">Default=-1</span> <span class="string">(Enumerates</span> <span class="string">all</span> <span class="string">SAS</span> <span class="number">2.0</span><span class="string">,</span> <span class="string">PCIe</span> <span class="string">HBA,</span> <span class="string">SAS</span> <span class="number">3.0</span> <span class="string">&amp;</span> <span class="string">above</span> <span class="string">generation</span> <span class="string">HBAs</span> <span class="string">else</span> <span class="string">PCIe</span> <span class="string">HBA,</span> <span class="string">SAS</span> <span class="number">3.0</span> <span class="string">&amp;</span> <span class="string">above</span> <span class="string">generation</span> <span class="string">HBAs</span> <span class="string">only)</span> <span class="string">(int)</span></span><br><span class="line"></span><br><span class="line"><span class="attr">multipath_on_hba:</span></span><br><span class="line"><span class="string">Multipath</span> <span class="string">support</span> <span class="string">to</span> <span class="string">add</span> <span class="string">same</span> <span class="string">target</span> <span class="string">device</span> <span class="string">as</span> <span class="string">many</span> <span class="string">times</span> <span class="string">as</span> <span class="string">it</span> <span class="string">is</span> <span class="string">visible</span> <span class="string">to</span> <span class="string">HBA</span> <span class="string">from</span> <span class="string">various</span> <span class="string">paths.</span> <span class="string">Default=0</span> <span class="string">(Disabled)</span> <span class="string">(int)</span></span><br><span class="line"></span><br><span class="line"><span class="attr">disable_eedp:</span></span><br><span class="line"><span class="string">End-to-end</span> <span class="string">Data</span> <span class="string">Protection</span> <span class="string">is</span> <span class="string">a</span> <span class="string">feature</span> <span class="string">in</span> <span class="string">hard</span> <span class="string">drives</span> <span class="string">that</span> <span class="string">extends</span> <span class="string">error</span> <span class="string">detection</span> <span class="string">to</span> <span class="string">cover</span> <span class="string">the</span> <span class="string">entire</span> <span class="string">path</span> <span class="string">from</span> <span class="string">the</span> <span class="string">computer</span> <span class="string">system</span> <span class="string">to</span> <span class="string">the</span> <span class="string">hard</span> <span class="string">drive</span> <span class="string">media</span> <span class="string">and</span> <span class="string">back.</span> <span class="string">Default=0</span> <span class="string">(EEDP</span> <span class="string">support</span> <span class="string">is</span> <span class="string">enabled)</span> <span class="string">(uint)</span></span><br><span class="line"></span><br><span class="line"><span class="attr">diag_buffer_enable:</span></span><br><span class="line"><span class="string">When</span> <span class="string">this</span> <span class="string">module</span> <span class="string">parameter</span> <span class="string">is</span> <span class="string">set</span> <span class="string">then</span> <span class="string">corresponding</span> <span class="string">diag</span> <span class="string">buffers</span> <span class="string">will</span> <span class="string">be</span> <span class="string">registered</span> <span class="string">with</span> <span class="string">the</span> <span class="string">HBA</span> <span class="string">firmware.</span> <span class="string">Here</span> <span class="string">are</span> <span class="string">list</span> <span class="string">of</span> <span class="string">diag</span> <span class="string">buffer</span> <span class="string">that</span> <span class="string">user</span> <span class="string">can</span> <span class="string">register.</span></span><br><span class="line"><span class="string">Bit</span> <span class="string">fields</span> <span class="string">for</span> <span class="string">diag_buffer_enable</span></span><br><span class="line"><span class="string">Bit</span> <span class="number">0</span> <span class="string">set</span> <span class="string">=</span> <span class="string">TRACE</span></span><br><span class="line"><span class="string">Bit</span> <span class="number">1</span> <span class="string">set</span> <span class="string">=</span> <span class="string">SNAPSHOT</span></span><br><span class="line"><span class="string">Bit</span> <span class="number">2</span> <span class="string">set</span> <span class="string">=</span> <span class="string">EXTENDED</span></span><br><span class="line"><span class="string">Default=0</span> <span class="string">(none</span> <span class="string">of</span> <span class="string">the</span> <span class="string">diag</span> <span class="string">buffers</span> <span class="string">will</span> <span class="string">be</span> <span class="string">registered)(int)</span></span><br><span class="line"></span><br><span class="line"><span class="attr">disable_discovery:</span></span><br><span class="line"><span class="string">Setting</span> <span class="string">this</span> <span class="string">module</span> <span class="string">parameter</span> <span class="string">will</span> <span class="string">disables</span> <span class="string">discovery</span> <span class="string">of</span> <span class="string">attached</span> <span class="string">drives.</span></span><br><span class="line"><span class="string">Default=0</span> <span class="string">(int)</span></span><br><span class="line"></span><br><span class="line"><span class="attr">allow_drive_spindown:</span></span><br><span class="line"><span class="string">Allows</span> <span class="string">host</span> <span class="string">driver</span> <span class="string">to</span> <span class="string">issue</span> <span class="string">START</span> <span class="string">STOP</span> <span class="string">UNIT</span> <span class="string">(STOP)</span> <span class="string">command</span> <span class="string">to</span> <span class="string">spin</span> <span class="string">down</span> <span class="string">the</span> <span class="string">drives</span> <span class="string">before</span> <span class="string">shutdown</span> <span class="string">or</span> <span class="string">driver</span> <span class="string">unload.</span> </span><br><span class="line"><span class="string">Default=1</span> <span class="string">(Spindown</span> <span class="string">SSD</span> <span class="string">but</span> <span class="string">not</span> <span class="string">HDD)</span> <span class="string">(uint)</span></span><br><span class="line"><span class="number">0</span> <span class="string">=&gt;</span> <span class="string">don’t</span> <span class="string">Spindown</span> <span class="string">any</span> <span class="string">SATA</span> <span class="string">drives.</span></span><br><span class="line"><span class="number">1</span> <span class="string">=&gt;</span> <span class="string">Spindown</span> <span class="string">SSD</span> <span class="string">but</span> <span class="string">not</span> <span class="string">HDD</span></span><br><span class="line"><span class="number">2</span> <span class="string">=&gt;</span> <span class="string">Spindown</span> <span class="string">HDD</span> <span class="string">but</span> <span class="string">not</span> <span class="string">SSD</span></span><br><span class="line"><span class="number">3</span> <span class="string">=&gt;</span> <span class="string">Spindown</span> <span class="string">all</span> <span class="string">SATA</span> <span class="string">drives</span></span><br><span class="line"></span><br><span class="line"><span class="attr">prot_mask:</span></span><br><span class="line"><span class="string">Permits</span> <span class="string">overriding</span> <span class="string">the</span> <span class="string">host</span> <span class="string">protection</span> <span class="string">capabilities</span> <span class="string">mask.</span> <span class="string">DIF</span> <span class="string">defines</span> <span class="string">the</span> <span class="string">exchange</span> <span class="string">of</span> <span class="string">protection</span> <span class="string">information</span> <span class="string">between</span> <span class="string">initiator</span> <span class="string">and</span> <span class="string">SBC</span> <span class="string">block</span> <span class="string">device</span> <span class="string">(HBA</span> <span class="string">and</span> <span class="string">Disk).</span> <span class="string">DIX</span> <span class="string">defines</span> <span class="string">the</span> <span class="string">exchange</span> <span class="string">of</span> <span class="string">protection</span> <span class="string">information</span> <span class="string">between</span> <span class="string">OS</span> <span class="string">and</span> <span class="string">initiator</span> <span class="string">(OS</span> <span class="string">and</span> <span class="string">HBA).</span></span><br><span class="line"><span class="string">Bits</span> <span class="string">for</span> <span class="string">enabling</span> <span class="string">DIF/DIX</span></span><br><span class="line"><span class="string">SHOST_DIF_TYPE1_PROTECTION</span> <span class="string">=</span> <span class="number">1</span> <span class="string">&lt;&lt;</span> <span class="number">0</span></span><br><span class="line"><span class="string">SHOST_DIF_TYPE2_PROTECTION</span> <span class="string">=</span> <span class="number">1</span> <span class="string">&lt;&lt;</span> <span class="number">1</span></span><br><span class="line"><span class="string">SHOST_DIF_TYPE3_PROTECTION</span> <span class="string">=</span> <span class="number">1</span> <span class="string">&lt;&lt;</span> <span class="number">2</span></span><br><span class="line"><span class="string">SHOST_DIX_TYPE0_PROTECTION</span> <span class="string">=</span> <span class="number">1</span> <span class="string">&lt;&lt;</span> <span class="number">3</span></span><br><span class="line"><span class="string">SHOST_DIX_TYPE1_PROTECTION</span> <span class="string">=</span> <span class="number">1</span> <span class="string">&lt;&lt;</span> <span class="number">4</span></span><br><span class="line"><span class="string">SHOST_DIX_TYPE2_PROTECTION</span> <span class="string">=</span> <span class="number">1</span> <span class="string">&lt;&lt;</span> <span class="number">5</span></span><br><span class="line"><span class="string">SHOST_DIX_TYPE3_PROTECTION</span> <span class="string">=</span> <span class="number">1</span> <span class="string">&lt;&lt;</span> <span class="number">6</span></span><br><span class="line"><span class="string">Default=0x07</span> <span class="string">(DIX</span> <span class="string">support</span> <span class="string">is</span> <span class="string">disabled</span> <span class="string">and</span> <span class="string">only</span> <span class="string">DIF</span> <span class="string">will</span> <span class="string">be</span></span><br><span class="line"><span class="string">enabled)</span> <span class="string">(int)</span></span><br><span class="line"></span><br><span class="line"><span class="attr">protection_guard_mask:</span></span><br><span class="line"><span class="string">This</span> <span class="string">permits</span> <span class="string">overriding</span> <span class="string">the</span> <span class="string">host</span> <span class="string">protection</span> <span class="string">algorithm</span> <span class="string">mask</span> <span class="string">Available</span> <span class="string">(T10</span> <span class="string">CRC/</span> <span class="string">IP</span> <span class="string">Checksum).</span></span><br><span class="line"><span class="string">All</span> <span class="string">DIX-capable</span> <span class="string">initiators</span> <span class="string">must</span> <span class="string">support</span> <span class="string">the</span> <span class="string">T10-mandated</span> <span class="string">CRC</span> <span class="string">checksum.</span> <span class="string">Controllers</span> <span class="string">can</span> <span class="string">optionally</span> <span class="string">implement</span> <span class="string">the</span> <span class="string">IP</span> <span class="string">checksum</span> <span class="string">scheme</span> <span class="string">which</span> <span class="string">has</span> <span class="string">much</span> <span class="string">lower</span> <span class="string">impact</span> <span class="string">on</span> <span class="string">system</span> <span class="string">performance.</span> <span class="string">Note</span> <span class="string">that</span> <span class="string">the</span> <span class="string">main</span> <span class="string">rationale</span> <span class="string">for</span> <span class="string">the</span> <span class="string">checksum</span> <span class="string">is</span> <span class="string">to</span> <span class="string">match</span> <span class="string">integrity</span> <span class="string">metadata</span> <span class="string">with</span> <span class="string">data.</span></span><br><span class="line"><span class="string">SHOST_DIX_GUARD_CRC</span> <span class="string">=</span> <span class="number">1</span> <span class="string">&lt;&lt;</span> <span class="number">0</span></span><br><span class="line"><span class="string">SHOST_DIX_GUARD_IP</span> <span class="string">=</span> <span class="number">1</span> <span class="string">&lt;&lt;</span> <span class="number">1</span></span><br><span class="line"><span class="string">Default=3</span> <span class="string">(int)</span></span><br><span class="line"></span><br><span class="line"><span class="attr">issue_scsi_cmd_to_bringup_drive:</span> <span class="string">Setting</span> <span class="string">this</span> <span class="string">allows</span> <span class="string">host</span> <span class="string">driver</span> <span class="string">to</span> <span class="string">issue</span> <span class="string">SCSI</span> <span class="string">commands</span> <span class="string">internally</span> <span class="string">to</span> <span class="string">bring</span> <span class="string">the</span> <span class="string">drive</span> <span class="string">to</span> <span class="string">READY</span> <span class="string">state.</span> <span class="string">Default=1</span> <span class="string">(int)</span></span><br><span class="line"></span><br><span class="line"><span class="attr">sata_smart_polling:</span> <span class="string">Setting</span> <span class="string">this</span> <span class="string">feature,</span> <span class="string">allows</span> <span class="string">polling</span> <span class="string">for</span> <span class="string">smart</span> <span class="string">errors</span> <span class="string">on</span> <span class="string">SATA</span> <span class="string">drives.</span></span><br><span class="line"><span class="string">Default=0</span> <span class="string">(uint)</span> </span><br><span class="line"></span><br><span class="line"><span class="attr">max_queue_depth:</span></span><br><span class="line"><span class="string">User</span> <span class="string">can</span> <span class="string">use</span> <span class="string">this</span> <span class="string">to</span> <span class="string">set</span> <span class="string">hba</span> <span class="string">queue</span> <span class="string">depth</span> <span class="string">to</span> <span class="string">be</span> <span class="string">used</span> <span class="string">by</span> <span class="string">the</span> <span class="string">controller.</span> <span class="string">Max</span> <span class="string">controller</span> <span class="string">queue</span> <span class="string">depth</span> <span class="string">can</span> <span class="string">be</span> <span class="string">up</span> <span class="string">to</span> <span class="number">30000</span> <span class="string">(int)</span></span><br><span class="line"></span><br><span class="line"><span class="attr">max_sgl_entries:</span></span><br><span class="line"><span class="string">This</span> <span class="string">allows</span> <span class="string">user</span> <span class="string">to</span> <span class="string">specify</span> <span class="string">the</span> <span class="string">maximum</span> <span class="string">number</span> <span class="string">of</span> <span class="string">ScatterGather</span> <span class="string">entries</span> <span class="string">per</span> <span class="string">I/O.</span> <span class="string">Default=128</span> <span class="string">in</span> <span class="string">most</span> <span class="string">kernels.</span> <span class="string">(Range</span> <span class="number">16</span> <span class="string">to</span> <span class="number">256</span><span class="string">)</span> <span class="string">(int)</span></span><br><span class="line"><span class="string">The</span> <span class="string">Linux</span> <span class="string">“scatter/gather”</span> <span class="string">table</span> <span class="string">size</span> <span class="string">needs</span> <span class="string">to</span> <span class="string">be</span> <span class="string">large</span> <span class="string">enough</span> <span class="string">to</span> <span class="string">allow</span> <span class="string">IO_SIZE</span> <span class="string">IO,</span> <span class="string">if</span> <span class="string">possible.</span> <span class="string">For</span> <span class="string">most</span> <span class="string">drivers,</span> <span class="string">this</span> <span class="string">typically</span> <span class="string">requires</span> <span class="string">a</span> <span class="string">“sg_tablesize”</span> <span class="string">value</span> <span class="string">of</span> <span class="number">256</span> <span class="string">or</span> <span class="string">greater</span> <span class="string">for</span> <span class="string">4MB</span> <span class="string">IO.</span> <span class="string">Different</span> <span class="string">vendors</span> <span class="string">have</span> <span class="string">different</span> <span class="string">defaults</span> <span class="string">for</span> <span class="string">this</span> <span class="string">parameter,</span> <span class="string">and</span> <span class="string">may</span> <span class="string">require</span> <span class="string">a</span> <span class="string">modprobe.conf</span> <span class="string">entry</span> <span class="string">to</span> <span class="string">increase</span> <span class="string">the</span> <span class="string">value.</span> <span class="string">The</span> <span class="string">QLogic</span> <span class="string">driver</span> <span class="string">defaults</span> <span class="string">to</span> <span class="string">a</span> <span class="string">value</span> <span class="string">of</span> <span class="number">1024. </span><span class="string">For</span> <span class="string">Emulex,</span> <span class="string">a</span> <span class="string">modeprobe.conf</span> <span class="string">entry</span> <span class="string">needs</span> <span class="string">to</span> <span class="string">be</span> <span class="string">added</span> <span class="string">to</span> <span class="string">increase</span> <span class="string">the</span> <span class="string">value</span> <span class="string">to</span> <span class="number">256</span> <span class="string">or</span> <span class="string">greater,</span> <span class="attr">such as:</span></span><br><span class="line"><span class="string">options</span> <span class="string">lpfc</span> <span class="string">lpfc_sg_seg_cnt=256</span></span><br><span class="line"><span class="string">The</span> <span class="string">LSI</span> <span class="string">SAS</span> <span class="string">driver,</span> <span class="string">“mpt2sas”,</span> <span class="string">uses</span> <span class="string">the</span> <span class="string">parameter</span> <span class="string">named</span> <span class="string">“max_sgl_entries”</span> <span class="string">to</span> <span class="string">control</span> <span class="string">this</span> <span class="string">value.</span> <span class="string">Its</span> <span class="string">maximum</span> <span class="string">value</span> <span class="string">in</span> <span class="string">RHEL</span> <span class="number">6.</span><span class="string">x</span> <span class="string">currently</span> <span class="string">only</span> <span class="number">128</span><span class="string">.</span></span><br><span class="line"><span class="attr">The value of sg_tablesize can be validated via:</span></span><br><span class="line"><span class="string">&#x27;cat /sys/class/scsi_host/host&#123;n&#125;/sg_tablesize&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">msix_disable:</span></span><br><span class="line"><span class="string">Setting</span> <span class="number">1</span> <span class="string">disables</span> <span class="string">MSIX</span> <span class="string">routed</span> <span class="string">interrupts</span> <span class="string">and</span> <span class="string">uses</span> <span class="string">legacy</span> <span class="string">interrupts.</span></span><br><span class="line"><span class="string">Default=0</span> <span class="string">(int)</span></span><br><span class="line"></span><br><span class="line"><span class="attr">smp_affinity_enable:</span></span><br><span class="line"><span class="string">This</span> <span class="string">defines</span> <span class="string">the</span> <span class="string">CPU</span> <span class="string">cores</span> <span class="string">that</span> <span class="string">are</span> <span class="string">allowed</span> <span class="string">to</span> <span class="string">execute</span> <span class="string">the</span> <span class="string">ISR</span> <span class="string">for</span> <span class="string">that</span> <span class="string">IRQ.</span> <span class="string">Setting</span> <span class="string">this</span> <span class="string">enables</span> <span class="string">SMP</span> <span class="string">affinity</span> <span class="string">feature.</span> <span class="string">Enable/Disable</span> <span class="string">(1/0)</span></span><br><span class="line"><span class="string">Default=1</span> <span class="string">Enabled</span> <span class="string">(int)</span></span><br><span class="line"></span><br><span class="line"><span class="attr">max_msix_vectors:</span></span><br><span class="line"><span class="string">Controls</span> <span class="string">the</span> <span class="string">number</span> <span class="string">of</span> <span class="string">msix</span> <span class="string">vectors</span> <span class="string">to</span> <span class="string">be</span> <span class="string">used</span> <span class="string">by</span> <span class="string">mpt3sas</span> <span class="string">driver.</span> <span class="string">SAS3.0</span> <span class="string">controllers</span> <span class="string">like</span> <span class="string">Invader</span> <span class="string">supports</span> <span class="string">max</span> <span class="number">96</span> <span class="string">msix</span> <span class="string">vectors</span> <span class="string">SAS3.5</span> <span class="string">products</span> <span class="string">like</span> <span class="string">Ventura</span> <span class="string">supports</span> <span class="string">max</span> <span class="number">128</span> <span class="string">msix.</span> <span class="string">(int)</span></span><br><span class="line"></span><br><span class="line"><span class="attr">irqpoll_weight:</span></span><br><span class="line"><span class="string">irq</span> <span class="string">poll</span> <span class="string">weight</span> <span class="string">is</span> <span class="string">used</span> <span class="string">as</span> <span class="string">the</span> <span class="string">budget</span> <span class="string">in</span> <span class="string">processing</span> <span class="string">of</span> <span class="string">reply</span> <span class="string">descriptors</span> <span class="string">from</span> <span class="string">reply</span> <span class="string">descriptor</span> <span class="string">post</span> <span class="string">queues.</span> <span class="string">Also</span> <span class="string">once</span> <span class="string">irqpoll_weight</span> <span class="string">numbers</span> <span class="string">of</span> <span class="string">reply</span> <span class="string">descriptors</span> <span class="string">are</span> <span class="string">continuously</span> <span class="string">processed</span> <span class="string">in</span> <span class="string">ISR</span> <span class="string">context</span> <span class="string">then</span> <span class="string">driver</span> <span class="string">will</span> <span class="string">quit</span> <span class="string">from</span> <span class="string">the</span> <span class="string">ISR</span> <span class="string">and</span> <span class="string">invoke</span> <span class="string">the</span> <span class="string">irq</span> <span class="string">polling</span> <span class="string">thread</span> <span class="string">to</span> <span class="string">process</span> <span class="string">the</span> <span class="string">remaining</span> <span class="string">reply</span> <span class="string">descriptors.</span></span><br><span class="line"><span class="string">Default=one</span> <span class="string">fourth</span> <span class="string">of</span> <span class="string">HBA</span> <span class="string">queue</span> <span class="string">depth.</span> <span class="string">(int)</span></span><br><span class="line"></span><br><span class="line"><span class="attr">mpt3sas_fwfault_debug:</span></span><br><span class="line"><span class="string">Setting</span> <span class="string">this</span> <span class="string">enables</span> <span class="string">detection</span> <span class="string">of</span> <span class="string">firmware</span> <span class="string">fault</span> <span class="string">and</span> <span class="string">halts</span> <span class="string">firmware.</span> <span class="string">Usually</span> <span class="string">this</span> <span class="string">is</span> <span class="string">set</span> <span class="string">to</span> <span class="string">collect</span> <span class="string">the</span> <span class="string">HBA</span> <span class="string">FW</span> <span class="string">logs</span> <span class="string">during</span> <span class="string">firmware</span> <span class="string">fault.</span></span><br><span class="line"><span class="string">Default=0</span> <span class="string">(int)</span></span><br></pre></td></tr></table></figure>

<h3 id="Error-code"><a href="#Error-code" class="headerlink" title="Error code"></a><a target="_blank" rel="noopener" href="https://elixir.bootlin.com/linux/v4.18.20/source/drivers/scsi/mpt3sas/mpi/mpi2_ioc.h">Error code</a></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#define MPI2_EVENT_LOG_DATA                         (0x0001)</span></span><br><span class="line"><span class="comment">#define MPI2_EVENT_STATE_CHANGE                     (0x0002)</span></span><br><span class="line"><span class="comment">#define MPI2_EVENT_HARD_RESET_RECEIVED              (0x0005)</span></span><br><span class="line"><span class="comment">#define MPI2_EVENT_EVENT_CHANGE                     (0x000A)</span></span><br><span class="line"><span class="comment">#define MPI2_EVENT_TASK_SET_FULL                    (0x000E)	/*obsolete */</span></span><br><span class="line"><span class="comment">#define MPI2_EVENT_SAS_DEVICE_STATUS_CHANGE         (0x000F)</span></span><br><span class="line"><span class="comment">#define MPI2_EVENT_IR_OPERATION_STATUS              (0x0014)</span></span><br><span class="line"><span class="comment">#define MPI2_EVENT_SAS_DISCOVERY                    (0x0016)</span></span><br><span class="line"><span class="comment">#define MPI2_EVENT_SAS_BROADCAST_PRIMITIVE          (0x0017)</span></span><br><span class="line"><span class="comment">#define MPI2_EVENT_SAS_INIT_DEVICE_STATUS_CHANGE    (0x0018)</span></span><br><span class="line"><span class="comment">#define MPI2_EVENT_SAS_INIT_TABLE_OVERFLOW          (0x0019)</span></span><br><span class="line"><span class="comment">#define MPI2_EVENT_SAS_TOPOLOGY_CHANGE_LIST         (0x001C)</span></span><br><span class="line"><span class="comment">#define MPI2_EVENT_SAS_ENCL_DEVICE_STATUS_CHANGE    (0x001D)</span></span><br><span class="line"><span class="comment">#define MPI2_EVENT_ENCL_DEVICE_STATUS_CHANGE        (0x001D)</span></span><br><span class="line"><span class="comment">#define MPI2_EVENT_IR_VOLUME                        (0x001E)</span></span><br><span class="line"><span class="comment">#define MPI2_EVENT_IR_PHYSICAL_DISK                 (0x001F)</span></span><br><span class="line"><span class="comment">#define MPI2_EVENT_IR_CONFIGURATION_CHANGE_LIST     (0x0020)</span></span><br><span class="line"><span class="comment">#define MPI2_EVENT_LOG_ENTRY_ADDED                  (0x0021)</span></span><br><span class="line"><span class="comment">#define MPI2_EVENT_SAS_PHY_COUNTER                  (0x0022)</span></span><br><span class="line"><span class="comment">#define MPI2_EVENT_GPIO_INTERRUPT                   (0x0023)</span></span><br><span class="line"><span class="comment">#define MPI2_EVENT_HOST_BASED_DISCOVERY_PHY         (0x0024)</span></span><br><span class="line"><span class="comment">#define MPI2_EVENT_SAS_QUIESCE                      (0x0025)</span></span><br><span class="line"><span class="comment">#define MPI2_EVENT_SAS_NOTIFY_PRIMITIVE             (0x0026)</span></span><br><span class="line"><span class="comment">#define MPI2_EVENT_TEMP_THRESHOLD                   (0x0027)</span></span><br><span class="line"><span class="comment">#define MPI2_EVENT_HOST_MESSAGE                     (0x0028)</span></span><br><span class="line"><span class="comment">#define MPI2_EVENT_POWER_PERFORMANCE_CHANGE         (0x0029)</span></span><br><span class="line"><span class="comment">#define MPI2_EVENT_PCIE_DEVICE_STATUS_CHANGE        (0x0030)</span></span><br><span class="line"><span class="comment">#define MPI2_EVENT_PCIE_ENUMERATION                 (0x0031)</span></span><br><span class="line"><span class="comment">#define MPI2_EVENT_PCIE_TOPOLOGY_CHANGE_LIST        (0x0032)</span></span><br><span class="line"><span class="comment">#define MPI2_EVENT_PCIE_LINK_COUNTER                (0x0033)</span></span><br><span class="line"><span class="comment">#define MPI2_EVENT_ACTIVE_CABLE_EXCEPTION           (0x0034)</span></span><br><span class="line"><span class="comment">#define MPI2_EVENT_SAS_DEVICE_DISCOVERY_ERROR       (0x0035)</span></span><br><span class="line"><span class="comment">#define MPI2_EVENT_MIN_PRODUCT_SPECIFIC             (0x006E)</span></span><br><span class="line"><span class="comment">#define MPI2_EVENT_MAX_PRODUCT_SPECIFIC             (0x007F)</span></span><br><span class="line"><span class="comment">#define MPI2_EVENT_SAS_DEV_STAT_RC_SMART_DATA                           (0x05)</span></span><br><span class="line"><span class="comment">#define MPI2_EVENT_SAS_DEV_STAT_RC_UNSUPPORTED                          (0x07)</span></span><br><span class="line"><span class="comment">#define MPI2_EVENT_SAS_DEV_STAT_RC_INTERNAL_DEVICE_RESET                (0x08)</span></span><br><span class="line"><span class="comment">#define MPI2_EVENT_SAS_DEV_STAT_RC_TASK_ABORT_INTERNAL                  (0x09)</span></span><br><span class="line"><span class="comment">#define MPI2_EVENT_SAS_DEV_STAT_RC_ABORT_TASK_SET_INTERNAL              (0x0A)</span></span><br><span class="line"><span class="comment">#define MPI2_EVENT_SAS_DEV_STAT_RC_CLEAR_TASK_SET_INTERNAL              (0x0B)</span></span><br><span class="line"><span class="comment">#define MPI2_EVENT_SAS_DEV_STAT_RC_QUERY_TASK_INTERNAL                  (0x0C)</span></span><br><span class="line"><span class="comment">#define MPI2_EVENT_SAS_DEV_STAT_RC_ASYNC_NOTIFICATION                   (0x0D)</span></span><br><span class="line"><span class="comment">#define MPI2_EVENT_SAS_DEV_STAT_RC_CMP_INTERNAL_DEV_RESET               (0x0E)</span></span><br><span class="line"><span class="comment">#define MPI2_EVENT_SAS_DEV_STAT_RC_CMP_TASK_ABORT_INTERNAL              (0x0F)</span></span><br><span class="line"><span class="comment">#define MPI2_EVENT_SAS_DEV_STAT_RC_SATA_INIT_FAILURE                    (0x10)</span></span><br><span class="line"><span class="comment">#define MPI2_EVENT_SAS_DEV_STAT_RC_EXPANDER_REDUCED_FUNCTIONALITY       (0x11)</span></span><br><span class="line"><span class="comment">#define MPI2_EVENT_SAS_DEV_STAT_RC_CMP_EXPANDER_REDUCED_FUNCTIONALITY   (0x12)</span></span><br></pre></td></tr></table></figure>

<h3 id="mpt3sas-error-code-check"><a href="#mpt3sas-error-code-check" class="headerlink" title="mpt3sas error code check"></a>mpt3sas error code check</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">1</span><span class="string">:0:1:0</span>]    <span class="string">enclosu</span> <span class="string">DellEMC</span>  <span class="string">Array584EMM</span>      <span class="number">5258</span>  <span class="bullet">-</span>          <span class="bullet">-</span>  <span class="string">/dev/sg1</span>        <span class="bullet">-</span></span><br><span class="line"></span><br><span class="line"><span class="comment">### log show: ## log show all JBOD block devices are block, after a short time, all block device were unblock</span></span><br><span class="line"><span class="attr">mpt3sas_cm0:</span> <span class="string">log_info(0x30030101):</span> <span class="string">originator(IOP),</span> <span class="string">code(0x03),</span> <span class="string">sub_code(0x0101)</span></span><br><span class="line"><span class="attr">mpt3sas_cm0:</span> <span class="string">log_info(0x30030101):</span> <span class="string">originator(IOP),</span> <span class="string">code(0x03),</span> <span class="string">sub_code(0x0101)</span></span><br><span class="line"><span class="comment">## mpt3sas driver error handle</span></span><br><span class="line"><span class="attr">ses 1:0:1:0:</span> <span class="string">_scsih_block_io_device</span> <span class="string">skip</span> <span class="string">device_block</span> <span class="string">for</span> <span class="string">SES</span> <span class="string">handle(0x006b)</span></span><br><span class="line"><span class="attr">sd 1:0:0:0:</span> <span class="string">device_block,</span> <span class="string">handle(0x006c)</span></span><br><span class="line"><span class="attr">sd 1:0:2:0:</span> <span class="string">device_block,</span> <span class="string">handle(0x006d)</span></span><br></pre></td></tr></table></figure>
<p>The 32-bit IOCLogInfo field in the Reply message is used to relay information back to the host. The information can be error codes when an error occurs, or just information about the message.The IOCLogInfo field of the Reply Message has the following subfields:<br>[31:28] MPI_IOCLOGINFO_TYPE_SAS (3)<br>[27:24] IOC_LOGINFO_ORIGINATOR: 0 = IOP, 1 = PL, 2 = IR<br>[23:16] LOGINFO_CODE<br>[15:0]  LOGINFO_CODE Specific<br>LOGINFO_CODE Specific</p>
<p>0x3(MPI_IOCLOGINFO_TYPE_SAS) 0 03 0101  </p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// tail -n 15 ./drivers/message/fusion/lsi/mpi.h</span></span><br><span class="line"><span class="comment">/****************************************************************************/</span></span><br><span class="line"><span class="comment">/*  LogInfo Types                                                           */</span></span><br><span class="line"><span class="comment">/****************************************************************************/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MPI_IOCLOGINFO_TYPE_MASK                (0xF0000000)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MPI_IOCLOGINFO_TYPE_SHIFT               (28)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MPI_IOCLOGINFO_TYPE_NONE                (0x0)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MPI_IOCLOGINFO_TYPE_SCSI                (0x1)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MPI_IOCLOGINFO_TYPE_FC                  (0x2)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MPI_IOCLOGINFO_TYPE_SAS                 (0x3)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MPI_IOCLOGINFO_TYPE_ISCSI               (0x4)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MPI_IOCLOGINFO_LOG_DATA_MASK            (0x0FFFFFFF)</span></span><br></pre></td></tr></table></figure>

<p>0x3 0(means originator is IOP) 03 0101   </p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//./drivers/message/fusion/mptbase.c</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">switch</span> (sas_loginfo.dw.originator) &#123;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">case</span> <span class="number">0</span>:  <span class="comment">/* IOP */</span></span><br><span class="line">                        <span class="keyword">if</span> (sas_loginfo.dw.code &lt;</span><br><span class="line">                            ARRAY_SIZE(iop_code_str))</span><br><span class="line">                                code_desc = iop_code_str[sas_loginfo.dw.code];</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">1</span>:  <span class="comment">/* PL */</span></span><br><span class="line">                        <span class="keyword">if</span> (sas_loginfo.dw.code &lt;</span><br><span class="line">                            ARRAY_SIZE(pl_code_str))</span><br><span class="line">                                code_desc = pl_code_str[sas_loginfo.dw.code];</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">2</span>:  <span class="comment">/* IR */</span></span><br><span class="line">                        <span class="keyword">if</span> (sas_loginfo.dw.code &gt;=</span><br><span class="line">                            ARRAY_SIZE(ir_code_str))</span><br><span class="line">                                <span class="keyword">break</span>;</span><br><span class="line">                        code_desc = ir_code_str[sas_loginfo.dw.code];</span><br><span class="line">                        <span class="keyword">if</span> (sas_loginfo.dw.subcode &gt;=</span><br><span class="line">                            ARRAY_SIZE(raid_sub_code_str))</span><br><span class="line">                                <span class="keyword">break</span>;</span><br><span class="line">                        <span class="keyword">if</span> (sas_loginfo.dw.code == <span class="number">0</span>)</span><br><span class="line">                                sub_code_desc =</span><br><span class="line">                                    raid_sub_code_str[sas_loginfo.dw.subcode];</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">default</span>:</span><br><span class="line">                        <span class="keyword">return</span>;</span><br></pre></td></tr></table></figure>

<p>0x3 0 03(code(0x03), IOP_LOGINFO_CODE_CONFIG_INVALID_PAGE) 0101</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">0x00030000</span>  <span class="string">IOP_LOGINFO_CODE_CONFIG_INVALID_PAGE</span>  <span class="string">Not</span> <span class="string">used</span></span><br><span class="line"></span><br><span class="line"><span class="string">//./drivers/message/fusion/lsi/mpi_log_sas.h</span></span><br><span class="line"><span class="comment">#define IOP_LOGINFO_CODE_CONFIG_INVALID_PAGE                 (0x00030000)</span></span><br></pre></td></tr></table></figure>

<p>0x3 0 03 0101(sub_code(0x0101))<br>0x00030100, I guess the last bit has the more details.<br>The error show the “Route Table Entry not found”</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//./drivers/message/fusion/lsi/mpi_log_sas.h</span></span><br><span class="line"><span class="comment">// show all IOP ERROR CODE</span></span><br><span class="line">grep -R IOP_LOGINFO ./drivers/message<span class="comment">/*</span></span><br><span class="line"><span class="comment">------------------------------------------23:0 bit-----------------------------------------------------------</span></span><br><span class="line"><span class="comment">                                                                                                            |</span></span><br><span class="line"><span class="comment">                                                                                                            |</span></span><br><span class="line"><span class="comment">                                                                                                            V</span></span><br><span class="line"><span class="comment">./drivers/message/fusion/lsi/mpi_log_sas.h:#define IOP_LOGINFO_CODE_INVALID_SAS_ADDRESS                 (0x00010000)</span></span><br><span class="line"><span class="comment">./drivers/message/fusion/lsi/mpi_log_sas.h:#define IOP_LOGINFO_CODE_UNUSED2                             (0x00020000)</span></span><br><span class="line"><span class="comment">./drivers/message/fusion/lsi/mpi_log_sas.h:#define IOP_LOGINFO_CODE_CONFIG_INVALID_PAGE                 (0x00030000)</span></span><br><span class="line"><span class="comment">./drivers/message/fusion/lsi/mpi_log_sas.h:#define IOP_LOGINFO_CODE_CONFIG_INVALID_PAGE_RT              (0x00030100) /* Route Table Entry not found */</span></span><br><span class="line">./drivers/message/fusion/lsi/mpi_log_sas.h:<span class="meta">#<span class="meta-keyword">define</span> IOP_LOGINFO_CODE_CONFIG_INVALID_PAGE_PN              (0x00030200) <span class="comment">/* Invalid Page Number */</span></span></span><br><span class="line">./drivers/message/fusion/lsi/mpi_log_sas.h:<span class="meta">#<span class="meta-keyword">define</span> IOP_LOGINFO_CODE_CONFIG_INVALID_PAGE_FORM            (0x00030300) <span class="comment">/* Invalid FORM */</span></span></span><br><span class="line">./drivers/message/fusion/lsi/mpi_log_sas.h:<span class="meta">#<span class="meta-keyword">define</span> IOP_LOGINFO_CODE_CONFIG_INVALID_PAGE_PT              (0x00030400) <span class="comment">/* Invalid Page Type */</span></span></span><br><span class="line">./drivers/message/fusion/lsi/mpi_log_sas.h:<span class="meta">#<span class="meta-keyword">define</span> IOP_LOGINFO_CODE_CONFIG_INVALID_PAGE_DNM             (0x00030500) <span class="comment">/* Device Not Mapped */</span></span></span><br><span class="line">./drivers/message/fusion/lsi/mpi_log_sas.h:<span class="meta">#<span class="meta-keyword">define</span> IOP_LOGINFO_CODE_CONFIG_INVALID_PAGE_PERSIST         (0x00030600) <span class="comment">/* Persistent Page not found */</span></span></span><br><span class="line">./drivers/message/fusion/lsi/mpi_log_sas.h:<span class="meta">#<span class="meta-keyword">define</span> IOP_LOGINFO_CODE_CONFIG_INVALID_PAGE_DEFAULT         (0x00030700) <span class="comment">/* Default Page not found */</span></span></span><br><span class="line">./drivers/message/fusion/lsi/mpi_log_sas.h:<span class="meta">#<span class="meta-keyword">define</span> IOP_LOGINFO_CODE_FWUPLOAD_NO_FLASH_AVAILABLE         (0x0003E000) <span class="comment">/* Tried to upload from flash, but there is none */</span></span></span><br><span class="line">./drivers/message/fusion/lsi/mpi_log_sas.h:<span class="meta">#<span class="meta-keyword">define</span> IOP_LOGINFO_CODE_FWUPLOAD_UNKNOWN_IMAGE_TYPE         (0x0003E001) <span class="comment">/* ImageType field contents were invalid */</span></span></span><br><span class="line">./drivers/message/fusion/lsi/mpi_log_sas.h:<span class="meta">#<span class="meta-keyword">define</span> IOP_LOGINFO_CODE_FWUPLOAD_WRONG_IMAGE_SIZE           (0x0003E002) <span class="comment">/* ImageSize field in TCSGE was bad/offset in MfgPg 4 was wrong */</span></span></span><br><span class="line">./drivers/message/fusion/lsi/mpi_log_sas.h:<span class="meta">#<span class="meta-keyword">define</span> IOP_LOGINFO_CODE_FWUPLOAD_ENTIRE_FLASH_UPLOAD_FAILED (0x0003E003) <span class="comment">/* Error occurred while attempting to upload the entire flash */</span></span></span><br><span class="line">./drivers/message/fusion/lsi/mpi_log_sas.h:<span class="meta">#<span class="meta-keyword">define</span> IOP_LOGINFO_CODE_FWUPLOAD_REGION_UPLOAD_FAILED       (0x0003E004) <span class="comment">/* Error occurred while attempting to upload single flash region */</span></span></span><br><span class="line">./drivers/message/fusion/lsi/mpi_log_sas.h:<span class="meta">#<span class="meta-keyword">define</span> IOP_LOGINFO_CODE_FWUPLOAD_DMA_FAILURE                (0x0003E005) <span class="comment">/* Problem occurred while DMAing FW to host memory */</span></span></span><br><span class="line">./drivers/message/fusion/lsi/mpi_log_sas.h:<span class="meta">#<span class="meta-keyword">define</span> IOP_LOGINFO_CODE_DIAG_MSG_ERROR                      (0x00040000) <span class="comment">/* Error handling diag msg - or&#x27;d with diag status */</span></span></span><br><span class="line">./drivers/message/fusion/lsi/mpi_log_sas.h:<span class="meta">#<span class="meta-keyword">define</span> IOP_LOGINFO_CODE_TASK_TERMINATED                     (0x00050000)</span></span><br><span class="line">./drivers/message/fusion/lsi/mpi_log_sas.h:<span class="meta">#<span class="meta-keyword">define</span> IOP_LOGINFO_CODE_ENCL_MGMT_READ_ACTION_ERR0R         (0x00060001) <span class="comment">/* Read Action not supported for SEP msg */</span></span></span><br><span class="line">./drivers/message/fusion/lsi/mpi_log_sas.h:<span class="meta">#<span class="meta-keyword">define</span> IOP_LOGINFO_CODE_ENCL_MGMT_INVALID_BUS_ID_ERR0R      (0x00060002) <span class="comment">/* Invalid Bus/ID in SEP msg */</span></span></span><br><span class="line">./drivers/message/fusion/lsi/mpi_log_sas.h:<span class="meta">#<span class="meta-keyword">define</span> IOP_LOGINFO_CODE_TARGET_ASSIST_TERMINATED            (0x00070001)</span></span><br><span class="line">./drivers/message/fusion/lsi/mpi_log_sas.h:<span class="meta">#<span class="meta-keyword">define</span> IOP_LOGINFO_CODE_TARGET_STATUS_SEND_TERMINATED       (0x00070002)</span></span><br><span class="line">./drivers/message/fusion/lsi/mpi_log_sas.h:<span class="meta">#<span class="meta-keyword">define</span> IOP_LOGINFO_CODE_TARGET_MODE_ABORT_ALL_IO            (0x00070003)</span></span><br><span class="line">./drivers/message/fusion/lsi/mpi_log_sas.h:<span class="meta">#<span class="meta-keyword">define</span> IOP_LOGINFO_CODE_TARGET_MODE_ABORT_EXACT_IO          (0x00070004)</span></span><br><span class="line">./drivers/message/fusion/lsi/mpi_log_sas.h:<span class="meta">#<span class="meta-keyword">define</span> IOP_LOGINFO_CODE_TARGET_MODE_ABORT_EXACT_IO_REQ      (0x00070005)</span></span><br><span class="line">./drivers/message/fusion/lsi/mpi_log_sas.h:<span class="meta">#<span class="meta-keyword">define</span> IOP_LOGINFO_CODE_LOG_TIMESTAMP_EVENT                 (0x00080000)</span></span><br></pre></td></tr></table></figure>

<h4 id="The-others"><a href="#The-others" class="headerlink" title="The others"></a>The others</h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">mpt3sas_cm0:</span> <span class="string">log_info(0x31140000):</span> <span class="string">originator(PL),</span> <span class="string">code(0x14),</span> <span class="string">sub_code(0x0000)</span></span><br></pre></td></tr></table></figure>
<p>0x3 (SAS) 1 (PL) 14(PL_LOGINFO_CODE_IO_EXECUTED) 0000(PL_LOGINFO_CODE_IO_EXECUTED)<br>0x00140000   PL_LOGINFO_CODE_IO_EXECUTED  I/O Aborted (host issued task management) after sent to target.</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">mpt3sas_cm0:</span> <span class="string">log_info(0x31120436):</span> <span class="string">originator(PL),</span> <span class="string">code(0x12),</span> <span class="string">sub_code(0x0436)</span></span><br></pre></td></tr></table></figure>
<p>0x3 (SAS) 1 (PL) 12(PL_LOGINFO_CODE_ABORT) 0400(PL_LOGINFO_SUB_CODE_FRAME_XFER_ERROR)</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* Bits 0-3 encode Transport Status Register (offset 0x08) */</span></span><br><span class="line"><span class="comment">/* Bit 0 is Status Bit 0: FrameXferErr */</span></span><br><span class="line"><span class="comment">/* Bit 1 &amp; 2 are Status Bits 16 and 17: FrameXmitErrStatus */</span></span><br><span class="line"><span class="comment">/* Bit 3 is Status Bit 18 WriteDataLenghtGTDataLengthErr */</span></span><br></pre></td></tr></table></figure>

<h3 id="hba"><a href="#hba" class="headerlink" title="hba"></a>hba</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span></span></span><br><span class="line"><span class="class">    &#123;</span></span><br><span class="line">      <span class="keyword">char</span>               *name;</span><br><span class="line">      <span class="keyword">int</span>                (* detect)(<span class="keyword">int</span>);</span><br><span class="line">      <span class="keyword">const</span> <span class="keyword">char</span>         *(* info)(<span class="keyword">void</span>);</span><br><span class="line">      <span class="keyword">int</span>                (* queuecommand)(Scsi_Cmnd *,</span><br><span class="line">                          <span class="keyword">void</span> (*done)(Scsi_Cmnd *));</span><br><span class="line">      <span class="keyword">int</span>                (* command)(Scsi_Cmnd *);</span><br><span class="line">      <span class="keyword">int</span>                (* <span class="built_in">abort</span>)(Scsi_Cmnd *, <span class="keyword">int</span>);</span><br><span class="line">      <span class="keyword">int</span>                (* reset)(<span class="keyword">void</span>);</span><br><span class="line">      <span class="keyword">int</span>                (* slave_attach)(<span class="keyword">int</span>, <span class="keyword">int</span>);</span><br><span class="line">      <span class="keyword">int</span>                (* bios_param)(<span class="keyword">int</span>, <span class="keyword">int</span>, <span class="keyword">int</span> []);</span><br><span class="line">      <span class="keyword">int</span>                can_queue;</span><br><span class="line">      <span class="keyword">int</span>                this_id;</span><br><span class="line">      <span class="keyword">short</span> <span class="keyword">unsigned</span> <span class="keyword">int</span> sg_tablesize;</span><br><span class="line">      <span class="keyword">short</span>              cmd_per_lun;</span><br><span class="line">      <span class="keyword">unsigned</span>           present:<span class="number">1</span>;</span><br><span class="line">      <span class="keyword">unsigned</span>           unchecked_isa_dma:<span class="number">1</span>;</span><br><span class="line">    &#125; Scsi_Host;</span><br></pre></td></tr></table></figure>

<p>cmd_per_lun<br>The SCSI standard supports the notion of ``linked commands.’’ Linked commands allow several commands to be queued consecutively to a single SCSI device. The cmd_per_lun variable specifies the number of linked commands allowed. This variable should be set to 1 if command linking is not supported. At this time, however, the high-level SCSI code will not take advantage of this feature.<br>This variable should be set to 1 if command linking is not supported.</p>
<p>can_queue<br>can_queue holds the number of outstanding commands the host adapter can process. Unless RESELECTION is supported by the driver and the driver is interrupt-driven, (some of the early Linux drivers were not interrupt driven and, consequently, had very poor performance) this variable should be set to 1.</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## mpt3sas</span></span><br><span class="line"><span class="meta">$</span> <span class="string">ls</span></span><br><span class="line"><span class="attr">active_mode</span>     <span class="string">device_delay         fw_queue_depth            io_delay           sg_prot_tablesize  use_blk_mq</span></span><br><span class="line"><span class="attr">board_assembly</span>  <span class="string">diag_trigger_event   host_busy                 logging_level      sg_tablesize       version_bios</span></span><br><span class="line"><span class="attr">board_name</span>      <span class="string">diag_trigger_master  host_reset                power              state              version_fw</span></span><br><span class="line"><span class="attr">board_tracer</span>    <span class="string">diag_trigger_mpi     host_sas_address          proc_name          subsystem          version_mpi</span></span><br><span class="line"><span class="attr">BRM_status</span>      <span class="string">diag_trigger_scsi    host_trace_buffer         prot_capabilities  supported_mode     version_nvdata_default</span></span><br><span class="line"><span class="attr">can_queue</span>       <span class="string">drv_support_bitmap   host_trace_buffer_enable  prot_guard_type    uevent             version_nvdata_persistent</span></span><br><span class="line"><span class="attr">cmd_per_lun</span>     <span class="string">eh_deadline          host_trace_buffer_size    reply_queue_count  unchecked_isa_dma  version_product</span></span><br><span class="line"><span class="attr">device</span>          <span class="string">fwfault_debug        ioc_reset_count           scan               unique_id</span></span><br><span class="line"></span><br><span class="line"><span class="meta">$</span> <span class="string">cat fw_queue_depth</span></span><br><span class="line"><span class="attr">10048</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## lpfc </span></span><br><span class="line"><span class="meta">$</span> <span class="string">cat lpfc_lun_queue_depth</span></span><br><span class="line"><span class="attr">30</span></span><br><span class="line"><span class="meta">$</span> <span class="string">cat lpfc_hba_queue_depth</span></span><br><span class="line"><span class="attr">2821</span></span><br><span class="line"><span class="meta">$</span> <span class="string">cat lpfc_tgt_queue_depth</span></span><br><span class="line"><span class="attr">65535</span></span><br><span class="line"></span><br><span class="line"><span class="attr">ls</span> <span class="string">/sys/devices/pci0000:5d/0000:5d:00.0/0000:5e:00.1/host18/scsi_host/host18/</span></span><br><span class="line"><span class="attr">active_mode</span>             <span class="string">lpfc_cr_delay              lpfc_fdmi_on             lpfc_poll                 lpfc_xlane_lun_state   prot_capabilities</span></span><br><span class="line"><span class="attr">bg_apptag_err</span>           <span class="string">lpfc_devloss_tmo           lpfc_fips_level          lpfc_poll_tmo             lpfc_xlane_lun_status  prot_guard_type</span></span><br><span class="line"><span class="attr">bg_guard_err</span>            <span class="string">lpfc_drvr_stat_data        lpfc_fips_rev            lpfc_ras_fwlog_buffsize   lpfc_xlane_priority    protocol</span></span><br><span class="line"><span class="attr">bg_info</span>                 <span class="string">lpfc_drvr_version          lpfc_first_burst_size    lpfc_ras_fwlog_func       lpfc_XLanePriority     scan</span></span><br><span class="line"><span class="attr">bg_reftag_err</span>           <span class="string">lpfc_dss                   lpfc_hba_queue_depth     lpfc_ras_fwlog_level      lpfc_xlane_supported   serialnum</span></span><br><span class="line"><span class="attr">board_mode</span>              <span class="string">lpfc_enable_bbcr           lpfc_iocb_cnt            lpfc_req_fw_upgrade       lpfc_xlane_tgt         sg_prot_tablesize</span></span><br><span class="line"><span class="attr">can_queue</span>               <span class="string">lpfc_enable_bg             lpfc_link_speed          lpfc_scan_down            lpfc_xlane_vpt         sg_tablesize</span></span><br><span class="line"><span class="attr">cmd_per_lun</span>             <span class="string">lpfc_enable_dpp            lpfc_log_verbose         lpfc_sg_seg_cnt           lpfc_xri_split         state</span></span><br><span class="line"><span class="attr">ctlreg</span>                  <span class="string">lpfc_enable_fc4_type       lpfc_lun_queue_depth     lpfc_soft_wwn_enable      max_rpi                subsystem</span></span><br><span class="line"><span class="attr">device</span>                  <span class="string">lpfc_enable_fip            lpfc_max_luns            lpfc_soft_wwnn            max_vpi                supported_mode</span></span><br><span class="line"><span class="attr">eh_deadline</span>             <span class="string">lpfc_enable_hba_heartbeat  lpfc_max_scsicmpl_time   lpfc_soft_wwpn            max_xri                txcmplq_hw</span></span><br><span class="line"><span class="attr">fwrev</span>                   <span class="string">lpfc_enable_hba_reset      lpfc_multi_ring_rctl     lpfc_sriov_hw_max_virtfn  mbox                   txq_hw</span></span><br><span class="line"><span class="attr">hdw</span>                     <span class="string">lpfc_enable_mds_diags      lpfc_multi_ring_support  lpfc_sriov_nr_virtfn      menlo_mgmt_mode        uevent</span></span><br><span class="line"><span class="attr">host_busy</span>               <span class="string">lpfc_enable_npiv           lpfc_multi_ring_type     lpfc_stat_data_ctrl       modeldesc              unchecked_isa_dma</span></span><br><span class="line"><span class="attr">host_reset</span>              <span class="string">lpfc_enable_rrq            lpfc_nodev_tmo           lpfc_suppress_link_up     modelname              unique_id</span></span><br><span class="line"><span class="attr">info</span>                    <span class="string">lpfc_enable_SmartSAN       lpfc_ns_query            lpfc_suppress_rsp         npiv_info              use_blk_mq</span></span><br><span class="line"><span class="attr">iocb_hw</span>                 <span class="string">lpfc_EnableXLane           lpfc_nvme_embed_cmd      lpfc_task_mgmt_tmo        nport_evt_cnt          used_rpi</span></span><br><span class="line"><span class="attr">issue_reset</span>             <span class="string">lpfc_fcf_failover_policy   lpfc_nvme_enable_fb      lpfc_temp_sensor          num_discovered_ports   used_vpi</span></span><br><span class="line"><span class="attr">link_state</span>              <span class="string">lpfc_fcp2_no_tgt_reset     lpfc_nvme_io_channel     lpfc_tgt_queue_depth      nvme_info              used_xri</span></span><br><span class="line"><span class="attr">lpfc_ack0</span>               <span class="string">lpfc_fcp_class             lpfc_nvme_oas            lpfc_topology             option_rom_version</span></span><br><span class="line"><span class="attr">lpfc_aer_state_cleanup</span>  <span class="string">lpfc_fcp_cpu_map           lpfc_nvmet_fb_size       lpfc_use_adisc            portnum</span></span><br><span class="line"><span class="attr">lpfc_aer_support</span>        <span class="string">lpfc_fcp_imax              lpfc_nvmet_mrq           lpfc_use_blk_mq           power</span></span><br><span class="line"><span class="attr">lpfc_auto_imax</span>          <span class="string">lpfc_fcp_io_channel        lpfc_nvmet_mrq_post      lpfc_use_msi              proc_name</span></span><br><span class="line"><span class="attr">lpfc_cr_count</span>           <span class="string">lpfc_fcp_io_sched          lpfc_peer_port_login     lpfc_xlane_lun            programtype</span></span><br></pre></td></tr></table></figure>


</div><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="mailto:undefined">Homer</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="http://yoursite.com/2018/09/27/hba/">http://yoursite.com/2018/09/27/hba/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/scsi/">scsi</a><a class="post-meta__tags" href="/tags/mpt3sas/">mpt3sas</a></div><div class="post_share"><div class="social-share" data-image="https://homerl.github.io/img/hard-disk_223cf.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2018/11/13/ext4/"><img class="prev-cover" src="https://homerl.github.io/img/hard-disk_223cf.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">Previous Post</div><div class="prev_info">ext4 info</div></div></a></div><div class="next-post pull-right"><a href="/2018/08/06/numa/"><img class="next-cover" src="https://homerl.github.io/img/operting_system_a32c6f.svg" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">Next Post</div><div class="next_info">numa</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span> Related Articles</span></div><div class="relatedPosts-list"><div><a href="/2019/11/26/smartctl/" title="smartctl"><img class="cover" src="https://homerl.github.io/img/hard-disk_223cf.jpg"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2019-11-26</div><div class="title">smartctl</div></div></a></div><div><a href="/2018/07/08/scsi_dev/" title="scsi device maintain"><img class="cover" src="https://homerl.github.io/img/hard-disk_223cf.jpg"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2018-07-08</div><div class="title">scsi device maintain</div></div></a></div><div><a href="/2016/12/04/openzfs-tips/" title="openzfs tips"><img class="cover" src="https://homerl.github.io/img/the_last_word_fs.jpg"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2016-12-04</div><div class="title">openzfs tips</div></div></a></div><div><a href="/2016/08/10/block_device/" title="The block device"><img class="cover" src="https://homerl.github.io/img/hard-disk_223cf.jpg"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2016-08-10</div><div class="title">The block device</div></div></a></div><div><a href="/2016/06/16/spec/" title="spec"><img class="cover" src="https://homerl.github.io/img/network-interface-card-2081371-1751392.png"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2016-06-16</div><div class="title">spec</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> Comment</span></div></div><div class="comment-wrap"><div><div id="gitalk-container"></div></div></div></div></article></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2015 - 2021 By Homer</div><div class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><section id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Read Mode"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="Switch Between Light And Dark Mode"><i class="fas fa-adjust"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="Setting"><i class="fas fa-cog"></i></button><a id="to_comment" href="#post-comment" title="Scroll To Comments"><i class="fas fa-comments"></i></a><button class="close" id="mobile-toc-button" type="button" title="Table Of Contents"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="Back To Top"><i class="fas fa-arrow-up"></i></button></div></section><div class="search-dialog" id="local-search"><div class="search-dialog__title" id="local-search-title">Local search</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="Search for Posts" type="text"/></div></div></div><hr/><div id="local-search-results"><div id="local-hits"></div><div id="local-stats"><div class="local-search-stats__hr" id="hr"><span>Powered by</span> <a target="_blank" rel="noopener" href="https://github.com/wzpan/hexo-generator-search" style="color:#49B1F5;">hexo-generator-search</a></div></div></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div><div><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>function addGitalkSource () {
  const ele = document.createElement('link')
  ele.rel = 'stylesheet'
  ele.href= 'https://cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.css'
  document.getElementsByTagName('head')[0].appendChild(ele)
}

function loadGitalk () {
  function initGitalk () {
    var gitalk = new Gitalk({
      clientID: '0b9d5b98d0a972b33cf7',
      clientSecret: '769efc11b32f6c0d03bcbf3ee800dfc4e2690459',
      repo: 'homerl.github.io',
      owner: 'homerl',
      admin: ['homerl'],
      id: 'a1dfdfa222114e40dd56e2170ee9644a',
      language: 'en',
      perPage: 10,
      distractionFreeMode: false,
      pagerDirection: 'last',
      createIssueManually: false,
      updateCountCallback: commentCount
    })
    gitalk.render('gitalk-container')
  }

  if (typeof Gitalk === 'function') initGitalk()
  else {
    addGitalkSource()
    $.getScript('https://cdn.jsdelivr.net/npm/gitalk@latest/dist/gitalk.min.js', initGitalk)
  }
}

function commentCount(n){
  let isCommentCount = document.querySelector('#post-meta .gitalk-comment-count')
  if (isCommentCount) {
    isCommentCount.innerHTML= n
  }
}

if ('Gitalk' === 'Gitalk' || !false) {
  if (false) btf.loadComment(document.getElementById('gitalk-container'), loadGitalk)
  else loadGitalk()
} else {
  function loadOtherComment () {
    loadGitalk()
  }
}</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></div></body></html>