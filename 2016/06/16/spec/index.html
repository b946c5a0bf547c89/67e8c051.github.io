<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>spec | 无常无相无功;不动不破不空</title><meta name="keywords" content="scsi,cpu,bus,nvme"><meta name="author" content="Homer"><meta name="copyright" content="Homer"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><meta name="description" content="Intel Cascade Lake CPU suffix “F” suffix integrates the Omni-Path Host Fabric Interface (HFI) die on-package “L” suffix indicates the SKU is a large memory (4.5 TiB) tier SKU “M” suffix indicates the">
<meta property="og:type" content="article">
<meta property="og:title" content="spec">
<meta property="og:url" content="http://yoursite.com/2016/06/16/spec/index.html">
<meta property="og:site_name" content="无常无相无功;不动不破不空">
<meta property="og:description" content="Intel Cascade Lake CPU suffix “F” suffix integrates the Omni-Path Host Fabric Interface (HFI) die on-package “L” suffix indicates the SKU is a large memory (4.5 TiB) tier SKU “M” suffix indicates the">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://homerl.github.io/img/network-interface-card-2081371-1751392.png">
<meta property="article:published_time" content="2016-06-16T07:35:11.000Z">
<meta property="article:modified_time" content="2022-07-15T01:29:26.445Z">
<meta property="article:author" content="Homer">
<meta property="article:tag" content="scsi">
<meta property="article:tag" content="cpu">
<meta property="article:tag" content="bus">
<meta property="article:tag" content="nvme">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://homerl.github.io/img/network-interface-card-2081371-1751392.png"><link rel="shortcut icon" href="/img/stout-shield.png"><link rel="canonical" href="http://yoursite.com/2016/06/16/spec/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><script>var GLOBAL_CONFIG = { 
  root: '/',
  hexoversion: '5.2.0',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"We didn't find any results for the search: ${query}"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: 'Just',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: undefined,
  ClickShowText: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  justifiedGallery: {
    js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
    css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: false
};

var saveToLocal = {
  set: function setWithExpiry(key, value, ttl) {
    const now = new Date()
    const expiryDay = ttl * 86400000
    const item = {
      value: value,
      expiry: now.getTime() + expiryDay,
    }
    localStorage.setItem(key, JSON.stringify(item))
  },

  get: function getWithExpiry(key) {
    const itemStr = localStorage.getItem(key)

    if (!itemStr) {
      return undefined
    }
    const item = JSON.parse(itemStr)
    const now = new Date()

    if (now.getTime() > item.expiry) {
      localStorage.removeItem(key)
      return undefined
    }
    return item.value
  }
}</script><script id="config_change">var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isSidebar: true,
  postUpdate: '2022-07-15 09:29:26'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(function () {
  window.activateDarkMode = function () {
    document.documentElement.setAttribute('data-theme', 'dark')
    if (document.querySelector('meta[name="theme-color"]') !== null) {
      document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
    }
  }
  window.activateLightMode = function () {
    document.documentElement.setAttribute('data-theme', 'light')
    if (document.querySelector('meta[name="theme-color"]') !== null) {
      document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
    }
  }

  const autoChangeMode = 'false'
  const t = saveToLocal.get('theme')
  if (autoChangeMode === '1') {
    const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
    const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
    const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
    const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

    if (t === undefined) {
      if (isLightMode) activateLightMode()
      else if (isDarkMode) activateDarkMode()
      else if (isNotSpecified || hasNoSupport) {
        const now = new Date()
        const hour = now.getHours()
        const isNight = hour <= 6 || hour >= 18
        isNight ? activateDarkMode() : activateLightMode()
      }
      window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
        if (saveToLocal.get('theme') === undefined) {
          e.matches ? activateDarkMode() : activateLightMode()
        }
      })
    } else if (t === 'light') activateLightMode()
    else activateDarkMode()
  } else if (autoChangeMode === '2') {
    const now = new Date()
    const hour = now.getHours()
    const isNight = hour <= 6 || hour >= 18
    if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
    else if (t === 'light') activateLightMode()
    else activateDarkMode()
  } else {
    if (t === 'dark') activateDarkMode()
    else if (t === 'light') activateLightMode()
  }
})()</script><meta name="generator" content="Hexo 5.2.0"><link rel="alternate" href="/atom.xml" title="无常无相无功;不动不破不空" type="application/atom+xml">
</head><body><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="/img/fighting-spiri-logot.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">Articles</div><div class="length_num">57</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">Tags</div><div class="length_num">57</div></a></div></div><div class="mobile_data_item is-center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">Categories</div><div class="length_num">7</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> List</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></li><li><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></li><li><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div></div></div><div id="body-wrap"><div id="sidebar"><i class="fas fa-arrow-right on" id="toggle-sidebar"></i><div class="sidebar-toc"><div class="sidebar-toc__title">Catalog</div><div class="sidebar-toc__progress"><span class="progress-notice">You've read</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#Intel-Cascade-Lake-CPU-suffix"><span class="toc-number">1.</span> <span class="toc-text">Intel Cascade Lake CPU suffix</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#intel-cpu-features"><span class="toc-number">1.1.</span> <span class="toc-text">intel cpu features</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Device-parameters"><span class="toc-number">2.</span> <span class="toc-text">Device parameters</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#MTBF-Mean-Time-Between-Failure"><span class="toc-number">2.1.</span> <span class="toc-text">(MTBF) Mean Time Between Failure</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AFR-Annualized-Failure-Rate"><span class="toc-number">2.2.</span> <span class="toc-text">(AFR) Annualized Failure Rate</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#WRL-Workload-Rate-Limit"><span class="toc-number">2.3.</span> <span class="toc-text">(WRL) Workload Rate Limit</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#PCI-PCI-X-speed"><span class="toc-number">3.</span> <span class="toc-text">PCI&#x2F;PCI-X speed</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#medium-speed"><span class="toc-number">4.</span> <span class="toc-text">medium speed</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#CPU"><span class="toc-number">5.</span> <span class="toc-text">CPU</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Scalable-Xeon"><span class="toc-number">5.1.</span> <span class="toc-text">Scalable Xeon</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Connector"><span class="toc-number">6.</span> <span class="toc-text">Connector</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#SLIMSAS"><span class="toc-number">6.1.</span> <span class="toc-text">SLIMSAS</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#LSI-9500-16e-PCEI-Gen4"><span class="toc-number">6.1.1.</span> <span class="toc-text">LSI 9500-16e, PCEI Gen4</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#MINI-COOL-EDGE-IO-SFF-TA-1016"><span class="toc-number">6.2.</span> <span class="toc-text">MINI COOL EDGE IO (SFF-TA-1016)</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#issues"><span class="toc-number">7.</span> <span class="toc-text">issues</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SSD"><span class="toc-number">8.</span> <span class="toc-text">SSD</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Host-Memory-Buffer-HMB"><span class="toc-number">8.1.</span> <span class="toc-text">Host Memory Buffer (HMB)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#performance"><span class="toc-number">8.2.</span> <span class="toc-text">performance</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#areal-density"><span class="toc-number">9.</span> <span class="toc-text">areal density</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#single-SAS-SSD-compare-with-8x-SAS-SSD-mdadm-raid0-128K"><span class="toc-number">10.</span> <span class="toc-text">single SAS SSD compare with 8x SAS SSD mdadm raid0 128K</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Does-the-SAS-support-the-full-duplex"><span class="toc-number">11.</span> <span class="toc-text">Does the SAS support the full-duplex ?</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#network-filesystem-test"><span class="toc-number">12.</span> <span class="toc-text">network filesystem test</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#CPU-cache-speed"><span class="toc-number">13.</span> <span class="toc-text">CPU cache speed</span></a></li></ol></div></div></div><header class="post-bg" id="page-header" style="background-image: url(https://homerl.github.io/img/network-interface-card-2081371-1751392.png)"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">无常无相无功;不动不破不空</a></span><span id="menus"><div id="search_button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> Search</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> List</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></li><li><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></li><li><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div><span class="close" id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></span></span></nav><div id="post-info"><div id="post-title"><div class="posttitle">spec</div></div><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" datetime="2016-06-16T07:35:11.000Z" title="Created 2016-06-16 15:35:11">2016-06-16</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2022-07-15T01:29:26.445Z" title="Updated 2022-07-15 09:29:26">2022-07-15</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Hardware/">Hardware</a></span></div><div class="meta-secondline"> <span class="post-meta-separator">|</span><span class="post-meta-pv-cv"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">Post View:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout_post" id="content-inner"><article id="post"><div class="post-content" id="article-container"><h3 id="Intel-Cascade-Lake-CPU-suffix"><a href="#Intel-Cascade-Lake-CPU-suffix" class="headerlink" title="Intel Cascade Lake CPU suffix"></a>Intel Cascade Lake CPU suffix</h3><ul>
<li>“F” suffix integrates the Omni-Path Host Fabric Interface (HFI) die on-package</li>
<li>“L” suffix indicates the SKU is a large memory (4.5 TiB) tier SKU</li>
<li>“M” suffix indicates the SKU is a medium memory (2 TiB) tier SKU</li>
<li>“N” suffix indicates the SKU is a specialized for Networking/NFV</li>
<li>“S” suffix indicates the SKU is a search application-specialized model</li>
<li>“T” suffix indicates that SKU has an extended lifetime (10 year use) guarantees and NEBS-friendly packing specification</li>
<li>“U” suffix indicates the SKU is a single-socket model (even if part of the Xeon Gold family that normally supports up two 4-way SMP)</li>
<li>“V” suffix indicates the SKU targets the VM density value market</li>
<li>“Y” suffix indicates the SKU has Speed Select Technology (SST)</li>
<li>“R” suffix indicates the SKU is a refresh model( add cores or frequency)</li>
</ul>
<h4 id="intel-cpu-features"><a href="#intel-cpu-features" class="headerlink" title="intel cpu features"></a><a target="_blank" rel="noopener" href="https://www.all-electronics.de/wp-content/uploads/migrated/document/196371/413ei0507-intel-sma.pdf">intel cpu features</a></h4><ul>
<li>Intel® Wide Dynamic Execution<ul>
<li>Dynamic execution is a combination of techniques (data flow analysis, speculative execution, out of order execution, and super scalar) that Intel first implemented in the P6 microarchitecture used in the Intel® Pentium® Pro processor, Pentium® II processor and Pentium® III processors.</li>
</ul>
</li>
<li>Intel® Advanced Digital Media Boost<ul>
<li>Intel Advanced Digital Media Boost helps achieve similar dramatic gains in throughputs for programs utilizing SSE instructions of 128-bit operands. (SSE instructions enhance Intel architecture by enabling programmers to develop algorithms that can mix packed, single-precision, and double-precision floating point and integers, using SSE instructions.)</li>
</ul>
</li>
<li>Intel® Intelligent Power Capability <ul>
<li>Intel Intelligent Power Capability is a set of capabilities for reducing power consumption and device design requirements. This feature manages the runtime power consumption of all the processor’s execution cores. It includes an advanced power-gating capability that allows for an ultra fine-grained logic control that turns on individual processor logic subsystems only if and when they are needed. Additionally, many buses and arrays are split so that data required in some modes of operation can be put in a low-power state when not needed</li>
</ul>
</li>
<li>Intel® Advanced Smart Cache<ul>
<li>Intel Advanced Smart Cache is a multi-core optimized cache that improves performance and efficiency by increasing the probability that each execution core of a dual-core processor can access data from a higher-performance, more-efficient cache subsystem</li>
</ul>
</li>
<li>Intel® Smart Memory Access<ul>
<li>Intel Smart Memory Access improves system performance by optimizing the use of the available data bandwidth from the memory subsystem and hiding the latency of memory accesses. The goal is to ensure that data can be used as quickly as possible and is located as close as possible to where it’s needed to minimize latency and thus improve efficiency and speed</li>
</ul>
</li>
</ul>
<h3 id="Device-parameters"><a href="#Device-parameters" class="headerlink" title="Device parameters"></a><a target="_blank" rel="noopener" href="https://www.seagate.com/www-content/surveillance-center/files/Understanding-Reliability-Metrics.pdf">Device parameters</a></h3><h4 id="MTBF-Mean-Time-Between-Failure"><a href="#MTBF-Mean-Time-Between-Failure" class="headerlink" title="(MTBF) Mean Time Between Failure"></a>(MTBF) Mean Time Between Failure</h4><p>MTBF, however, can be subject to misinterpretation. For example, an HDD might carry a 1M-hour MTBF, causing some customers to erroneously assume that the drive should be able to run 24 hours a day for a century or more. Obviously, this is theoretical.</p>
<p>MTBF is actually reached by dividing the total time a population of samples is under observation by the number of failures. If you have 1000 drives running for 1000 hours each, and five of them fail (1000×1000/5 ), you’ve then derived a 200K-hour MTBF. Because MTBF is typically calculated during an HDD’s useful life, consider a graph of failure rate over time, starting when a population of HDDs rolls off of the manufacturing line. </p>
<h4 id="AFR-Annualized-Failure-Rate"><a href="#AFR-Annualized-Failure-Rate" class="headerlink" title="(AFR) Annualized Failure Rate"></a>(AFR) Annualized Failure Rate</h4><p>Recently, Seagate began offering AFR specs on some drives in addition to conventional MTBF ratings. Although the two metrics are similar, AFR is a percentage estimate of the products that will likely fail due to a defect over a 1-year period. The subtle distinction lies in a switch from averages to percentages. MTBF is based on probabilities; AFR relies on HDD return numbers and analyses for its estimates. AFRs don’t include HDDs returned without issues, those subjected to excessive shock or HDDs that were mishandled. Seagate expects AFR to help facilitate better service plans and spare unit strategies.<br>Remember: AFR, as with any reliability metric, makes specific assumptions about how many hours an HDD is running per year, endured motor start/stop cycles, and internal temperature, all of which affect reliability. But AFR doesn’t necessarily help you get to the bottom of which HDD is right for your application. Enter the annualized workload rate (WRL).</p>
<h4 id="WRL-Workload-Rate-Limit"><a href="#WRL-Workload-Rate-Limit" class="headerlink" title="(WRL) Workload Rate Limit"></a>(WRL) Workload Rate Limit</h4><p>Seagate specifies a WRL—that is, the maximum read/write workload (also in terabytes per year) a given HDD is designed to accommodate. Enterprise-class drives feature a WRL of 300TB to 550TB/year. Specialty-tuned drives, including NAS, archive, video and surveillance families, are rated for 180TB/year; Seagate’s client portfolio (desktop and laptop HDDs) has a workload rate limit of 55TB/year, which is still a formidable amount of data within the client market segment.</p>
<p>Consider environmental conditions in your reliability projections. An insufficiently-cooled storage device, even operating under its WRL, will experience a higher failure rate than those at or under manufacturer specifications. Similarly, using a desktop HDD in a highly active chassis with significant vibration levels can also take a toll on the performance and reliability of the drive.</p>
<p><a target="_blank" rel="noopener" href="https://www.seagate.com/support/kb/annualized-workload-rate-005902en/">Annualized Workload Rate</a> = (Lifetime Writes + Lifetime Reads) * (8760 / Lifetime Power On Hours)<br>8760 are the number of hours in a year.  The Workload Rate becomes an annualized average expressed as TB/year.</p>
<p>Enterprise                300~550TB/year<br>NAS/archive/surveillance  180TB/year<br>desktop/laptop            55TB/year</p>
<h3 id="PCI-PCI-X-speed"><a href="#PCI-PCI-X-speed" class="headerlink" title="PCI/PCI-X speed"></a>PCI/PCI-X speed</h3><table>
<thead>
<tr>
<th>Bus and frequency</th>
<th>32 bit transfer rate</th>
<th>64 bit Transfer rate</th>
</tr>
</thead>
<tbody><tr>
<td>33-MHz PCI</td>
<td>1064Mb/s</td>
<td>2128Mb/s</td>
</tr>
<tr>
<td>66-MHz PCI</td>
<td>2128Mb/s</td>
<td>4256Mb/s</td>
</tr>
<tr>
<td>100-MHz PCI-X</td>
<td>Not applicable</td>
<td>6400Mb/s</td>
</tr>
<tr>
<td>133-MHz PCI-X</td>
<td>Not applicable</td>
<td>8192Mb/s</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th>PCIE</th>
<th>Encoded</th>
<th>transmit rate</th>
<th>code</th>
</tr>
</thead>
<tbody><tr>
<td>Gen 1 x1</td>
<td>0.25GB/s</td>
<td>2.5GT</td>
<td>8/10b</td>
</tr>
<tr>
<td>Gen 2 x1</td>
<td>0.5GB/s</td>
<td>5GT/s</td>
<td>8/10b</td>
</tr>
<tr>
<td>Gen 3 x1</td>
<td>0.9846GB/s</td>
<td>8GT/s</td>
<td>128/130b</td>
</tr>
<tr>
<td>Gen 4 x1</td>
<td>1.969GB/s</td>
<td>16GT/s</td>
<td>128/130b</td>
</tr>
</tbody></table>
<p>Eg: 16GT/s * 128/130/8 = 1.96923GB/s</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">### [Ethernet cable](https://cshihong.github.io/2020/08/23/%E5%85%89%E7%BA%A4%E5%AD%A6%E4%B9%A0%E6%80%BB%E7%BB%93/)</span></span><br><span class="line">- Active</span><br><span class="line">  - The Active cable makes <span class="keyword">use</span> <span class="keyword">of</span> electronics <span class="keyword">for</span> signal conditioning</span><br><span class="line">- Passive</span><br><span class="line">  - The Passive cable does <span class="keyword">not</span> make <span class="keyword">use</span> <span class="keyword">of</span> electronics <span class="keyword">for</span> signal conditioning</span><br><span class="line">    - Passive twinax cables <span class="keyword">are</span> rated <span class="keyword">for</span> ranges up <span class="keyword">to</span> <span class="number">5</span>m <span class="keyword">and</span> provide a good working solutions <span class="keyword">at</span> a great <span class="keyword">cost</span></span><br><span class="line"></span><br><span class="line">[Arista <span class="number">100</span>G cable](https://www.arista.com/assets/<span class="keyword">data</span>/pdf/Arista100G_TC_QA.pdf)</span><br><span class="line">[Mellanox <span class="number">100</span>G DAC cable](https://www.arista.com/assets/<span class="keyword">data</span>/pdf/Arista100G_TC_QA.pdf)</span><br><span class="line">[Mellanox cable ](https://www.mellanox.com/sites/<span class="keyword">default</span>/files/products/interconnect/pdf/Mellanox_Cable_Management_Guidelines_and_FAQs_Application_Note.pdf)</span><br><span class="line"></span><br><span class="line">- PCC (passive copper cable)</span><br><span class="line">  - A <span class="keyword">high</span>-speed electrical cable <span class="keyword">with</span> an SFP <span class="keyword">or</span> QSFP connector <span class="keyword">in</span> <span class="keyword">each</span> <span class="keyword">end</span>, but <span class="keyword">no</span> active components <span class="keyword">in</span> the RF connections. The term ‘passive’ means that there <span class="keyword">is</span> <span class="keyword">no</span> active processing <span class="keyword">of</span> the electrical signal.</span><br><span class="line">- Direct Attach Copper cable (DAC)</span><br><span class="line">  - direct electrical <span class="keyword">connection</span> <span class="keyword">between</span> cable ends</span><br><span class="line">  - The DACs still have an EEPROM, a <span class="keyword">memory</span> chip <span class="keyword">in</span> <span class="keyword">each</span> <span class="keyword">end</span>, so the host <span class="keyword">system</span> can <span class="keyword">read</span> which <span class="keyword">type</span> <span class="keyword">of</span> cable <span class="keyword">is</span> plugged <span class="keyword">in</span>, <span class="keyword">and</span> how much attenuation it should expect.</span><br><span class="line">- Active Optical cable (AOC)</span><br><span class="line">  - Electrical conversion <span class="keyword">to</span> optics transmitted <span class="keyword">over</span> integrated optical fibers</span><br><span class="line">  - An optical fiber cable iwth an optical transceiver <span class="keyword">with</span> the fibers bonded inside <span class="keyword">and</span> <span class="keyword">not</span> removeable</span><br><span class="line">- Optical Transceivers</span><br><span class="line">  - Electrical conversion <span class="keyword">to</span> optics <span class="keyword">over</span> fibers <span class="keyword">with</span> optical connectors</span><br><span class="line">    - More expensive SR(<span class="keyword">short</span> <span class="keyword">range</span>),SR4(<span class="keyword">Short</span> <span class="keyword">range</span> <span class="number">4</span> channels)  </span><br><span class="line">    - <span class="number">4</span> parallecl multi-<span class="keyword">mode</span> fibers</span><br><span class="line">      - <span class="number">100</span>m <span class="keyword">after</span> which the signal degrades</span><br><span class="line">    - <span class="number">4</span> parallecl single-<span class="keyword">mode</span> fibers</span><br><span class="line">      - <span class="keyword">Parallel</span> single-<span class="keyword">mode</span> transceivers(PSM4) <span class="keyword">are</span> used <span class="keyword">from</span> <span class="number">500</span>m<span class="number">-2</span>km the ost <span class="keyword">of</span> <span class="number">8</span> fibers adds up <span class="keyword">with</span> <span class="keyword">each</span> meter</span><br><span class="line">      - Multiplexing the four channels signals <span class="keyword">into</span> two single fibers <span class="keyword">is</span> more economical <span class="keyword">with</span> CWDM4(Coarse Wavelength division multiplexer <span class="number">4</span> channels) <span class="keyword">for</span> up <span class="number">2</span>KM <span class="keyword">and</span> LR4(<span class="keyword">long</span> <span class="keyword">range</span> <span class="number">4</span> channels) up <span class="keyword">to</span> <span class="number">10</span>km</span><br><span class="line">    - <span class="number">4</span> Channels multiplexed <span class="keyword">over</span> <span class="number">2</span> single-<span class="keyword">mode</span> fibers</span><br><span class="line"></span><br><span class="line">- Connector Types</span><br><span class="line">  - SFP (Small Formfactor <span class="keyword">Pluggable</span>)</span><br><span class="line">    - A transceiver <span class="keyword">or</span> cable <span class="keyword">with</span> a single lane(channel) <span class="keyword">in</span> <span class="keyword">each</span> direction</span><br><span class="line">  - SFP+ denotes the <span class="number">10</span>~<span class="number">14</span>Gb/s <span class="keyword">type</span> <span class="keyword">of</span> AOC/transceivers</span><br><span class="line">  - QSFP(Quad small Formfactor <span class="keyword">Pluggable</span>)</span><br><span class="line">    - A bidirectional transceiver <span class="keyword">or</span> cable <span class="keyword">with</span> <span class="number">4</span> lanes <span class="keyword">in</span> <span class="keyword">each</span> direction</span><br><span class="line">  - QSFP+ denotes cables/transceivers <span class="keyword">for</span> <span class="number">4</span>x (<span class="number">10</span>~<span class="number">14</span>)Gbps applications, <span class="keyword">while</span> QSFP28 denotes the <span class="number">4</span> x(<span class="number">24</span>~<span class="number">28</span>)=<span class="number">100</span>Gbps product <span class="keyword">range</span> <span class="keyword">with</span> QSFP <span class="keyword">form</span> factor</span><br><span class="line">  - QSFP-DD(<span class="keyword">double</span>-density) support up <span class="keyword">to</span> <span class="number">400</span>Gbps <span class="keyword">in</span> <span class="keyword">aggregate</span> <span class="keyword">over</span> an <span class="number">8</span>x <span class="number">50</span>Gbps electrical interface.</span><br><span class="line">  - Transceiver (transmitter <span class="keyword">and</span> receiver) <span class="keyword">is</span> a converter <span class="keyword">with</span> an electrical connector <span class="keyword">in</span> one <span class="keyword">end</span> <span class="keyword">and</span> optical connector <span class="keyword">in</span> the other <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">- Optical Transmission <span class="keyword">and</span> Fiber Types</span><br><span class="line">  - MMF(multi-<span class="keyword">mode</span> fiber)</span><br><span class="line">    - The <span class="keyword">type</span> <span class="keyword">of</span> fiber used <span class="keyword">for</span> VCSEL (Vertical Cavity Surface</span><br><span class="line">Emitting Laser) based transmission, normally operating <span class="keyword">at</span> <span class="number">850</span> nm wavelength. Its maximum reach <span class="keyword">is</span> <span class="number">100</span> m <span class="keyword">for</span> <span class="number">25</span> Gb/s line rates.</span><br><span class="line">  - OM2/<span class="number">3</span>/<span class="number">4</span>(optical multi-<span class="keyword">mode</span>) <span class="keyword">are</span> classiffications <span class="keyword">of</span> MMF <span class="keyword">for</span> different reach.</span><br><span class="line">     - higher <span class="built_in">number</span> indicates <span class="keyword">lower</span> degradation <span class="keyword">of</span> the optical signal, <span class="keyword">and</span> longer reach. MMF cables usually have the <span class="keyword">following</span> color scheme</span><br><span class="line">     - OM2 orange used <span class="keyword">for</span> <span class="keyword">data</span> rates <span class="keyword">at</span> <span class="number">1</span>~<span class="number">14</span> Gbps, <span class="number">62.5</span> μm fiber core diameter</span><br><span class="line">     - OM3 aqua <span class="keyword">or</span> teal <span class="number">70</span>m reach <span class="keyword">for</span> <span class="number">25</span>/<span class="number">100</span>Gbps transceivers, <span class="number">50</span> μm fiber core diameter</span><br><span class="line">     - OM4 aqua <span class="keyword">or</span> purple <span class="number">100</span>m reach <span class="keyword">for</span> <span class="number">25</span>/<span class="number">100</span>Gbps transceivers, <span class="number">50</span>-um core diameter</span><br><span class="line">     - OM5 aqua green <span class="keyword">not</span> commonly used</span><br><span class="line"></span><br><span class="line">- Optical connector <span class="keyword">type</span></span><br><span class="line">  - MPO (Multi-fiber plush <span class="keyword">on</span>) </span><br><span class="line">     - <span class="keyword">is</span> a connector standard supporting multiple <span class="keyword">rows</span> <span class="keyword">with</span> up <span class="keyword">to</span> <span class="number">12</span></span><br><span class="line">fibers <span class="keyword">in</span> each. A QSFP transceiver <span class="keyword">with</span> MPO receptacle uses the outermost <span class="number">4</span> positions <span class="keyword">on</span> <span class="keyword">each</span> side</span><br><span class="line">  - MTP </span><br><span class="line">     - <span class="keyword">are</span> a vendor specific proprietary <span class="keyword">high</span>-<span class="keyword">precision</span> <span class="keyword">version</span> <span class="keyword">of</span> MPO connectors</span><br><span class="line">  - LC</span><br><span class="line">     - <span class="keyword">are</span> used <span class="keyword">for</span> <span class="keyword">both</span> single-<span class="keyword">mode</span> <span class="keyword">and</span> multi-<span class="keyword">mode</span> fibers <span class="keyword">and</span> used <span class="keyword">in</span> <span class="keyword">both</span> SFP <span class="keyword">and</span> QSFP MSA transceivers</span><br><span class="line"></span><br><span class="line">- diff <span class="number">100</span>GbE IB <span class="keyword">and</span> Ethernet cable</span><br><span class="line">  - CDR (clock <span class="keyword">and</span> <span class="keyword">data</span> retimeing) <span class="keyword">default</span> <span class="keyword">status</span></span><br><span class="line">  - IB EDR CDR <span class="keyword">is</span> bypsswd/disabled this ensures backward <span class="keyword">compatibility</span> <span class="keyword">to</span> FDR devices</span><br><span class="line">  - EThernet <span class="number">100</span>G: The CDR <span class="keyword">is</span> <span class="keyword">default</span> <span class="keyword">on</span>, <span class="keyword">and</span> must be disabled <span class="keyword">at</span> <span class="keyword">lower</span> <span class="keyword">data</span> rates, eg: <span class="number">40</span>Gbps</span><br><span class="line">  - Copper cables</span><br><span class="line">     - IB EDR: The <span class="keyword">link</span> budget usually assumes that the signal attenuation <span class="keyword">is</span> small enough <span class="keyword">to</span> <span class="keyword">allow</span> operation <span class="keyword">without</span> Forward <span class="keyword">Error</span> Correction (FEC).</span><br><span class="line">     - Ethernet <span class="number">100</span>G: RS-FEC enabled <span class="keyword">by</span> <span class="keyword">default</span></span><br><span class="line">  - Identifier</span><br><span class="line">      - IB EDR <span class="keyword">and</span> QSFP+ backward <span class="keyword">compatibility</span> <span class="keyword">to</span> FDR devices</span><br><span class="line">      - Ethernet <span class="number">100</span>G: QSFP28</span><br><span class="line">        - The EEPROM <span class="keyword">memory</span> <span class="keyword">map</span> <span class="keyword">of</span> QSFP28 (<span class="number">100</span> Gb/s cables/transceivers) <span class="keyword">is</span> defined <span class="keyword">in</span> specification SFF<span class="number">-8636</span> <span class="keyword">and</span> <span class="keyword">for</span> SFP28 (<span class="number">25</span> Gb/s cables/transceivers) <span class="keyword">in</span> SFF<span class="number">-8472</span></span><br><span class="line">  - <span class="built_in">Bit</span> <span class="keyword">error</span> ratios</span><br><span class="line">     - IEEE defines the BER <span class="keyword">of</span> <span class="number">1E-5</span> <span class="keyword">for</span> Ethernet that <span class="keyword">is</span> corrected <span class="keyword">with</span> FEC <span class="keyword">in</span> the host <span class="keyword">to</span> <span class="number">1E-12</span></span><br><span class="line">     - InfiniBand assumes <span class="keyword">no</span> <span class="keyword">use</span> <span class="keyword">of</span> FEC <span class="keyword">in</span> the host <span class="keyword">and</span> requires <span class="number">1E-15</span> BER.</span><br><span class="line"></span><br><span class="line">The Ethernet standards <span class="keyword">define</span> FEC (Forward <span class="keyword">Error</span> Correction) <span class="keyword">on</span> <span class="keyword">by</span> <span class="keyword">default</span> <span class="keyword">for</span> AOCs <span class="keyword">and</span> optical transceivers. This implies that the <span class="built_in">Bit</span> <span class="keyword">Error</span> Rate (BER = <span class="built_in">bit</span> <span class="keyword">errors</span>/bits transmitted) maximum <span class="keyword">is</span> <span class="number">1E-12</span> <span class="keyword">after</span> FEC (pre-FEC <span class="keyword">of</span> maximum <span class="number">1E-5</span>). <span class="keyword">All</span> LinkX products <span class="keyword">are</span> tested <span class="keyword">in</span> Mellanox <span class="keyword">end</span>-<span class="keyword">to</span>-<span class="keyword">end</span> systems <span class="keyword">for</span> pre-FEC BER <span class="keyword">of</span> <span class="number">1E-15</span> <span class="keyword">as</span> part <span class="keyword">of</span> our product qualification, more specifically the <span class="keyword">System</span> <span class="keyword">Level</span> <span class="keyword">Performance</span> Quality Assurance (SLPQA) test.  </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">|<span class="keyword">Type</span>                                              | meters        | Standard</span><br><span class="line">|<span class="comment">--------------------------------------------------|---------------|---------------------------------------------</span></span><br><span class="line">| QSFP <span class="number">100</span>GbE Transceivers (OM3 <span class="number">70</span>m/<span class="number">4</span> <span class="number">100</span>m)        | <span class="number">70</span>~<span class="number">100</span>        | <span class="number">100</span>(<span class="number">100</span>GBASE-SR10),<span class="number">70</span>(<span class="number">100</span>GBASE-SR4, SR=<span class="keyword">short</span> reach)</span><br><span class="line">|                                                  |  <span class="number">10</span>k          |  <span class="number">100</span>GBASE-LR4, LR=<span class="keyword">long</span> reach</span><br><span class="line">|                                                  |  <span class="number">80</span>k          |  <span class="number">100</span>GBASE-ZR, it <span class="keyword">is</span> <span class="keyword">not</span> an IEEE standard</span><br><span class="line">| QSFP <span class="number">100</span>GbE Transceivers                         |<span class="number">500</span>,<span class="number">2</span>k,<span class="number">10</span>k,<span class="number">40</span>k | <span class="number">10</span>k(<span class="number">100</span>GBASE-LR4),<span class="number">40</span>k(<span class="number">100</span>GBASE-ER4, ER=<span class="keyword">Extended</span> reach)</span><br><span class="line">| <span class="number">100</span>GbE QSFP <span class="keyword">to</span> QSFP Active Optical cable         |       <span class="number">3</span>~<span class="number">30</span>    | Based <span class="keyword">on</span> IEEE <span class="number">100</span>GBASE-SR4</span><br><span class="line">| QSFP+ <span class="keyword">to</span> QSFP+ passive Twinax Copper Cables      |      <span class="number">0.5</span>~<span class="number">5</span>    | <span class="number">100</span>GBASE-ER4(The <span class="number">802.3</span>bj covers the electrical)</span><br><span class="line">| <span class="number">100</span>GbE QSFP28 Direct Attach Copper Cable         |      <span class="number">3</span>~<span class="number">7</span>      | <span class="number">5</span>m(IEEE <span class="number">802.3</span>bj CA<span class="number">-25</span>G-L),<span class="number">2</span>m(IEEE <span class="number">802.3</span>bj CA<span class="number">-25</span>G-N, <span class="number">100</span>BASE-CR4)</span><br><span class="line"></span><br><span class="line">AOC <span class="keyword">not</span> support DDM(Digital Diagnostic <span class="keyword">Monitoring</span>)/DOM(Digital optical <span class="keyword">monitoring</span>)</span><br><span class="line">RGD means rugged transceivers, <span class="keyword">and</span> can operate <span class="keyword">under</span> more extreme conditions</span><br><span class="line"></span><br><span class="line"><span class="keyword">Physical</span> Media Devices (PMDs)</span><br><span class="line"><span class="string">``</span><span class="string">`bash</span></span><br><span class="line"><span class="string">                            nTYPE-LLLm</span></span><br><span class="line"><span class="string">                            | |   ||||</span></span><br><span class="line"><span class="string">10 10Mb/s-------------------- |   ||||</span></span><br><span class="line"><span class="string">2.5G 2.5Gb/s                  |   |||-----------Trailing number</span></span><br><span class="line"><span class="string">10G  10Gb/s                   |   |||            1,4,8,10,16 pairs or lanes</span></span><br><span class="line"><span class="string">24/40/100/400 Gbps            |   ||------------Third letter</span></span><br><span class="line"><span class="string">                              |   ||            M multimode</span></span><br><span class="line"><span class="string">                              |   ||</span></span><br><span class="line"><span class="string">                              |   ||</span></span><br><span class="line"><span class="string">Modulation TYPE----------------   ||</span></span><br><span class="line"><span class="string">BASE    Baseband                  ||</span></span><br><span class="line"><span class="string">BROAD   Broadband                 |-----------------Second letter</span></span><br><span class="line"><span class="string">PASS    Passband                  |                 P PAM4</span></span><br><span class="line"><span class="string">                                  First letter      R Scrambled</span></span><br><span class="line"><span class="string">                                  B Bidirectional   W WAN coding</span></span><br><span class="line"><span class="string">                                  C Twin-ax copper  X External coding</span></span><br><span class="line"><span class="string">                                  E Extra long or 40km</span></span><br><span class="line"><span class="string">                                  F fiber or 2km</span></span><br><span class="line"><span class="string">                                  K Backplane</span></span><br><span class="line"><span class="string">                                  L long or 10km</span></span><br><span class="line"><span class="string">                                  P PON</span></span><br><span class="line"><span class="string">                                  S Short or 100</span></span><br><span class="line"><span class="string">                                  T twisted pair</span></span><br></pre></td></tr></table></figure>

<h3 id="medium-speed"><a href="#medium-speed" class="headerlink" title="medium speed"></a><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/4087280/approximate-cost-to-access-various-caches-and-main-memory">medium speed</a></h3><p><a href="/img/cpu_speed_a7jWu.png"></a><br>L1 cache (instruction cache and data cache) hit : <del>4 clock cycle<br>L2 cache hit: ~10 clock cycle<br>L3 cache hit, line unshare: ~40 clock cycle<br>L3 cache hit, share line in another core: ~65 clock cycle<br>L3 cache hit, modified in another core ~75 cycles remote<br>L3 cache ~100-300 cycles<br>Local DRAM ~30 ns (</del>120 cycles)<br>Remote DRAM ~100 ns</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">           0.5 ns - CPU L1 dCACHE reference</span><br><span class="line">           1   ns - speed-of-light (a photon) travel a 1 ft (30.5cm) distance</span><br><span class="line">           5   ns - CPU L1 iCACHE Branch mispredict</span><br><span class="line">           7   ns - CPU L2  CACHE reference</span><br><span class="line">          71   ns - CPU cross-QPI/NUMA best  <span class="keyword">case</span> on XEON E5-46*</span><br><span class="line">         100   ns - MUTEX lock/unlock</span><br><span class="line">         100   ns - own DDR MEMORY reference</span><br><span class="line">         135   ns - CPU cross-QPI/NUMA best  <span class="keyword">case</span> on XEON E7-*</span><br><span class="line">         202   ns - CPU cross-QPI/NUMA worst <span class="keyword">case</span> on XEON E7-*</span><br><span class="line">         325   ns - CPU cross-QPI/NUMA worst <span class="keyword">case</span> on XEON E5-46*</span><br><span class="line">      10,000   ns - Compress 1K bytes with Zippy PROCESS</span><br><span class="line">      20,000   ns - Send 2K bytes over 1 Gbps NETWORK</span><br><span class="line">     250,000   ns - Read 1 MB sequentially from MEMORY</span><br><span class="line">     500,000   ns - Round trip within a same DataCenter</span><br><span class="line">  10,000,000   ns - DISK seek</span><br><span class="line">  10,000,000   ns - Read 1 MB sequentially from NETWORK</span><br><span class="line">  30,000,000   ns - Read 1 MB sequentially from DISK</span><br><span class="line"> 150,000,000   ns - Send a NETWORK packet CA -&gt; Netherlands</span><br><span class="line">|   |   |   |</span><br><span class="line">|   |   | ns|</span><br><span class="line">|   | us|</span><br><span class="line">| ms|</span><br></pre></td></tr></table></figure>

<p>The “Cache line” is the basic unit, 32B,64B,128B, intel L1 32K, 8-ways, cache line 64B, 32768/64=512 x cache line<br>The intel Cascade Lake L1 was 32K private to each core, 8-ways(8x cache line make a group, 64x8=512B, 32768/512=64)<br>32768/64=512 x Cache lines, 512/8=64 Cache lines,  first find the group, and then index to the client( Set Associativity )<br>In each way, it ‘s 64 cache lines, each cache line has 64 Bytes ,64 x 64 =4096 Bytes<br><a target="_blank" rel="noopener" href="https://coolshell.cn/articles/20793.html">For more infor</a></p>
<p>AMD Roma 7552 L1 instruct 32K 8-way, L1 32K 8-way, L2 512K 8-way, L3-per-socket 192M 16-way</p>
<h3 id="CPU"><a href="#CPU" class="headerlink" title="CPU"></a>CPU</h3><h4 id="Scalable-Xeon"><a href="#Scalable-Xeon" class="headerlink" title="Scalable Xeon"></a>Scalable Xeon</h4><table>
<thead>
<tr>
<th>SKU</th>
<th>Cores</th>
<th>Base (GHz)</th>
<th>Single Core Turbo (GHz)</th>
<th>All Core Turbo (GHz)</th>
<th>Cache (MB)</th>
<th>TDP (Watts)</th>
<th>Support for Intel Optane Persistent Memory 200 Series</th>
<th>Intel SGX Enclave Capacity (Per Processor)</th>
<th>Recommended Customer Pricing (RCP) in $ US Dollars</th>
</tr>
</thead>
<tbody><tr>
<td>6342</td>
<td>24</td>
<td>2.8</td>
<td>3.5</td>
<td>3.3</td>
<td>36</td>
<td>230</td>
<td>Yes</td>
<td>64 GB</td>
<td>$2529</td>
</tr>
<tr>
<td>6336Y</td>
<td>24</td>
<td>2.4</td>
<td>3.6</td>
<td>3.0</td>
<td>36</td>
<td>185</td>
<td>Yes</td>
<td>64 GB</td>
<td>$1977</td>
</tr>
<tr>
<td>6330</td>
<td>28</td>
<td>2.0</td>
<td>3.1</td>
<td>2.6</td>
<td>42</td>
<td>205</td>
<td>Yes</td>
<td>64 GB</td>
<td>$1894</td>
</tr>
<tr>
<td>5320</td>
<td>26</td>
<td>2.2</td>
<td>3.4</td>
<td>2.8</td>
<td>39</td>
<td>185</td>
<td>Yes</td>
<td>64 GB</td>
<td>$1555</td>
</tr>
<tr>
<td>5318Y</td>
<td>24</td>
<td>2.1</td>
<td>3.4</td>
<td>2.6</td>
<td>36</td>
<td>165</td>
<td>Yes</td>
<td>64 GB</td>
<td>$1273</td>
</tr>
<tr>
<td>4316</td>
<td>20</td>
<td>2.3</td>
<td>3.4</td>
<td>2.8</td>
<td>30</td>
<td>150</td>
<td></td>
<td>8 GB</td>
<td>$1002</td>
</tr>
<tr>
<td>4314</td>
<td>16</td>
<td>2.4</td>
<td>3.4</td>
<td>2.9</td>
<td>24</td>
<td>135</td>
<td>Yes</td>
<td>8 GB</td>
<td>$694</td>
</tr>
<tr>
<td>4310</td>
<td>12</td>
<td>2.1</td>
<td>3.3</td>
<td>2.7</td>
<td>18</td>
<td>120</td>
<td></td>
<td>8 GB</td>
<td>$501</td>
</tr>
<tr>
<td>4309Y</td>
<td>8</td>
<td>2.8</td>
<td>3.6</td>
<td>3.4</td>
<td>12</td>
<td>105</td>
<td></td>
<td>8 GB</td>
<td>$501</td>
</tr>
<tr>
<td>6312U</td>
<td>24</td>
<td>2.4</td>
<td>3.6</td>
<td>3.1</td>
<td>36</td>
<td>185</td>
<td>Yes</td>
<td>64 GB</td>
<td>$1450</td>
</tr>
<tr>
<td>6328H</td>
<td>16</td>
<td>2.8</td>
<td>4.3</td>
<td>3.7</td>
<td>22</td>
<td>165</td>
<td>Yes</td>
<td>$1776</td>
<td></td>
</tr>
<tr>
<td>5320H</td>
<td>20</td>
<td>2.4</td>
<td>4.2</td>
<td>3.3</td>
<td>27.5</td>
<td>150</td>
<td>Yes</td>
<td>$1555</td>
<td></td>
</tr>
<tr>
<td>5318H</td>
<td>18</td>
<td>2.5</td>
<td>3.8</td>
<td>3.3</td>
<td>24.75</td>
<td>150</td>
<td>Yes</td>
<td>$1273</td>
<td></td>
</tr>
</tbody></table>
<h3 id="Connector"><a href="#Connector" class="headerlink" title="Connector"></a>Connector</h3><h4 id="SLIMSAS"><a href="#SLIMSAS" class="headerlink" title="SLIMSAS"></a>SLIMSAS</h4><p>For PCIE Gen4  </p>
<h5 id="LSI-9500-16e-PCEI-Gen4"><a href="#LSI-9500-16e-PCEI-Gen4" class="headerlink" title="LSI 9500-16e, PCEI Gen4"></a>LSI 9500-16e, PCEI Gen4</h5><ul>
<li>2 x SAS3 x4 cable, 86 x HDDs, 4x SSDs, no enable WCE, supermicro 847 1x expander, direct<ul>
<li>read 8.3 GiB/s </li>
<li>write 7.8 GiB/s</li>
<li>read 4.06GiB/s, write 4.06 GiB/s</li>
</ul>
</li>
<li>When the LSI 16e connect 4x SAS3 x4 cables, the boot will hang….this server could not go to HBA setting in the BIOS</li>
<li>2 x Server node, Total 2x 9500-8e<ul>
<li>read 14.4 GiB/s</li>
<li>write 15.3 GiB/s</li>
<li>read 2.75 GiB/s , write 13.2 GiB/s, fio show the higher read BW</li>
</ul>
</li>
</ul>
<h4 id="MINI-COOL-EDGE-IO-SFF-TA-1016"><a href="#MINI-COOL-EDGE-IO-SFF-TA-1016" class="headerlink" title="MINI COOL EDGE IO (SFF-TA-1016)"></a>MINI COOL EDGE IO (SFF-TA-1016)</h4><p>For PCIE Gen5   </p>
<h3 id="issues"><a href="#issues" class="headerlink" title="issues"></a>issues</h3><p><a target="_blank" rel="noopener" href="https://www.dell.com/support/kbdoc/zh-cn/000132949/powerstore-samsung-pm1643-or-pm1643a-drives-locked-after-power-cycle">Samsung PM1643 or PM1643A drives locked after power cycle</a><br> Samsung SAS drives PM1643 running EXF7 or EXV7 (high capacity models), or PM1643A running EXA1 or older firmware revisions may be locked after power cycle.    </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pre-processing failed device:/dev/sdx exception: Compacket length is zero</span><br><span class="line">processing completed device:/dev/sdx sn:xxxxx success:0</span><br></pre></td></tr></table></figure>

<h3 id="SSD"><a href="#SSD" class="headerlink" title="SSD"></a>SSD</h3><h4 id="Host-Memory-Buffer-HMB"><a href="#Host-Memory-Buffer-HMB" class="headerlink" title="Host Memory Buffer (HMB)"></a>Host Memory Buffer (HMB)</h4><ul>
<li><a target="_blank" rel="noopener" href="https://www.virtium.com/knowledge-base/how-to-select-between-dram-vs-dram-less-ssds/">HMB vs DRAM-less</a><ul>
<li>DRAM-less has the lower BW and OPS<ul>
<li>HMB has the more stable throughput for a long time</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="performance"><a href="#performance" class="headerlink" title="performance"></a><a target="_blank" rel="noopener" href="https://business.kioxia.com/content/dam/kioxia/ncsa/en-us/microsites/hpe/asset/KIOXIA_Comparing_SSD_Interfaces_in_Servers_Best_Practices.pdf">performance</a></h4><table>
<thead>
<tr>
<th>r/w op</th>
<th>SATA3 interface</th>
<th>SATA3 SSD</th>
</tr>
</thead>
<tbody><tr>
<td>seq read</td>
<td>600MB/s</td>
<td>550MB/s</td>
</tr>
<tr>
<td>seq write</td>
<td>600MB/s</td>
<td>550MB/s</td>
</tr>
<tr>
<td>random read(iops)</td>
<td>146000</td>
<td>85000</td>
</tr>
<tr>
<td>random write(iops)</td>
<td>146000</td>
<td>35000</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th>r/w op</th>
<th>SAS3 interface</th>
<th>SAS3 SSD (dual port)</th>
</tr>
</thead>
<tbody><tr>
<td>seq read</td>
<td>1200MB/s</td>
<td>1100MB/s</td>
</tr>
<tr>
<td>seq write</td>
<td>1200MB/s</td>
<td>1100MB/s</td>
</tr>
<tr>
<td>random read(iops)</td>
<td>293000</td>
<td>190000</td>
</tr>
<tr>
<td>random write(iops)</td>
<td>293000</td>
<td>50000</td>
</tr>
</tbody></table>
<p><code>PCIE G3x4 will work x2 in HA dual port mode</code><br>| r/w op              |  PCIE G3 x4 interface  | PCIE G3 x4 SSD Enterprise  | PCIE G3 x4 Data center | PCIE G3 x2 work in dual port<br>|———————|————————|—————————-|————————|——————————–<br>|seq read             |   4000MB/s             | 3200MB/s                   | 3000MB/s               |   1600 ~ 1500MB/s<br>|seq write            |   4000MB/s             | 2600MB/s                   | 1800MB/s               |   1300 ~ 900MB/s<br>|random read(iops)    |   976000               | 700000                     | 500000                 |   350000 ~ 250000<br>|random write(iops)   |   976000               | 100000                     | 35000                  |   50000 ~ 17500</p>
<p>U.2 PCIE-G3x4 SSD maybe slower than SAS3 SSD work in the dual port mode.     </p>
<h3 id="areal-density"><a href="#areal-density" class="headerlink" title="areal density"></a><a target="_blank" rel="noopener" href="https://blocksandfiles.com/2021/01/04/incremental-storage-media-density-magic-meant-flash-chipped-away-at-disk-in-2020/">areal density</a></h3><p>LTO-9 tape has 12 Gb/in2 areal density. An 18TB disk drive has 1022 Gb/in2. That means LTO-9 tape can achieve the same 18TB capacity with only 1/85th of the areal density than that of an 18TB disk. No wonder tape’s area density has such a large development head room.    </p>
<p>Many ssd areal density is the xx Gb/mm2 , search “Gb/inch2 to Gb/mm2” in google.<br>1 Gigabit/square inch = 0.00155 Gigabit/square millimeter<br>20TB HDD (1200 Gb/in2 = 1.86 Gb/mm2), <a target="_blank" rel="noopener" href="https://www.anandtech.com/show/16491/flash-memory-at-isscc-2021">In 2021, 3d TLC top Density = 8.5 Gb/mm2 , 3d QLC top density = 13.8 Gb/mm2</a>   </p>
<h3 id="single-SAS-SSD-compare-with-8x-SAS-SSD-mdadm-raid0-128K"><a href="#single-SAS-SSD-compare-with-8x-SAS-SSD-mdadm-raid0-128K" class="headerlink" title="single SAS SSD compare with 8x SAS SSD mdadm raid0 128K"></a>single SAS SSD compare with 8x SAS SSD mdadm raid0 128K</h3><p>377,377   1800,1800 about 4.77X performance  </p>
<p>8x SAS SSD randread about lustre filesystem 4KiB ops is 221800, 1M stripe size, md raid0 chuncksize=128K, 5x lustre client(no rdma)<br>Change the lustre stirpe size to 64K, the 4KiB ops is  225400, 64K stripe size, there is little help<br>30x 4T RAID10 (3x mirros) openzfs, disable cache, looks like the HDD cache worked ,the average reach 11257/30=375.233    </p>
<p><code>$ fio -name=$(hostname) -directory=/testfs/0 -direct=1 -rw=randread -ioengine=sync -bs=4K -size=256M -numjobs=64 -runtime=1800 -time_based -group_reporting</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br></pre></td><td class="code"><pre><span class="line">[global]</span><br><span class="line">rw=randrw:1</span><br><span class="line">ioengine=libaio</span><br><span class="line">norandommap=1</span><br><span class="line">iodepth=16</span><br><span class="line">size=4G</span><br><span class="line">numjobs=64</span><br><span class="line">group_reporting</span><br><span class="line">refill_buffers</span><br><span class="line">exitall</span><br><span class="line">time_based</span><br><span class="line">runtime=3600</span><br><span class="line">bssplit=4K/100</span><br><span class="line">direct=1</span><br><span class="line">[rw]</span><br><span class="line">directory=/mnt1</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">rw: (groupid=0, <span class="built_in">jobs</span>=64): err= 0: pid=58374: Mon Apr 11 12:34:58 2022</span><br><span class="line">   <span class="built_in">read</span>: IOPS=96.8k, BW=378MiB/s (396MB/s)(1119GiB/3030208msec)</span><br><span class="line">    slat (usec): min=2, max=64082, avg=305.15, stdev=1646.24</span><br><span class="line">    clat (nsec): min=486, max=64746k, avg=1396792.71, stdev=3100002.37</span><br><span class="line">     lat (usec): min=49, max=64864, avg=1702.04, stdev=3415.21</span><br><span class="line">    clat percentiles (usec):</span><br><span class="line">     |  1.00th=[  117],  5.00th=[  141], 10.00th=[  155], 20.00th=[  180],</span><br><span class="line">     | 30.00th=[  200], 40.00th=[  219], 50.00th=[  239], 60.00th=[  265],</span><br><span class="line">     | 70.00th=[  293], 80.00th=[  351], 90.00th=[ 9372], 95.00th=[ 9765],</span><br><span class="line">     | 99.00th=[10159], 99.50th=[10290], 99.90th=[10552], 99.95th=[10683],</span><br><span class="line">     | 99.99th=[14091]</span><br><span class="line">   bw (  KiB/s): min=    8, max= 9293, per=1.56%, avg=6047.98, stdev=212.61, samples=387787</span><br><span class="line">   iops        : min=    2, max= 2323, avg=1511.97, stdev=53.14, samples=387787</span><br><span class="line">  write: IOPS=96.8k, BW=378MiB/s (396MB/s)(1119GiB/3030208msec)</span><br><span class="line">    slat (usec): min=2, max=54088, avg=305.10, stdev=1644.73</span><br><span class="line">    clat (usec): min=25, max=64746, avg=8571.62, stdev=3671.94</span><br><span class="line">     lat (usec): min=30, max=64761, avg=8876.82, stdev=3643.07</span><br><span class="line">    clat percentiles (usec):</span><br><span class="line">     |  1.00th=[ 1074],  5.00th=[ 1139], 10.00th=[ 1188], 20.00th=[ 9110],</span><br><span class="line">     | 30.00th=[ 9896], 40.00th=[10028], 50.00th=[10290], 60.00th=[10421],</span><br><span class="line">     | 70.00th=[10552], 80.00th=[10683], 90.00th=[10814], 95.00th=[10945],</span><br><span class="line">     | 99.00th=[11207], 99.50th=[11338], 99.90th=[16450], 99.95th=[19268],</span><br><span class="line">     | 99.99th=[20841]</span><br><span class="line">   bw (  KiB/s): min=   64, max= 9341, per=1.56%, avg=6047.85, stdev=183.70, samples=387786</span><br><span class="line">   iops        : min=   16, max= 2335, avg=1511.94, stdev=45.91, samples=387786</span><br><span class="line">  lat (nsec)   : 500=0.01%, 750=0.01%, 1000=0.01%</span><br><span class="line">  lat (usec)   : 2=0.01%, 10=0.01%, 20=0.01%, 50=0.01%, 100=0.04%</span><br><span class="line">  lat (usec)   : 250=27.45%, 500=15.83%, 750=0.55%, 1000=0.13%</span><br><span class="line">  lat (msec)   : 2=9.60%, 4=0.03%, 10=13.77%, 20=32.59%, 50=0.01%</span><br><span class="line">  lat (msec)   : 100=0.01%</span><br><span class="line">  cpu          : usr=0.62%, sys=3.81%, ctx=232643882, majf=0, minf=2409</span><br><span class="line">  IO depths    : 1=0.1%, 2=0.1%, 4=0.1%, 8=0.1%, 16=100.0%, 32=0.0%, &gt;=64=0.0%</span><br><span class="line">     submit    : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.0%, &gt;=64=0.0%</span><br><span class="line">     complete  : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.1%, 32=0.0%, 64=0.0%, &gt;=64=0.0%</span><br><span class="line">     issued rwts: total=293218508,293212464,0,0 short=0,0,0,0 dropped=0,0,0,0</span><br><span class="line">     latency   : target=0, window=0, percentile=100.00%, depth=16</span><br><span class="line"></span><br><span class="line">Run status group 0 (all <span class="built_in">jobs</span>):</span><br><span class="line">   READ: bw=378MiB/s (396MB/s), 378MiB/s-378MiB/s (396MB/s-396MB/s), io=1119GiB (1201GB), run=3030208-3030208msec</span><br><span class="line">  WRITE: bw=378MiB/s (396MB/s), 378MiB/s-378MiB/s (396MB/s-396MB/s), io=1119GiB (1201GB), run=3030208-3030208msec</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">^Cbs: 64 (f=64): [m(64)][83.2%][r=1802MiB/s,w=1807MiB/s][r=461k,w=463k IOPS][eta 10m:04s]</span><br><span class="line">fio: terminating on signal 2</span><br><span class="line"></span><br><span class="line">rw: (groupid=0, <span class="built_in">jobs</span>=64): err= 0: pid=12185: Mon Apr 11 12:36:23 2022</span><br><span class="line">   <span class="built_in">read</span>: IOPS=462k, BW=1806MiB/s (1893MB/s)(5283GiB/2996095msec)</span><br><span class="line">    slat (usec): min=3, max=61018, avg=56.67, stdev=907.98</span><br><span class="line">    clat (usec): min=4, max=61497, avg=1188.61, stdev=4085.20</span><br><span class="line">     lat (usec): min=50, max=61511, avg=1245.81, stdev=4177.65</span><br><span class="line">    clat percentiles (usec):</span><br><span class="line">     |  1.00th=[  182],  5.00th=[  212], 10.00th=[  233], 20.00th=[  255],</span><br><span class="line">     | 30.00th=[  269], 40.00th=[  277], 50.00th=[  289], 60.00th=[  297],</span><br><span class="line">     | 70.00th=[  310], 80.00th=[  330], 90.00th=[  660], 95.00th=[ 1532],</span><br><span class="line">     | 99.00th=[21365], 99.50th=[22152], 99.90th=[27395], 99.95th=[28443],</span><br><span class="line">     | 99.99th=[33424]</span><br><span class="line">   bw (  KiB/s): min= 8352, max=77493, per=1.56%, avg=28886.04, stdev=5536.81, samples=383488</span><br><span class="line">   iops        : min= 2088, max=19373, avg=7221.49, stdev=1384.20, samples=383488</span><br><span class="line">  write: IOPS=462k, BW=1806MiB/s (1893MB/s)(5283GiB/2996095msec)</span><br><span class="line">    slat (usec): min=3, max=57919, avg=60.80, stdev=940.02</span><br><span class="line">    clat (usec): min=4, max=61199, avg=896.65, stdev=3558.66</span><br><span class="line">     lat (usec): min=32, max=61233, avg=958.00, stdev=3675.09</span><br><span class="line">    clat percentiles (usec):</span><br><span class="line">     |  1.00th=[  121],  5.00th=[  149], 10.00th=[  167], 20.00th=[  190],</span><br><span class="line">     | 30.00th=[  202], 40.00th=[  212], 50.00th=[  221], 60.00th=[  229],</span><br><span class="line">     | 70.00th=[  239], 80.00th=[  251], 90.00th=[  383], 95.00th=[  947],</span><br><span class="line">     | 99.00th=[21365], 99.50th=[21365], 99.90th=[27132], 99.95th=[28181],</span><br><span class="line">     | 99.99th=[32375]</span><br><span class="line">   bw (  KiB/s): min= 8504, max=78043, per=1.56%, avg=28886.97, stdev=5534.03, samples=383488</span><br><span class="line">   iops        : min= 2126, max=19510, avg=7221.72, stdev=1383.51, samples=383488</span><br><span class="line">  lat (usec)   : 10=0.01%, 20=0.01%, 50=0.01%, 100=0.09%, 250=48.36%</span><br><span class="line">  lat (usec)   : 500=40.85%, 750=3.27%, 1000=1.69%</span><br><span class="line">  lat (msec)   : 2=1.67%, 4=0.11%, 10=0.31%, 20=0.80%, 50=2.85%</span><br><span class="line">  lat (msec)   : 100=0.01%</span><br><span class="line">  cpu          : usr=2.72%, sys=22.07%, ctx=39047648, majf=0, minf=2329</span><br><span class="line">  IO depths    : 1=0.1%, 2=0.1%, 4=0.1%, 8=0.1%, 16=100.0%, 32=0.0%, &gt;=64=0.0%</span><br><span class="line">     submit    : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.0%, &gt;=64=0.0%</span><br><span class="line">     complete  : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.1%, 32=0.0%, 64=0.0%, &gt;=64=0.0%</span><br><span class="line">     issued rwts: total=1384904141,1384947973,0,0 short=0,0,0,0 dropped=0,0,0,0</span><br><span class="line">     latency   : target=0, window=0, percentile=100.00%, depth=16</span><br><span class="line"></span><br><span class="line">Run status group 0 (all <span class="built_in">jobs</span>):</span><br><span class="line">   READ: bw=1806MiB/s (1893MB/s), 1806MiB/s-1806MiB/s (1893MB/s-1893MB/s), io=5283GiB (5673GB), run=2996095-2996095msec</span><br><span class="line">  WRITE: bw=1806MiB/s (1893MB/s), 1806MiB/s-1806MiB/s (1893MB/s-1893MB/s), io=5283GiB (5673GB), run=2996095-2996095msec</span><br><span class="line"></span><br><span class="line">Disk stats (<span class="built_in">read</span>/write):</span><br><span class="line">    md0: ios=1384845100/1384893479, merge=0/0, ticks=0/0, in_queue=18446744071066259833, util=100.00%, aggrios=173113017/173119258, aggrmerge=0/370, aggrticks=21693351/7667891, aggrin_queue=29266145, aggrutil=100.00%</span><br><span class="line">  sdc: ios=173101335/173120359, merge=0/419, ticks=22174447/8507260, in_queue=30608698, util=100.00%</span><br><span class="line">  sdd: ios=173087939/173109912, merge=0/377, ticks=21631691/7537249, in_queue=29050851, util=100.00%</span><br><span class="line">  sde: ios=173126818/173132463, merge=0/377, ticks=21596255/7551337, in_queue=29061699, util=100.00%</span><br><span class="line">  sdf: ios=173127156/173110625, merge=0/374, ticks=21670542/7593623, in_queue=29164566, util=100.00%</span><br><span class="line">  sdg: ios=173103746/173109064, merge=0/355, ticks=21623068/7544899, in_queue=29086980, util=100.00%</span><br><span class="line">  sdh: ios=173120598/173124611, merge=0/354, ticks=21615026/7539911, in_queue=29044767, util=100.00%</span><br><span class="line">  sdi: ios=173116646/173122559, merge=0/354, ticks=21627364/7543350, in_queue=29079786, util=100.00%</span><br><span class="line">  sdj: ios=173119903/173124475, merge=0/354, ticks=21608418/7525505, in_queue=29031813, util=100.00%</span><br></pre></td></tr></table></figure>

<p>seq throughput, just modify 4K to 1M and randrw to rw<br>About 6.8x throughput</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line">rw: (groupid=0, <span class="built_in">jobs</span>=64): err= 0: pid=61194: Mon Apr 11 12:42:17 2022</span><br><span class="line">   <span class="built_in">read</span>: IOPS=638, BW=638MiB/s (669MB/s)(120GiB/192124msec)</span><br><span class="line">    slat (usec): min=40, max=1012.2k, avg=46695.33, stdev=179190.09</span><br><span class="line">    clat (msec): min=2, max=2811, avg=808.55, stdev=201.05</span><br><span class="line">     lat (msec): min=2, max=2811, avg=855.24, stdev=252.53</span><br><span class="line">    clat percentiles (msec):</span><br><span class="line">     |  1.00th=[   92],  5.00th=[  617], 10.00th=[  751], 20.00th=[  768],</span><br><span class="line">     | 30.00th=[  776], 40.00th=[  785], 50.00th=[  785], 60.00th=[  793],</span><br><span class="line">     | 70.00th=[  802], 80.00th=[  802], 90.00th=[  894], 95.00th=[ 1167],</span><br><span class="line">     | 99.00th=[ 1586], 99.50th=[ 1620], 99.90th=[ 2005], 99.95th=[ 2299],</span><br><span class="line">     | 99.99th=[ 2500]</span><br><span class="line">   bw (  KiB/s): min= 2043, max=43008, per=2.45%, avg=16026.01, stdev=5053.21, samples=15583</span><br><span class="line">   iops        : min=    1, max=   42, avg=15.57, stdev= 4.94, samples=15583</span><br><span class="line">  write: IOPS=635, BW=636MiB/s (667MB/s)(119GiB/192124msec)</span><br><span class="line">    slat (usec): min=40, max=1276.5k, avg=52625.40, stdev=187870.49</span><br><span class="line">    clat (usec): min=1969, max=2794.7k, avg=695187.00, stdev=309474.53</span><br><span class="line">     lat (msec): min=2, max=2794, avg=747.81, stdev=267.60</span><br><span class="line">    clat percentiles (msec):</span><br><span class="line">     |  1.00th=[    5],  5.00th=[    7], 10.00th=[   13], 20.00th=[  735],</span><br><span class="line">     | 30.00th=[  768], 40.00th=[  776], 50.00th=[  785], 60.00th=[  785],</span><br><span class="line">     | 70.00th=[  793], 80.00th=[  802], 90.00th=[  810], 95.00th=[  995],</span><br><span class="line">     | 99.00th=[ 1569], 99.50th=[ 1603], 99.90th=[ 1972], 99.95th=[ 2299],</span><br><span class="line">     | 99.99th=[ 2433]</span><br><span class="line">   bw (  KiB/s): min= 1992, max=43008, per=2.29%, avg=14931.33, stdev=5565.33, samples=16686</span><br><span class="line">   iops        : min=    1, max=   42, avg=14.50, stdev= 5.44, samples=16686</span><br><span class="line">  lat (msec)   : 2=0.01%, 4=0.47%, 10=4.14%, 20=1.37%, 50=0.62%</span><br><span class="line">  lat (msec)   : 100=0.22%, 250=1.01%, 500=1.80%, 750=6.29%, 1000=77.88%</span><br><span class="line">  cpu          : usr=0.41%, sys=0.39%, ctx=31436, majf=0, minf=2344</span><br><span class="line">  IO depths    : 1=0.1%, 2=0.1%, 4=0.1%, 8=0.2%, 16=99.6%, 32=0.0%, &gt;=64=0.0%</span><br><span class="line">     submit    : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.0%, &gt;=64=0.0%</span><br><span class="line">     complete  : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.1%, 32=0.0%, 64=0.0%, &gt;=64=0.0%</span><br><span class="line">     issued rwts: total=122583,122190,0,0 short=0,0,0,0 dropped=0,0,0,0</span><br><span class="line">     latency   : target=0, window=0, percentile=100.00%, depth=16</span><br><span class="line"></span><br><span class="line">Run status group 0 (all <span class="built_in">jobs</span>):</span><br><span class="line">   READ: bw=638MiB/s (669MB/s), 638MiB/s-638MiB/s (669MB/s-669MB/s), io=120GiB (129GB), run=192124-192124msec</span><br><span class="line">  WRITE: bw=636MiB/s (667MB/s), 636MiB/s-636MiB/s (667MB/s-667MB/s), io=119GiB (128GB), run=192124-192124msec</span><br><span class="line"></span><br><span class="line">Disk stats (<span class="built_in">read</span>/write):</span><br><span class="line">  sdc: ios=245051/244393, merge=0/190, ticks=17774316/10049297, in_queue=27859894, util=100.00%</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">rw: (groupid=0, <span class="built_in">jobs</span>=64): err= 0: pid=15067: Mon Apr 11 12:43:03 2022</span><br><span class="line">   <span class="built_in">read</span>: IOPS=4563, BW=4563MiB/s (4785MB/s)(846GiB/189931msec)</span><br><span class="line">    slat (usec): min=61, max=235700, avg=6909.10, stdev=11794.40</span><br><span class="line">    clat (usec): min=552, max=1212.4k, avg=98734.03, stdev=17143.26</span><br><span class="line">     lat (usec): min=941, max=1212.8k, avg=105643.56, stdev=15810.83</span><br><span class="line">    clat percentiles (msec):</span><br><span class="line">     |  1.00th=[   73],  5.00th=[   83], 10.00th=[   84], 20.00th=[   85],</span><br><span class="line">     | 30.00th=[   86], 40.00th=[   87], 50.00th=[  109], 60.00th=[  111],</span><br><span class="line">     | 70.00th=[  112], 80.00th=[  113], 90.00th=[  114], 95.00th=[  115],</span><br><span class="line">     | 99.00th=[  117], 99.50th=[  121], 99.90th=[  174], 99.95th=[  338],</span><br><span class="line">     | 99.99th=[  485]</span><br><span class="line">   bw (  KiB/s): min=36864, max=210944, per=1.56%, avg=72988.68, stdev=9177.05, samples=24255</span><br><span class="line">   iops        : min=   36, max=  206, avg=71.23, stdev= 8.97, samples=24255</span><br><span class="line">  write: IOPS=4566, BW=4567MiB/s (4788MB/s)(847GiB/189931msec)</span><br><span class="line">    slat (usec): min=64, max=1128.7k, avg=6923.18, stdev=11911.75</span><br><span class="line">    clat (msec): min=2, max=1212, avg=111.44, stdev=11.48</span><br><span class="line">     lat (msec): min=2, max=1212, avg=118.37, stdev=15.37</span><br><span class="line">    clat percentiles (msec):</span><br><span class="line">     |  1.00th=[   84],  5.00th=[   88], 10.00th=[  110], 20.00th=[  111],</span><br><span class="line">     | 30.00th=[  112], 40.00th=[  112], 50.00th=[  113], 60.00th=[  113],</span><br><span class="line">     | 70.00th=[  114], 80.00th=[  114], 90.00th=[  115], 95.00th=[  116],</span><br><span class="line">     | 99.00th=[  138], 99.50th=[  142], 99.90th=[  176], 99.95th=[  305],</span><br><span class="line">     | 99.99th=[  481]</span><br><span class="line">   bw (  KiB/s): min=26624, max=202752, per=1.56%, avg=73030.87, stdev=8880.35, samples=24255</span><br><span class="line">   iops        : min=   26, max=  198, avg=71.27, stdev= 8.68, samples=24255</span><br><span class="line">  lat (usec)   : 750=0.01%, 1000=0.01%</span><br><span class="line">  lat (msec)   : 2=0.01%, 4=0.01%, 10=0.04%, 20=0.02%, 50=0.08%</span><br><span class="line">  lat (msec)   : 100=27.00%, 250=72.78%, 500=0.05%, 750=0.01%</span><br><span class="line">  cpu          : usr=1.21%, sys=1.93%, ctx=435333, majf=0, minf=2355</span><br><span class="line">  IO depths    : 1=0.1%, 2=0.1%, 4=0.1%, 8=0.1%, 16=99.9%, 32=0.0%, &gt;=64=0.0%</span><br><span class="line">     submit    : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.0%, &gt;=64=0.0%</span><br><span class="line">     complete  : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.1%, 32=0.0%, 64=0.0%, &gt;=64=0.0%</span><br><span class="line">     issued rwts: total=866722,867323,0,0 short=0,0,0,0 dropped=0,0,0,0</span><br><span class="line">     latency   : target=0, window=0, percentile=100.00%, depth=16</span><br><span class="line"></span><br><span class="line">Run status group 0 (all <span class="built_in">jobs</span>):</span><br><span class="line">   READ: bw=4563MiB/s (4785MB/s), 4563MiB/s-4563MiB/s (4785MB/s-4785MB/s), io=846GiB (909GB), run=189931-189931msec</span><br><span class="line">  WRITE: bw=4567MiB/s (4788MB/s), 4567MiB/s-4567MiB/s (4788MB/s-4788MB/s), io=847GiB (909GB), run=189931-189931msec</span><br><span class="line"></span><br><span class="line">Disk stats (<span class="built_in">read</span>/write):</span><br><span class="line">    md0: ios=6930373/6935655, merge=0/0, ticks=0/0, in_queue=18446744072366168687, util=100.00%, aggrios=866722/867370, aggrmerge=0/22, aggrticks=1416550/7412965, aggrin_queue=8834395, aggrutil=100.00%</span><br><span class="line">  sdc: ios=866722/867370, merge=0/22, ticks=1759061/22999026, in_queue=24778050, util=100.00%</span><br><span class="line">  sdd: ios=866722/867370, merge=0/22, ticks=1313552/3480814, in_queue=4795639, util=100.00%</span><br><span class="line">  sde: ios=866722/867369, merge=0/23, ticks=1292599/3538187, in_queue=4833867, util=100.00%</span><br><span class="line">  sdf: ios=866722/867371, merge=0/21, ticks=1292654/3523106, in_queue=4816929, util=100.00%</span><br><span class="line">  sdg: ios=866722/867371, merge=0/24, ticks=1305782/3942841, in_queue=5252219, util=100.00%</span><br><span class="line">  sdh: ios=866722/867369, merge=0/23, ticks=1338665/4264058, in_queue=5603395, util=100.00%</span><br><span class="line">  sdi: ios=866722/867371, merge=0/21, ticks=1400282/5527320, in_queue=6932267, util=100.00%</span><br><span class="line">  sdj: ios=866722/867369, merge=0/23, ticks=1629805/12028370, in_queue=13662794, util=100.00%</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>3 mirro x 6 groups  = 18 HDD 6TB HDDs</p>
<ul>
<li>4K 1:1 randrw:1 644 x2 = 3288 ops, seq rw 398+398 MB/s = 796 MB/s, dd calculate size/time, 64x, disable primary/secondary cache</li>
<li>4K randread:1 4236,  read 1M 576 MB/s </li>
<li>4K randwrite:1 2667, write 1M 748 MB/s<br>8+2 raidz2 ashfif 12  = 10 HDD 6TB HDDs</li>
<li>4K 1:1 randrw:1 202 x2 = 404 ops, seq rw 117+117 MB/s = 234 MB/s, dd calculate size/time, 64x, disable primary/secondary cache </li>
<li>4K randread 425, read 1M 129 MB/s</li>
<li>4K randwrite 587,  write 1M, 1202 MB/s<br>8+3 raidz3 ashfit 12 = 11 HDD 6TB HDDs</li>
<li>4K 1:1 randrw:1 142 x2 = 284 ops, rw 1M, 116MB x2 = 232MB/s, dd calculate size/time, 64x, disable primary/secondary cache</li>
<li>4K randread 316, read 1M, 136.45 MB/s</li>
<li>4K randwite 357,write 1M, 1327 MB/s</li>
</ul>
<h3 id="Does-the-SAS-support-the-full-duplex"><a href="#Does-the-SAS-support-the-full-duplex" class="headerlink" title="Does the SAS support the full-duplex ?"></a><a target="_blank" rel="noopener" href="https://docs.broadcom.com/doc/12352168">Does the SAS support the full-duplex ?</a></h3><ul>
<li>LSI 9200-16e<ul>
<li>External Four x4 Mini-SAS SFF8088</li>
<li>PCI Data Burst Transfer Rates Half Duplex<ul>
<li>X8 PCIe 4000 MB/s</li>
</ul>
</li>
<li>Full Duplex<ul>
<li>X8 PCIe 8000 MB/s</li>
</ul>
</li>
<li>SAS Bandwidth<ul>
<li>Half Duplex<ul>
<li>Single Lane – 600MB/s</li>
<li>Wide port (2 lanes) – 1200MB/s</li>
<li>Wide port (3 lanes) – 1800MB/s</li>
<li>Wide port (4 lanes) – 2400MB/s</li>
<li>Wide port (2x4) – 4800MB/s (dual phy port)</li>
</ul>
</li>
<li>Full Duplex<ul>
<li>Single lane – 1200MB/s</li>
<li>Wide port (2 lanes) – 2400MB/s</li>
<li>Wide port (4 lanes) – 4800MB/s</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>LSI 9300-16e (only support half duplex)<ul>
<li>Four (x4) mini-SAS HD external connector (SFF8644)</li>
<li>PCI Data Burst Transfer Rate<ul>
<li>Half Duplex, x8, PCIe, 8000 MB/s</li>
</ul>
</li>
<li>Port Configurations<ul>
<li>16 ea, x1 ports (individual drives)</li>
<li>4 ea, x4 wide ports</li>
<li>2ea , x8 wide ports</li>
</ul>
</li>
<li>Half Duplex (x4 wide bus) 4800 MB/s<ul>
<li>Dual phy port 9600 MB/s (8e)</li>
</ul>
</li>
</ul>
</li>
<li>LSI 9400-16e<ul>
<li>PCIe 3.1 Host Interface<ul>
<li>Supports x8, x4, x2, x1 PCIe lanes at a transfer rate up to 8.0 GT/s per lane, full duplex</li>
<li>test LSI 9400-8e with 10x SAS4 SSD, WCE=1, RCD=0<ul>
<li>random bs=4K, ioengine=libaio, iodepth=4, seq bs=1M, direct=1,libaio,iodepth=4</li>
<li>raw dev, 10x read/10x write, looks like it ‘s the full duplex, AVG: 5716MiB/s +4729MiB/s = 10445 MiB/s, performance: r: 5651 + w: 4875=10526MiB/s</li>
<li>raw dev, 10x read 6934MiB/s</li>
<li>raw dev, 10x write bw=6584MiB/s</li>
<li>raw dev, 10x randread 4K IOPS=592k bw=2313MiB/s</li>
<li>raw dev, 10x randwrite 4K IOPS=962k, bw=3756MiB/s</li>
<li>raw dev, 10x randr/randw 4K r:IOPS=366k, bw=1431MiB/s w:IOPS=706k, w=2759MiB/s<ul>
<li>single SAS ssd spec<ul>
<li>raw dev, 1x read READ: bw=1074MiB/s</li>
<li>raw dev, 1x write WRITE: bw=1071MiB/s (1123MB/s)</li>
<li>raw dev, 1x READ: bw=630MiB/s WRITE: bw=626MiB/s</li>
<li>raw dev, 1x randread 4K IOPS=63.1k,bw=247MiB/s</li>
<li>raw dev, 1x randwrite 4K IOPS=125k,bw=487MiB/s</li>
<li>raw dev, 1x randrw READ: bw=145MiB/s read: IOPS=37.0k,  WRITE: bw=144MiB/s write: IOPS=36.0k</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>LSI 9500-16e<ul>
<li>PCIe 4.0 full duplex</li>
</ul>
</li>
</ul>
<p>Not sure 9400-16e and 9500-16e could full-duplex work in SAS layer, looks like it could be supportted.</p>
<h3 id="network-filesystem-test"><a href="#network-filesystem-test" class="headerlink" title="network filesystem test"></a>network filesystem test</h3><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">systemctl</span> stop irqbalance.service</span><br><span class="line"><span class="attribute">echo</span> <span class="number">0</span> &gt; /sys/module/spl/parameters/spl_taskq_thread_dynamic</span><br><span class="line"><span class="attribute">tuna</span> -c <span class="number">12</span>-<span class="number">15</span> -t &#x27;*rcu*&#x27; --move</span><br><span class="line"><span class="attribute">tuna</span> -C <span class="number">12</span>-<span class="number">15</span> -i -q &#x27;mlx<span class="number">5</span>_comp*@pci:<span class="number">0000</span>:c<span class="number">1</span>:<span class="number">00</span>.<span class="number">0</span>&#x27;</span><br><span class="line"><span class="attribute">tuna</span> -C <span class="number">12</span>-<span class="number">15</span> -i -q &#x27;mlx<span class="number">5</span>_comp*@pci:<span class="number">0000</span>:c<span class="number">1</span>:<span class="number">00</span>.<span class="number">1</span>&#x27;</span><br><span class="line"><span class="attribute">tuna</span> -C <span class="number">12</span>-<span class="number">15</span> -i -q &#x27;mpt<span class="number">3</span>sas*-msix*&#x27;</span><br><span class="line"><span class="attribute">tuna</span> --cpus=<span class="number">12</span>-<span class="number">15</span> --threads z_wr_iss* --move</span><br><span class="line"><span class="attribute">tuna</span> --cpus=<span class="number">12</span>-<span class="number">15</span> --threads z_wr_int* --move</span><br><span class="line"></span><br><span class="line"><span class="comment">#16 cores system; 1x AMD 7282</span></span><br><span class="line"><span class="attribute">tuna</span> --cpus=<span class="number">0</span>-<span class="number">11</span> --threads socknal* --move</span><br><span class="line"><span class="attribute">tuna</span> --cpus=<span class="number">0</span>-<span class="number">11</span> --threads ll_ost_io* --move</span><br></pre></td></tr></table></figure>
<ul>
<li>amd 1x 7282, 8x 3200MHz 32G, 1x LSI 9400-8e, 5x clients,the dual nic ports was no balance<ul>
<li>lz4 80x hdds, 5x zpool raid0<ul>
<li>pin cpu <ul>
<li>network write: 5747.57 MiB/s;cpu 53.71%</li>
<li>network read: 5142.01 MiB/s; cpu 14.65%</li>
<li>network write: 3896.28<del>4018.17 MiB/s read: 3891.88</del>4014.09 MiB/s rw: 7788.15~8032.26 MiB/s; cpu 60.04%</li>
</ul>
</li>
<li>nopin cpu<ul>
<li>network write: 5270.27 MiB/s;cpu 50.1%</li>
<li>network read: 5051.41 MiB/s; cpu 14.68%  ; There are too many jitter in this test, 4.5~5.3 GiB/s</li>
<li>network write: 4042.28 MiB/s read:4038.63 MiB/s rw: 8080.91 MiB/s; cpu 57.12%</li>
</ul>
</li>
</ul>
</li>
<li>off lz4 80x hdds, 5x zpool raid0<ul>
<li>pin cpu <ul>
<li>network write: 5593.18 MiB/s;cpu 64.07%</li>
<li>network read: 4736.3 MiB/s;cpu 27.15%</li>
<li>network write: 3683.62 MiB/s; read: 3679.81 MiB/s; rw: 7363.44 MiB/s; cpu: 62.7159%</li>
</ul>
</li>
<li>nopin cpu <ul>
<li>network write: 4872.16 MiB/s;cpu: 54.06%</li>
<li>network read: 4687.02 MiB/s;cpu 29.93%</li>
<li>network write: 3630.51 MiB/s; read: 3626.77 MiB/s; rw: 7257.28 MiB/s; cpu: 65.64%</li>
</ul>
</li>
</ul>
</li>
<li>off lz4 80x hdds, 5x zpool raidz3<ul>
<li>nopin cpu <ul>
<li>network write: 3469.83<del>3534.6 MiB/s;cpu: 83.05%</del>81.77%</li>
<li>network read: 3816.1 MiB/s;cpu 54.57%</li>
<li>network write: 1900.91 MiB/s; read: 1897.15 MiB/s; rw: 3798.06 MiB/s; cpu: 67.56%</li>
</ul>
</li>
<li>pin cpu <ul>
<li>looks like there is no enough cpu, but it ‘s not, I try to many diff pin cpu resource, whether the read or the write, the lower bandwidth than no cpu pin</li>
</ul>
</li>
</ul>
</li>
<li>intel 2x 5317, 8x 32G 2933MHz; off lz4 80x hdds, 5x zpool raidz3<ul>
<li>nopin cpu <ul>
<li>network write: 3666 MiB/s;cpu: %83.72</li>
<li>network read:  3978.13 MiB/s; cpu %56.55</li>
<li>network write: 2193.37 MiB/s; read: 2191.87 MiB/s; rw: 4385.24 MiB/s; cpu: 74.55%</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="CPU-cache-speed"><a href="#CPU-cache-speed" class="headerlink" title="CPU cache speed"></a>CPU cache speed</h3><ul>
<li><a target="_blank" rel="noopener" href="https://www.7-cpu.com/cpu/Ice_Lake.html">Intel i7-1065G7 (Ice Lake), 3.9 GHz (Turbo Boost), 10 nm. 122 mm2, RAM: 16 GB, dual LPDDR4-3733. Surface Pro 7</a><ul>
<li>L1 Data Cache Latency = 5 cycles for simple access via pointer</li>
<li>L1 Data Cache Latency = 5 cycles for access with complex address calculation (size_t n, *p; n = p[n]).</li>
<li>L2 Cache Latency = 13 cycles</li>
<li>L3 Cache Latency = 42 cycles (core 0)</li>
<li>L3 Cache Latency = 41 cycles (core 1)</li>
<li>L3 Cache Latency = 41 cycles (core 2)</li>
<li>L3 Cache Latency = 42 cycles (core 3)</li>
<li>RAM Latency = 42 cycles + 87 ns </li>
<li>Branch misprediction penalty = 17 cycles average (if mOp cache hit).</li>
<li>Branch misprediction penalty = 20-21 ? cycles (if mOp cache miss). </li>
<li>64-bytes range cross penalty = 6 cycles</li>
<li>4096-bytes range cross penalty = 7 cycles (1 additional cycle over 64-bytes cross penalty). </li>
<li>L1 B/W (Parallel Random Read) = 0.5 cycles per one access</li>
<li>L1 Write (8-32 bytes step) = 0.5 cycles per one write </li>
<li>L2-&gt;L1 B/W (Parallel Random Read) = 1.4 cycles per cache line</li>
<li>L2-&gt;L1 B/W (Read, 64 bytes step) = 1.4 cycles per cache line</li>
<li>L2 Write (Write, 16-64 bytes step) = 3.0 cycles per cache line </li>
<li>L3-&gt;L1 B/W (Parallel Random Read) = 4.0 (or less) cycles per cache line</li>
<li>L3-&gt;L1 B/W (Read, 64 bytes step) = 3.3 cycles per cache line</li>
<li>L3 Write (Write, 16-64 bytes step) = 5.2 cycles per cache line </li>
<li>RAM Read B/W (Parallel Random Read) = 6 ns (or less) / cache line</li>
<li>RAM Read B/W (Read, 16-64 Bytes step) = 24-25 GB/s</li>
<li>RAM Read B/W (Read, 64 Bytes step - pointer chasing) = 18 GB/s</li>
<li>RAM Write B/W (Write, 8-64 Bytes step) = 18 GB/s </li>
</ul>
</li>
<li><a target="_blank" rel="noopener" href="https://www.7-cpu.com/cpu/Zen2.html">AMD 3800X (Zen2), 7 nm. RAM: 32 GB, RAM DDR4-3200 16-18-18-38-56-1T (dual channel)</a><ul>
<li>L1 Data cache = 32 KB, 64 B/line, 8-WAY. write-back, ECC. Two 256-bit loads and one 256-bit store per cycle.</li>
<li>L1 Instruction cache = 32 KB, 64 B/line, 8-WAY. 32 bytes fetch / cycle.</li>
<li>L2 cache = 512 KB, 64 B/line, 8-WAY, write-back. 32 bytes L2-&gt;L1 datapath.</li>
<li>L3 cache = 16 MB or 4 MB per CCX 4 cores), 64 B/line, 16-WAY, write-back. victim for L2.</li>
<li>Op Cache (OC): 4096 items. up to 8 Instructions/entry. 8-way, 64 sets. Entry limits: 8 instructions, 8 32-bit t immediates/displacements (64-bit immediates/displacements take two slots), 4 microcode instructions. An OC entry terminates at the end of a 64-byte aligned memory region.</li>
<li>Dispatch: 6 ops/cycle</li>
<li>Retire Unit: receive 6 macro-op/cycle, 224 macro ops. 8 macro-op/cycle retire</li>
<li>4 ALUS, 3 AGUs</li>
<li>ALU schedulers : 4x16.</li>
<li>AGU scheduler : 1x28.</li>
<li>reorder buffer : 224.</li>
<li>integer register file : 180.</li>
<li>FP scheduler : 36 entry micro-op.</li>
<li>4 FPU pipes.</li>
<li>2x 32B loads + 1x 32B store per cycle</li>
<li>Load Queue: 44 entry</li>
<li>Store Queue: 48 entry</li>
<li>LS unit can track up to 22 outstanding in-flight cache misses. </li>
<li>4 cycles for simple access via pointer</li>
<li>5 cycles for access with complex address calculation (size_t n, *p; n = p[n]).</li>
<li>AMD DOC: 7- or 8-cycle FPU load-to-use latency. </li>
<li>L2 Cache Latency = 12 cycles </li>
<li>L3 Cache Latency = 38 cycles </li>
<li>RAM Latency = 38 cycles + 66 ns </li>
</ul>
</li>
</ul>
</div><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="mailto:undefined">Homer</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="http://yoursite.com/2016/06/16/spec/">http://yoursite.com/2016/06/16/spec/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/scsi/">scsi</a><a class="post-meta__tags" href="/tags/cpu/">cpu</a><a class="post-meta__tags" href="/tags/bus/">bus</a><a class="post-meta__tags" href="/tags/nvme/">nvme</a></div><div class="post_share"><div class="social-share" data-image="https://homerl.github.io/img/network-interface-card-2081371-1751392.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2016/07/20/fault_ratio/"><img class="prev-cover" src="https://homerl.github.io/img/network-interface-card-2081371-1751392.png" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">Previous Post</div><div class="prev_info">fault ratio</div></div></a></div><div class="next-post pull-right"><a href="/2016/04/04/awk/"><img class="next-cover" src="https://homerl.github.io/img/PROPELLER-2-1-1024x1024.png" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">Next Post</div><div class="next_info">awk tips</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span> Related Articles</span></div><div class="relatedPosts-list"><div><a href="/2019/11/26/smartctl/" title="smartctl"><img class="cover" src="https://homerl.github.io/img/hard-disk_223cf.jpg"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2019-11-26</div><div class="title">smartctl</div></div></a></div><div><a href="/2018/09/27/hba/" title="SAS HBA"><img class="cover" src="https://homerl.github.io/img/hard-disk_223cf.jpg"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2018-09-27</div><div class="title">SAS HBA</div></div></a></div><div><a href="/2018/07/08/scsi_dev/" title="scsi device maintain"><img class="cover" src="https://homerl.github.io/img/hard-disk_223cf.jpg"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2018-07-08</div><div class="title">scsi device maintain</div></div></a></div><div><a href="/2016/12/04/openzfs-tips/" title="openzfs tips"><img class="cover" src="https://homerl.github.io/img/the_last_word_fs.jpg"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2016-12-04</div><div class="title">openzfs tips</div></div></a></div><div><a href="/2016/08/10/block_device/" title="The block device"><img class="cover" src="https://homerl.github.io/img/hard-disk_223cf.jpg"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2016-08-10</div><div class="title">The block device</div></div></a></div><div><a href="/2018/08/06/numa/" title="numa"><img class="cover" src="https://homerl.github.io/img/operting_system_a32c6f.svg"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2018-08-06</div><div class="title">numa</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> Comment</span></div></div><div class="comment-wrap"><div><div id="gitalk-container"></div></div></div></div></article></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2015 - 2022 By Homer</div><div class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><section id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Read Mode"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="Switch Between Light And Dark Mode"><i class="fas fa-adjust"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="Setting"><i class="fas fa-cog"></i></button><a id="to_comment" href="#post-comment" title="Scroll To Comments"><i class="fas fa-comments"></i></a><button class="close" id="mobile-toc-button" type="button" title="Table Of Contents"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="Back To Top"><i class="fas fa-arrow-up"></i></button></div></section><div class="search-dialog" id="local-search"><div class="search-dialog__title" id="local-search-title">Local search</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="Search for Posts" type="text"/></div></div></div><hr/><div id="local-search-results"><div id="local-hits"></div><div id="local-stats"><div class="local-search-stats__hr" id="hr"><span>Powered by</span> <a target="_blank" rel="noopener" href="https://github.com/wzpan/hexo-generator-search" style="color:#49B1F5;">hexo-generator-search</a></div></div></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div><div><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>function addGitalkSource () {
  const ele = document.createElement('link')
  ele.rel = 'stylesheet'
  ele.href= 'https://cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.css'
  document.getElementsByTagName('head')[0].appendChild(ele)
}

function loadGitalk () {
  function initGitalk () {
    var gitalk = new Gitalk({
      clientID: '0b9d5b98d0a972b33cf7',
      clientSecret: '769efc11b32f6c0d03bcbf3ee800dfc4e2690459',
      repo: 'homerl.github.io',
      owner: 'homerl',
      admin: ['homerl'],
      id: '870859a0a24bb62a95f54a4f1545ac4f',
      language: 'en',
      perPage: 10,
      distractionFreeMode: false,
      pagerDirection: 'last',
      createIssueManually: false,
      updateCountCallback: commentCount
    })
    gitalk.render('gitalk-container')
  }

  if (typeof Gitalk === 'function') initGitalk()
  else {
    addGitalkSource()
    $.getScript('https://cdn.jsdelivr.net/npm/gitalk@latest/dist/gitalk.min.js', initGitalk)
  }
}

function commentCount(n){
  let isCommentCount = document.querySelector('#post-meta .gitalk-comment-count')
  if (isCommentCount) {
    isCommentCount.innerHTML= n
  }
}

if ('Gitalk' === 'Gitalk' || !false) {
  if (false) btf.loadComment(document.getElementById('gitalk-container'), loadGitalk)
  else loadGitalk()
} else {
  function loadOtherComment () {
    loadGitalk()
  }
}</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></div></body></html>