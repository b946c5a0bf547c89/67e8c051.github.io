<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>GDB tips | 无常,无形,无功;不动,不破,不空</title><meta name="keywords" content="debug,trace"><meta name="author" content="Homer"><meta name="copyright" content="Homer"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><meta name="description" content="1234567891011121314151617$ ulimit -S -c unlimited(gdb) break *func_b+0x23Breakpoint 1 at 0x804898f: file backtrace.c, line 59.(gdb) list *func_b+0x230x804898f is in func_b (backtrace.c:59).54     int">
<meta property="og:type" content="article">
<meta property="og:title" content="GDB tips">
<meta property="og:url" content="http://yoursite.com/2020/03/03/gdb/index.html">
<meta property="og:site_name" content="无常,无形,无功;不动,不破,不空">
<meta property="og:description" content="1234567891011121314151617$ ulimit -S -c unlimited(gdb) break *func_b+0x23Breakpoint 1 at 0x804898f: file backtrace.c, line 59.(gdb) list *func_b+0x230x804898f is in func_b (backtrace.c:59).54     int">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://homerl.github.io/img/PROPELLER-2-1-1024x1024.png">
<meta property="article:published_time" content="2020-03-03T14:17:33.000Z">
<meta property="article:modified_time" content="2021-05-13T06:41:15.000Z">
<meta property="article:author" content="Homer">
<meta property="article:tag" content="debug">
<meta property="article:tag" content="trace">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://homerl.github.io/img/PROPELLER-2-1-1024x1024.png"><link rel="shortcut icon" href="/img/stout-shield.png"><link rel="canonical" href="http://yoursite.com/2020/03/03/gdb/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><script>var GLOBAL_CONFIG = { 
  root: '/',
  hexoversion: '5.2.0',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"We didn't find any results for the search: ${query}"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: 'Just',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: undefined,
  ClickShowText: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  justifiedGallery: {
    js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
    css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: false
};

var saveToLocal = {
  set: function setWithExpiry(key, value, ttl) {
    const now = new Date()
    const expiryDay = ttl * 86400000
    const item = {
      value: value,
      expiry: now.getTime() + expiryDay,
    }
    localStorage.setItem(key, JSON.stringify(item))
  },

  get: function getWithExpiry(key) {
    const itemStr = localStorage.getItem(key)

    if (!itemStr) {
      return undefined
    }
    const item = JSON.parse(itemStr)
    const now = new Date()

    if (now.getTime() > item.expiry) {
      localStorage.removeItem(key)
      return undefined
    }
    return item.value
  }
}</script><script id="config_change">var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isSidebar: true,
  postUpdate: '2021-05-13 14:41:15'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(function () {
  window.activateDarkMode = function () {
    document.documentElement.setAttribute('data-theme', 'dark')
    if (document.querySelector('meta[name="theme-color"]') !== null) {
      document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
    }
  }
  window.activateLightMode = function () {
    document.documentElement.setAttribute('data-theme', 'light')
    if (document.querySelector('meta[name="theme-color"]') !== null) {
      document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
    }
  }

  const autoChangeMode = 'false'
  const t = saveToLocal.get('theme')
  if (autoChangeMode === '1') {
    const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
    const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
    const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
    const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

    if (t === undefined) {
      if (isLightMode) activateLightMode()
      else if (isDarkMode) activateDarkMode()
      else if (isNotSpecified || hasNoSupport) {
        const now = new Date()
        const hour = now.getHours()
        const isNight = hour <= 6 || hour >= 18
        isNight ? activateDarkMode() : activateLightMode()
      }
      window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
        if (saveToLocal.get('theme') === undefined) {
          e.matches ? activateDarkMode() : activateLightMode()
        }
      })
    } else if (t === 'light') activateLightMode()
    else activateDarkMode()
  } else if (autoChangeMode === '2') {
    const now = new Date()
    const hour = now.getHours()
    const isNight = hour <= 6 || hour >= 18
    if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
    else if (t === 'light') activateLightMode()
    else activateDarkMode()
  } else {
    if (t === 'dark') activateDarkMode()
    else if (t === 'light') activateLightMode()
  }
})()</script><meta name="generator" content="Hexo 5.2.0"><link rel="alternate" href="/atom.xml" title="无常,无形,无功;不动,不破,不空" type="application/atom+xml">
</head><body><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="/img/fighting-spiri-logot.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">Articles</div><div class="length_num">56</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">Tags</div><div class="length_num">54</div></a></div></div><div class="mobile_data_item is-center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">Categories</div><div class="length_num">7</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> List</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></li><li><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></li><li><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div></div></div><div id="body-wrap"><div id="sidebar"><i class="fas fa-arrow-right on" id="toggle-sidebar"></i><div class="sidebar-toc"><div class="sidebar-toc__title">Catalog</div><div class="sidebar-toc__progress"><span class="progress-notice">You've read</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">1.</span> <span class="toc-text"></span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#segment-fault"><span class="toc-number">1.1.</span> <span class="toc-text">segment fault</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#Demo"><span class="toc-number">1.1.1.</span> <span class="toc-text">Demo</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#OS-settting"><span class="toc-number">2.</span> <span class="toc-text">OS settting</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Core-pattern"><span class="toc-number">2.1.</span> <span class="toc-text">Core pattern</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Core-single"><span class="toc-number">2.2.</span> <span class="toc-text">Core single</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#Test-SIGSEGV"><span class="toc-number">2.2.1.</span> <span class="toc-text">Test SIGSEGV</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Enable-ptrace-permissions"><span class="toc-number">2.3.</span> <span class="toc-text">Enable ptrace permissions</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Genarate-the-debug-info"><span class="toc-number">3.</span> <span class="toc-text">Genarate the debug info</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ubuntu"><span class="toc-number">4.</span> <span class="toc-text">ubuntu</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Open-the-core-file"><span class="toc-number">5.</span> <span class="toc-text">Open the core file</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#attach-the-process"><span class="toc-number">6.</span> <span class="toc-text">attach the process</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#gdb-basic-cmd"><span class="toc-number">7.</span> <span class="toc-text">gdb basic cmd</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#set-print-variable-length"><span class="toc-number"></span> <span class="toc-text">set print variable length</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#print-argv"><span class="toc-number">1.</span> <span class="toc-text">print argv</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#threads"><span class="toc-number">1.1.</span> <span class="toc-text">threads</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#or"><span class="toc-number"></span> <span class="toc-text">or</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#debug-with-python"><span class="toc-number">1.</span> <span class="toc-text">debug with python</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#gdb-note"><span class="toc-number">2.</span> <span class="toc-text">gdb note</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#User-space"><span class="toc-number">3.</span> <span class="toc-text">User space</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#source-code-directory"><span class="toc-number">4.</span> <span class="toc-text">source code directory</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#gcc-parameters-and-show-macro"><span class="toc-number">5.</span> <span class="toc-text">gcc parameters and show macro</span></a></li></ol></div></div></div><header class="post-bg" id="page-header" style="background-image: url(https://homerl.github.io/img/PROPELLER-2-1-1024x1024.png)"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">无常,无形,无功;不动,不破,不空</a></span><span id="menus"><div id="search_button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> Search</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> List</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></li><li><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></li><li><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div><span class="close" id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></span></span></nav><div id="post-info"><div id="post-title"><div class="posttitle">GDB tips</div></div><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" datetime="2020-03-03T14:17:33.000Z" title="Created 2020-03-03 22:17:33">2020-03-03</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2021-05-13T06:41:15.000Z" title="Updated 2021-05-13 14:41:15">2021-05-13</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Scripts/">Scripts</a></span></div><div class="meta-secondline"> <span class="post-meta-separator">|</span><span class="post-meta-pv-cv"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">Post View:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout_post" id="content-inner"><article id="post"><div class="post-content" id="article-container"><h3 id=""><a href="#" class="headerlink" title=""></a></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">ulimit</span> -S -c unlimited</span><br><span class="line"></span><br><span class="line">(gdb) <span class="built_in">break</span> *func_b+0x23</span><br><span class="line">Breakpoint 1 at 0x804898f: file backtrace.c, line 59.</span><br><span class="line"></span><br><span class="line">(gdb) list *func_b+0x23</span><br><span class="line">0x804898f is <span class="keyword">in</span> func_b (backtrace.c:59).</span><br><span class="line">54     int func_b()</span><br><span class="line">55     &#123;</span><br><span class="line">56         <span class="built_in">printf</span>(<span class="string">&quot;This is func_b\n&quot;</span>);</span><br><span class="line">57         /* illegal pointer, si_code = 128 (send by kernel) */</span><br><span class="line">58         int *p = (int *)-1;</span><br><span class="line">59         <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, *p);</span><br><span class="line">60     &#125;</span><br><span class="line">61</span><br><span class="line">62     int main(int argc, char *argv[])</span><br><span class="line">63     &#123;</span><br></pre></td></tr></table></figure>

<h4 id="segment-fault"><a href="#segment-fault" class="headerlink" title="segment fault"></a><a target="_blank" rel="noopener" href="https://wiki.debian.org/InterpretingKernelOutputAtProcessCrash">segment fault</a></h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"> * Page fault error code bits:</span><br><span class="line"> *</span><br><span class="line"> *   bit 0 ==	 0: no page found	1: protection fault</span><br><span class="line"> *   bit 1 ==	 0: <span class="built_in">read</span> access		1: write access</span><br><span class="line"> *   bit 2 ==	 0: kernel-mode access	1: user-mode access</span><br><span class="line"> *   bit 3 ==				1: use of reserved bit detected</span><br><span class="line"> *   bit 4 ==				1: fault was an instruction fetch</span><br><span class="line"> *   bit 5 ==				1: protection keys block access</span><br><span class="line"> */</span><br><span class="line">enum x86_pf_error_code &#123;</span><br><span class="line">	X86_PF_PROT	=		1 &lt;&lt; 0,</span><br><span class="line">	X86_PF_WRITE	=		1 &lt;&lt; 1,</span><br><span class="line">	X86_PF_USER	=		1 &lt;&lt; 2,</span><br><span class="line">	X86_PF_RSVD	=		1 &lt;&lt; 3,</span><br><span class="line">	X86_PF_INSTR	=		1 &lt;&lt; 4,</span><br><span class="line">	X86_PF_PK	=		1 &lt;&lt; 5,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">#endif /* _ASM_X86_TRAPS_H */</span></span><br></pre></td></tr></table></figure>
<ul>
<li>bit2: 值为 1 时表示是用户态程序内存访问越界，值为 0 时表示是内核态程序内存访问越界</li>
<li>bit1: 值为 1 时表示是写操作导致内存访问越界，值为 0 时表示是读操作导致内存访问越界</li>
<li>bit0: 值为 1 表示没有足够的权限访问非法地址的内容， 值为 0 时表示访问的非法地址根本没有对应的页面，也就是无效地址</li>
</ul>
<h5 id="Demo"><a href="#Demo" class="headerlink" title="Demo"></a>Demo</h5><p>err 4</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">$ cat cpp_crash.cpp</span><br><span class="line"><span class="comment">#include &lt;stdio.h&gt;</span></span><br><span class="line"></span><br><span class="line">void myprint(int* ptr) &#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, *ptr);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int <span class="function"><span class="title">main</span></span>() &#123;</span><br><span class="line">    int *ptr = NULL;</span><br><span class="line">    myprint(ptr);</span><br><span class="line">    <span class="built_in">return</span> 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$ <span class="built_in">ulimit</span> -S -c unlimited</span><br><span class="line">$ g++ cpp_crash.cpp -o a.out -g -rdynamic -finstrument-functions</span><br><span class="line">$ ./a.out</span><br><span class="line">$ dmesg </span><br><span class="line">a.out[36921]: segfault at 0 ip 00005585d34141d1 sp 00007ffc0e9c19b0 error 4 <span class="keyword">in</span> a.out[5585d3414000+1000]</span><br><span class="line">Code: ff ff f3 0f 1e fa 55 48 89 e5 53 48 83 ec 18 48 89 7d e8 48 8b 45 08 48 89 c6 48 8d 3d e1 ff ff ff e8 c3 fe ff ff 48 8b 45 e8 &lt;8b&gt; 00 89 c6 48 8d 3d 28 0e 00 00 b8 00 00 00 00 e8 9a fe ff ff 48</span><br><span class="line"></span><br><span class="line">$ $ gdb ./a.out core</span><br><span class="line">GNU gdb (Ubuntu 9.2-0ubuntu1~20.04) 9.2</span><br><span class="line">...</span><br><span class="line">Program terminated with signal SIGSEGV, Segmentation fault.</span><br><span class="line"><span class="comment">#0  0x00005585d34141d1 in myprint (ptr=0x0) at cpp_crash.cpp:5</span></span><br><span class="line">5	    <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, *ptr);</span><br><span class="line">(gdb) </span><br><span class="line"></span><br><span class="line">$ nm -gC a.out </span><br><span class="line">0000000000004018 B __bss_start</span><br><span class="line">                 w __cxa_finalize@@GLIBC_2.2.5</span><br><span class="line">                 U __cyg_profile_func_enter@@GLIBC_2.2.5</span><br><span class="line">                 U __cyg_profile_func_exit@@GLIBC_2.2.5</span><br><span class="line">0000000000004000 D __data_start</span><br><span class="line">0000000000004000 W data_start</span><br><span class="line">0000000000004018 D _edata</span><br><span class="line">0000000000004020 B _end</span><br><span class="line">                 w __gmon_start__</span><br><span class="line">                 U __gxx_personality_v0@@CXXABI_1.3</span><br><span class="line">0000000000002000 R _IO_stdin_used</span><br><span class="line">                 w _ITM_deregisterTMCloneTable</span><br><span class="line">                 w _ITM_registerTMCloneTable</span><br><span class="line">0000000000001320 T __libc_csu_fini</span><br><span class="line">00000000000012b0 T __libc_csu_init</span><br><span class="line">                 U __libc_start_main@@GLIBC_2.2.5</span><br><span class="line">0000000000001227 T main</span><br><span class="line">                 U <span class="built_in">printf</span>@@GLIBC_2.2.5</span><br><span class="line">00000000000010c0 T _start</span><br><span class="line">                 U _Unwind_Resume@@GCC_3.0</span><br><span class="line">00000000000011a9 T myprint(int*)</span><br></pre></td></tr></table></figure>
<p>Got the issue line by gdb</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">[Mon May 10 10:57:22 2021] a.out[733]: segfault at 0 ip 000000000040092f sp 00007ffe8e80aa80 error 4 <span class="keyword">in</span> a.out[400000+1000]</span><br><span class="line"></span><br><span class="line"><span class="comment"># calculate the relative address</span></span><br><span class="line">$ gawk <span class="string">&#x27;BEGIN&#123; printf &quot;%x\n&quot;, strtonum(0x40092f-0x400000) &#125;&#x27;</span></span><br><span class="line">92f</span><br><span class="line">$ objdump -d a.out &gt; a.obj</span><br><span class="line"></span><br><span class="line"><span class="comment">## the myprint function</span></span><br><span class="line">$ grep -i 92f a.obj -A 5 -B 11</span><br><span class="line">000000000040090d &lt;_Z7myprintPi&gt;:</span><br><span class="line">  40090d:	55                   	push   %rbp</span><br><span class="line">  40090e:	48 89 e5             	mov    %rsp,%rbp</span><br><span class="line">  400911:	53                   	push   %rbx</span><br><span class="line">  400912:	48 83 ec 18          	sub    <span class="variable">$0x18</span>,%rsp</span><br><span class="line">  400916:	48 89 7d e8          	mov    %rdi,-0x18(%rbp)</span><br><span class="line">  40091a:	48 8b 45 08          	mov    0x8(%rbp),%rax</span><br><span class="line">  40091e:	48 89 c6             	mov    %rax,%rsi</span><br><span class="line">  400921:	bf 0d 09 40 00       	mov    <span class="variable">$0x40090d</span>,%edi</span><br><span class="line">  400926:	e8 b5 fe ff ff       	callq  4007e0 &lt;__cyg_profile_func_enter@plt&gt;</span><br><span class="line">  40092b:	48 8b 45 e8          	mov    -0x18(%rbp),%rax</span><br><span class="line">  40092f:	8b 00                	mov    (%rax),%eax</span><br><span class="line">  400931:	89 c6                	mov    %eax,%esi</span><br><span class="line">  400933:	bf 80 0a 40 00       	mov    <span class="variable">$0x400a80</span>,%edi</span><br><span class="line">  400938:	b8 00 00 00 00       	mov    <span class="variable">$0x0</span>,%eax</span><br><span class="line">  40093d:	e8 6e fe ff ff       	callq  4007b0 &lt;<span class="built_in">printf</span>@plt&gt;</span><br><span class="line">  400942:	48 8b 45 08          	mov    0x8(%rbp),%rax</span><br></pre></td></tr></table></figure>

<p>err 6, not exist addr     </p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> *ptr = <span class="literal">NULL</span>;</span><br><span class="line">        *ptr = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>err 6, system protect addr</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> *ptr = (<span class="keyword">int</span> *)<span class="number">0</span>;</span><br><span class="line">        *ptr = <span class="number">100</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>err 7, write readonly addr</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">        <span class="keyword">char</span> *ptr = <span class="string">&quot;test&quot;</span>;</span><br><span class="line">        <span class="built_in">strcpy</span>(ptr, <span class="string">&quot;TEST&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>err 6, stack overflow</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">        main();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h3 id="OS-settting"><a href="#OS-settting" class="headerlink" title="OS settting"></a>OS settting</h3><h4 id="Core-pattern"><a href="#Core-pattern" class="headerlink" title="Core pattern"></a>Core pattern</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">$ cat /proc/sys/kernel/core_pattern</span><br><span class="line">/usr/share/apport/apport %p %s %c %d %P %E</span><br><span class="line"><span class="comment">## kernel variable</span></span><br><span class="line">kernel.core_pattern = |/usr/share/apport/apport %p %s %c %d %P %E</span><br><span class="line"><span class="comment">#If the first character of the pattern is a &#x27;|&#x27;, the kernel will treat the rest of the pattern as a command to run.  The core dump will be written to the standard input of that program instead of to a file.</span></span><br><span class="line"></span><br><span class="line">kernel.core_pipe_limit = 0</span><br><span class="line"><span class="comment"># This sysctl is only applicable when core_pattern is configured to pipe core files to a user space helper (when the first character of core_pattern is a &#x27;|&#x27;, see above).  When collecting cores via a pipe to an application, it is occasionally useful for the collecting application to gather data about the crashing process from its /proc/pid directory.  In order to do this safely, the kernel must wait for the collecting process to exit, so as not to remove the crashing processes proc files prematurely.  This in turn creates the possibility that a misbehaving userspace collecting process can block the reaping of a crashed process simply by never exiting.  This sysctl defends against that. It defines how many concurrent crashing processes may be piped to user space applications in parallel.  If this value is exceeded, then those crashing processes above that value are noted via the kernel log and their cores are skipped.  0 is a special value, indicating that unlimited processes may be captured in parallel, but that no waiting will take place (i.e. the collecting process is not guaranteed access to `/proc/&lt;crashing pid&gt;/`).</span></span><br><span class="line"></span><br><span class="line">kernel.core_uses_pid = 0</span><br><span class="line">kernel.core_patternfs.suid_dumpable = 2</span><br><span class="line"></span><br><span class="line">$ <span class="built_in">ulimit</span> -S -c unlimited</span><br><span class="line"></span><br><span class="line"><span class="comment"># disable genarate the core file</span></span><br><span class="line">$ <span class="built_in">ulimit</span> -c n</span><br></pre></td></tr></table></figure>

<h4 id="Core-single"><a href="#Core-single" class="headerlink" title="Core single"></a>Core single</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br></pre></td><td class="code"><pre><span class="line">  Standard signals</span><br><span class="line">       Linux supports the standard signals listed below.  Several signal  numbers  are  architecture-dependent,  as</span><br><span class="line">       indicated  <span class="keyword">in</span>  the  <span class="string">&quot;Value&quot;</span> column.  (Where three values are given, the first one is usually valid <span class="keyword">for</span> alpha</span><br><span class="line">       and sparc, the middle one <span class="keyword">for</span> x86, arm, and most other architectures, and the last one  <span class="keyword">for</span>  mips.   (Values</span><br><span class="line">       <span class="keyword">for</span>  parisc  are  not shown; see the Linux kernel <span class="built_in">source</span> <span class="keyword">for</span> signal numbering on that architecture.)  A dash</span><br><span class="line">       (-) denotes that a signal is absent on the corresponding architecture.</span><br><span class="line"></span><br><span class="line">       First the signals described <span class="keyword">in</span> the original POSIX.1-1990 standard.</span><br><span class="line"></span><br><span class="line">       Signal     Value     Action   Comment</span><br><span class="line">       ──────────────────────────────────────────────────────────────────────</span><br><span class="line">       SIGQUIT       3       Core    Quit from keyboard</span><br><span class="line">       SIGILL        4       Core    Illegal Instruction</span><br><span class="line">       SIGABRT       6       Core    Abort signal from abort(3)</span><br><span class="line">       SIGFPE        8       Core    Floating-point exception</span><br><span class="line">       SIGSEGV      11       Core    Invalid memory reference</span><br><span class="line"></span><br><span class="line">       The signals SIGKILL and SIGSTOP cannot be caught, blocked, or ignored.</span><br><span class="line"></span><br><span class="line">       Next the signals not <span class="keyword">in</span> the POSIX.1-1990 standard but described <span class="keyword">in</span> SUSv2 and POSIX.1-2001.</span><br><span class="line"></span><br><span class="line">       Signal       Value     Action   Comment</span><br><span class="line">       ────────────────────────────────────────────────────────────────────</span><br><span class="line">       SIGBUS      10,7,10     Core    Bus error (bad memory access)</span><br><span class="line">       SIGSYS      12,31,12    Core    Bad system call (SVr4);</span><br><span class="line">                                       see also seccomp(2)</span><br><span class="line">       SIGTRAP        5        Core    Trace/breakpoint <span class="built_in">trap</span></span><br><span class="line">       SIGXCPU     24,24,30    Core    CPU time <span class="built_in">limit</span> exceeded (4.2BSD);</span><br><span class="line">                                       see setrlimit(2)</span><br><span class="line">       SIGXFSZ     25,25,31    Core    File size <span class="built_in">limit</span> exceeded (4.2BSD);</span><br><span class="line">                                       see setrlimit(2)</span><br><span class="line">       Up to and including Linux 2.2, the default behavior <span class="keyword">for</span> SIGSYS,  SIGXCPU,  SIGXFSZ,  and  (on  architectures</span><br><span class="line">       other  than  SPARC and MIPS) SIGBUS was to terminate the process (without a core dump).  (On some other UNIX</span><br><span class="line">       systems the default action <span class="keyword">for</span> SIGXCPU and SIGXFSZ is to terminate the process without a core dump.)   Linux</span><br><span class="line">       2.4 conforms to the POSIX.1-2001 requirements <span class="keyword">for</span> these signals, terminating the process with a core dump.</span><br><span class="line"></span><br><span class="line">       Next various other signals.</span><br><span class="line"></span><br><span class="line">       Signal       Value     Action   Comment</span><br><span class="line">       ────────────────────────────────────────────────────────────────────</span><br><span class="line">       SIGIOT         6        Core    IOT <span class="built_in">trap</span>. A synonym <span class="keyword">for</span> SIGABRT</span><br><span class="line">       SIGUNUSED    -,31,-     Core    Synonymous with SIGSYS</span><br><span class="line"></span><br><span class="line">       (Signal 29 is SIGINFO / SIGPWR on an alpha but SIGLOST on a sparc.)</span><br><span class="line"></span><br><span class="line">       SIGEMT  is  not  specified  <span class="keyword">in</span>  POSIX.1-2001, but nevertheless appears on most other UNIX systems, <span class="built_in">where</span> its</span><br><span class="line">       default action is typically to terminate the process with a core dump.</span><br><span class="line"></span><br><span class="line">       SIGPWR (<span class="built_in">which</span> is not specified <span class="keyword">in</span> POSIX.1-2001) is typically ignored by default on those other UNIX  systems</span><br><span class="line">       <span class="built_in">where</span> it appears.</span><br><span class="line"></span><br><span class="line">       SIGIO (<span class="built_in">which</span> is not specified <span class="keyword">in</span> POSIX.1-2001) is ignored by default on several other UNIX systems.</span><br><span class="line"></span><br><span class="line">       Where defined, SIGUNUSED is synonymous with SIGSYS on most architectures.  Since glibc 2.26, SIGUNUSED is no</span><br><span class="line">       longer defined on any architecture.</span><br><span class="line"></span><br><span class="line">$ <span class="built_in">kill</span> -l</span><br><span class="line"> 1) SIGHUP   2) SIGINT   3) SIGQUIT  4) SIGILL   5) SIGTRAP</span><br><span class="line"> 6) SIGABRT  7) SIGBUS   8) SIGFPE   9) SIGKILL 10) SIGUSR1</span><br><span class="line">11) SIGSEGV 12) SIGUSR2 13) SIGPIPE 14) SIGALRM 15) SIGTERM</span><br><span class="line">16) SIGSTKFLT   17) SIGCHLD 18) SIGCONT 19) SIGSTOP 20) SIGTSTP</span><br><span class="line">21) SIGTTIN 22) SIGTTOU 23) SIGURG  24) SIGXCPU 25) SIGXFSZ</span><br><span class="line">26) SIGVTALRM   27) SIGPROF 28) SIGWINCH    29) SIGIO   30) SIGPWR</span><br><span class="line">31) SIGSYS  34) SIGRTMIN    35) SIGRTMIN+1  36) SIGRTMIN+2  37) SIGRTMIN+3</span><br><span class="line">38) SIGRTMIN+4  39) SIGRTMIN+5  40) SIGRTMIN+6  41) SIGRTMIN+7  42) SIGRTMIN+8</span><br><span class="line">43) SIGRTMIN+9  44) SIGRTMIN+10 45) SIGRTMIN+11 46) SIGRTMIN+12 47) SIGRTMIN+13</span><br><span class="line">48) SIGRTMIN+14 49) SIGRTMIN+15 50) SIGRTMAX-14 51) SIGRTMAX-13 52) SIGRTMAX-12</span><br><span class="line">53) SIGRTMAX-11 54) SIGRTMAX-10 55) SIGRTMAX-9  56) SIGRTMAX-8  57) SIGRTMAX-7</span><br><span class="line">58) SIGRTMAX-6  59) SIGRTMAX-5  60) SIGRTMAX-4  61) SIGRTMAX-3  62) SIGRTMAX-2</span><br><span class="line">63) SIGRTMAX-1  64) SIGRTMAX</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">SigPnd: 0000000000000000: Signals Pending (Raised, but waiting to be acted upon potentially because they are blocked).</span><br><span class="line">SigBlk: 0000000056727a01: Signals that are blocked by the process. This can be a temporary thing. The application can be coded <span class="keyword">in</span> such a way to temporarily block a signal. The kernel will <span class="keyword">then</span> delay delivery of that signal until such time as it becomes unblocked or the signals are asked to be delivered.</span><br><span class="line">SigIgn: 0000000000381000: Signals that are ignored by the process. They are simply thrown away. (Except <span class="keyword">for</span> SIGKILL and SIGSTOP, <span class="built_in">which</span> cannot be ignored)</span><br><span class="line">SigCgt: 000000004b817efb: Signals that can be caught by the process.</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> 4b817efb | xxd -r -p | xxd -b</span><br><span class="line">01001011 10000001 01111110 11111011</span><br><span class="line"> |  | || |      |  ||||||  ||||| ||</span><br><span class="line"> |  | || |      |  ||||||  ||||| |+--  1 SIGHUP (hangup)</span><br><span class="line"> |  | || |      |  ||||||  ||||| +---  2 SIGINT (interrupt)</span><br><span class="line"> |  | || |      |  ||||||  ||||+-----  4 SIGILL (illegal instruction)</span><br><span class="line"> |  | || |      |  ||||||  |||+------  5 SIGTRAP (trace/<span class="built_in">trap</span>)</span><br><span class="line"> |  | || |      |  ||||||  ||+-------  6 SIGABRT (abort)</span><br><span class="line"> |  | || |      |  ||||||  |+--------  7 SIGEMT (emulation <span class="built_in">trap</span>)</span><br><span class="line"> |  | || |      |  ||||||  +---------  8 SIGFPE (floating point exception)</span><br><span class="line"> |  | || |      |  |||||+------------ 10 SIGBUS (bus error)</span><br><span class="line"> |  | || |      |  ||||+------------- 11 SIGSEGV (segmentation violation)</span><br><span class="line"> |  | || |      |  |||+-------------- 12 SIGSYS (bad system call)</span><br><span class="line"> |  | || |      |  ||+--------------- 13 SIGPIPE (broken pipe)</span><br><span class="line"> |  | || |      |  |+---------------- 14 SIGALRM (alarm)</span><br><span class="line"> |  | || |      |  +----------------- 15 SIGTERM (termination)</span><br><span class="line"> |  | || |      +-------------------- 17 SIGUSR2 (user signal 2)</span><br><span class="line"> |  | || +--------------------------- 24 SIGTSTP (stop -- can be ignored)</span><br><span class="line"> |  | |+----------------------------- 25 SIGCONT (<span class="built_in">continue</span>)</span><br><span class="line"> |  | +------------------------------ 26 SIGTTIN (terminal input)</span><br><span class="line"> |  +-------------------------------- 28 SIGVTALRM (timer expiration)</span><br><span class="line"> +----------------------------------- 31 SIGXFSZ (file size exceeded)</span><br><span class="line"></span><br><span class="line">cat /proc/<span class="variable">$pid</span>/status | grep Sig</span><br><span class="line">SigQ:	6/513952</span><br><span class="line">SigPnd:	0000000000040100</span><br><span class="line">SigBlk:	0000000000000000</span><br><span class="line">SigIgn:	0000000000000000</span><br><span class="line">SigCgt:	0000000180000000</span><br></pre></td></tr></table></figure>

<h5 id="Test-SIGSEGV"><a href="#Test-SIGSEGV" class="headerlink" title="Test SIGSEGV"></a><a target="_blank" rel="noopener" href="http://blog.cuicc.com/blog/2012/09/17/core-dump-and-backtrace/">Test SIGSEGV</a></h5><ul>
<li>kill -11 $pid means send the SIGSEGV to trigger the segment fault</li>
<li>define the invaid point signal code=128 (SI_KERNEL)<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> *foo = (<span class="keyword">int</span> *)<span class="number">-1</span>;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, *foo);</span><br></pre></td></tr></table></figure></li>
<li>define the empty point and evaluation signal code=1 (SEGV_MAPERR)<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> *foo = <span class="literal">NULL</span>;</span><br><span class="line">*foo = <span class="number">0</span>;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, *foo);</span><br></pre></td></tr></table></figure></li>
<li>Malloc the memory and protect it (signal code=2 (SEGV_ACCERR))<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/mman.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">char</span> *foo;</span><br><span class="line">posix_memalign(&amp;foo, getpagesize(), getpagesize());</span><br><span class="line"><span class="built_in">memset</span>(foo, <span class="string">&#x27;A&#x27;</span>, getpagesize());</span><br><span class="line">mprotect(foo, getpagesize(), PROT_NONE);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, foo[<span class="number">0</span>]);</span><br></pre></td></tr></table></figure>


</li>
</ul>
<h4 id="Enable-ptrace-permissions"><a href="#Enable-ptrace-permissions" class="headerlink" title="Enable ptrace permissions"></a>Enable ptrace permissions</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">cat /etc/sysctl.d/10-ptrace.conf</span><br><span class="line">kernel.yama.ptrace_scope = 0</span><br><span class="line"></span><br><span class="line">0 - classic ptrace permissions: a process can PTRACE_ATTACH to any other</span><br><span class="line">    process running under the same uid, as long as it is dumpable (i.e.</span><br><span class="line">    did not transition uids, start privileged, or have called</span><br><span class="line">    prctl(PR_SET_DUMPABLE...) already). Similarly, PTRACE_TRACEME is</span><br><span class="line">    unchanged.</span><br><span class="line"></span><br><span class="line">1 - restricted ptrace: a process must have a predefined relationship</span><br><span class="line">    with the inferior it wants to call PTRACE_ATTACH on. By default,</span><br><span class="line">    this relationship is that of only its descendants when the above</span><br><span class="line">    classic criteria is also met. To change the relationship, an</span><br><span class="line">    inferior can call prctl(PR_SET_PTRACER, debugger, ...) to <span class="built_in">declare</span></span><br><span class="line">    an allowed debugger PID to call PTRACE_ATTACH on the inferior.</span><br><span class="line">    Using PTRACE_TRACEME is unchanged.</span><br><span class="line"></span><br><span class="line">2 - admin-only attach: only processes with CAP_SYS_PTRACE may use ptrace</span><br><span class="line">    with PTRACE_ATTACH, or through children calling PTRACE_TRACEME.</span><br><span class="line"></span><br><span class="line">3 - no attach: no processes may use ptrace with PTRACE_ATTACH nor via</span><br><span class="line">    PTRACE_TRACEME. Once <span class="built_in">set</span>, this sysctl value cannot be changed.</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="Genarate-the-debug-info"><a href="#Genarate-the-debug-info" class="headerlink" title="Genarate the debug info"></a>Genarate the debug info</h3><ul>
<li>-g produces debugging information in theOS native format</li>
<li>-ggdb produces debugging information specifically intennded for gdb</li>
<li>-ggdb3 produces extra debugging information, for example: including macro definitions</li>
<li>wall means enable warnning</li>
<li>-O0  turn off all optimization</li>
<li>-O1 ,-O2, -O3  optimization<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ ./configure CFLAGS=<span class="string">&quot;-Wall -O2 -ggdb3&quot;</span></span><br><span class="line">``` </span><br><span class="line"></span><br><span class="line"><span class="comment">### Genarate the core file</span></span><br><span class="line">usage:  gcore [-a] [-o filename] pid</span><br><span class="line">```bash</span><br><span class="line">$ gcore -o /tmp/core -p <span class="variable">$pid</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
<p>for the kernel</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> c &gt; /proc/sysrq-trigger</span><br></pre></td></tr></table></figure>

<h3 id="ubuntu"><a href="#ubuntu" class="headerlink" title="ubuntu"></a>ubuntu</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt install ubuntu-dbgsym-keyring</span><br></pre></td></tr></table></figure>

<h3 id="Open-the-core-file"><a href="#Open-the-core-file" class="headerlink" title="Open the core file"></a>Open the core file</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">$ gdb ./a.out ./bubble_sort_core</span><br><span class="line"></span><br><span class="line">GNU gdb (Ubuntu 8.1-0ubuntu3.2) 8.1.0.20180409-git</span><br><span class="line">Copyright (C) 2018 Free Software Foundation, Inc.</span><br><span class="line">License GPLv3+: GNU GPL version 3 or later &lt;http://gnu.org/licenses/gpl.html&gt;</span><br><span class="line">This is free software: you are free to change and redistribute it.</span><br><span class="line">There is NO WARRANTY, to the extent permitted by law.  Type <span class="string">&quot;show copying&quot;</span></span><br><span class="line">and <span class="string">&quot;show warranty&quot;</span> <span class="keyword">for</span> details.</span><br><span class="line">This GDB was configured as <span class="string">&quot;x86_64-linux-gnu&quot;</span>.</span><br><span class="line">Type <span class="string">&quot;show configuration&quot;</span> <span class="keyword">for</span> configuration details.</span><br><span class="line">For bug reporting instructions, please see:</span><br><span class="line">&lt;http://www.gnu.org/software/gdb/bugs/&gt;.</span><br><span class="line">Find the GDB manual and other documentation resources online at:</span><br><span class="line">&lt;http://www.gnu.org/software/gdb/documentation/&gt;.</span><br><span class="line">For <span class="built_in">help</span>, <span class="built_in">type</span> <span class="string">&quot;help&quot;</span>.</span><br><span class="line">Type <span class="string">&quot;apropos word&quot;</span> to search <span class="keyword">for</span> commands related to <span class="string">&quot;word&quot;</span>...</span><br><span class="line">Reading symbols from ./a.out...done.</span><br><span class="line">[New LWP 20410]</span><br><span class="line">Core was generated by `./a.out<span class="string">&#x27;.</span></span><br><span class="line"><span class="string">Program terminated with signal SIGABRT, Aborted.</span></span><br><span class="line"><span class="string">#0  __GI_raise (sig=sig@entry=6) at ../sysdeps/unix/sysv/linux/raise.c:51</span></span><br><span class="line"><span class="string">51	../sysdeps/unix/sysv/linux/raise.c: No such file or directory.</span></span><br></pre></td></tr></table></figure>

<h3 id="attach-the-process"><a href="#attach-the-process" class="headerlink" title="attach the process"></a>attach the process</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ gdb attach <span class="variable">$PID</span></span><br><span class="line">$ gdb ./the_programA_binray <span class="variable">$pid_of_the_programA</span></span><br></pre></td></tr></table></figure>

<h3 id="gdb-basic-cmd"><a href="#gdb-basic-cmd" class="headerlink" title="gdb basic cmd"></a>gdb basic cmd</h3><p>break<br>break +offset<br>break -offset<br>break linenum<br>break filename:linenum<br>break func_name<br>break filename:func_name<br>break *address<br>break … if <condition><br>break where if </p>
<p>(gdb) break *func_b+0x23<br>Breakpoint 1 at 0x804898f: file backtrace.c, line 59.</p>
<p>display ## ultra print</p>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#<span class="meta"># not work</span></span><br><span class="line"><span class="keyword">break</span> foo <span class="keyword">if</span> i&gt;<span class="number">0</span></span><br><span class="line">commands</span><br><span class="line"><span class="built_in">printf</span> <span class="string">&quot;i is %d\n&quot;</span>, i</span><br><span class="line"><span class="keyword">continue</span></span><br><span class="line"><span class="built_in">end</span></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">b func_name <span class="keyword">if</span> var_name == 5</span><br></pre></td></tr></table></figure>

<p>info break (i b)<br>i b n</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">(gdb) b main</span><br><span class="line">Breakpoint 1 at 0x564b218ff830: file ./bubble_sort_bug.c, line 29.</span><br><span class="line">(gdb) b <span class="built_in">exit</span></span><br><span class="line">Breakpoint 2 at 0x7f258be23120: file exit.c, line 139.</span><br><span class="line">(gdb) i b</span><br><span class="line">Num     Type           Disp Enb Address            What</span><br><span class="line">1       breakpoint     keep y   0x0000564b218ff830 <span class="keyword">in</span> main at ./bubble_sort_bug.c:29</span><br><span class="line">2       breakpoint     keep y   0x00007f258be23120 <span class="keyword">in</span> __GI_exit at exit.c:139</span><br><span class="line">(gdb) i b 2</span><br><span class="line">Num     Type           Disp Enb Address            What</span><br><span class="line">2       breakpoint     keep y   0x00007f258be23120 <span class="keyword">in</span> __GI_exit at exit.c:139</span><br><span class="line">(gdb) b main <span class="keyword">if</span> i==1</span><br><span class="line">Breakpoint 4 at 0x555555554830: file ./bubble_sort_bug.c, line 29.</span><br></pre></td></tr></table></figure>

<p>watch var   It is stopped by the gdb after the write has occurred<br>rwatch var  It is stopped by the gdb after the read has occurred<br>awatch var  It is stopped by the gdb after the read and write have occurred</p>
<p>step  (in function0<br>next  (not go to function)</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">(gdb) info b</span><br><span class="line">No breakpoints or watchpoints.</span><br><span class="line">(gdb) watch a <span class="keyword">if</span> a==5 </span><br><span class="line">Hardware watchpoint 3: a</span><br><span class="line">(gdb) info b</span><br><span class="line">Num     Type           Disp Enb Address            What</span><br><span class="line">3       hw watchpoint  keep y                      a</span><br><span class="line">	stop only <span class="keyword">if</span> a==5</span><br><span class="line">(gdb) c</span><br><span class="line">Continuing.</span><br><span class="line"></span><br><span class="line">Thread 2 <span class="string">&quot;a.out&quot;</span> hit Hardware watchpoint 3: a</span><br><span class="line"></span><br><span class="line">Old value = 4</span><br><span class="line">New value = 5</span><br><span class="line">thread1_func (p_arg=0x555555554844) at thread1.c:10</span><br><span class="line">10	                sleep(10);</span><br><span class="line">(gdb)</span><br><span class="line"></span><br><span class="line">(gdb) info watchpoints</span><br><span class="line">Num     Type           Disp Enb Address            What</span><br><span class="line">3       hw watchpoint  keep y                      a</span><br><span class="line">	stop only <span class="keyword">if</span> a==5</span><br><span class="line">	breakpoint already hit 1 time</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">(gdb) watch 0x600850</span><br><span class="line">Cannot watch constant value 0x600850.</span><br><span class="line">(gdb) watch *(int *) 0x600850</span><br><span class="line">Watchpoint 1: *(int *) 6293584 </span><br></pre></td></tr></table></figure>

<p>catch <event><br>tcatch <event>  (temp catch)<br>event: throw,catch,exec,fork,load,unload,exception,exception unhandled,assert,syscall [name | number ],</p>
<p>(gdb) catch syscall open<br>Catchpoint 7 (syscall ‘open’ [2])<br>(gdb) catch syscall 5<br>Catchpoint 8 (syscall ‘fstat’ [5])<br>(gdb) help catch syscall<br>Catch system calls by their names, groups and/or numbers.<br>Arguments say which system calls to catch.  If no arguments are given,<br>every system call will be caught.  Arguments, if given, should be one<br>or more system call names (if your system supports that), system call<br>groups or system call numbers.</p>
<p>for more syscall<br>/usr/include/x86_64-linux-gnu/asm/unistd_64.h</p>
<p>clear #clear all<br>clear function<br>clear linenum</p>
<p>delete beakpoints [range,eg: 1-5]</p>
<p>enable/disable breakpoints [range]<br>enable breakpoints once range<br>enable breakpoints delete range</p>
<p>set logging file the_log_filename<br>set logging on/off<br>set env PATH=/tmp/bin<br>set listsize 25</p>
<h1 id="set-print-variable-length"><a href="#set-print-variable-length" class="headerlink" title="set print variable length"></a>set print variable length</h1><p>set print elements 250<br>set print elements 0 #no limit</p>
<p>set step-mode on<br>This is useful in cases where you may be interested in inspecting the machine instructions of a function which has no symbolic info and do not want GDB to automatically skip over this function.</p>
<p>save br .gdb_20200601<br>-x .gdb_20200601</p>
<p>finish<br>Continue running until just after function in the selected stack frame returns. Print the returned value (if any). This command can be abbreviated as fin.</p>
<p>return</p>
<p>print expr<br>Evaluate the expression expr and display the resulting value. The expression may include calls to functions in the program being debugged.</p>
<p>call expr<br>Evaluate the expression expr without displaying void returned values.<br>You can use this variant of the print command if you want to execute a function from your program that does not return anything (a.k.a. a void function), but without cluttering the output with void returned values that GDB will otherwise print. If the result is not void, it is printed and saved in the value history.<br>It is possible for the function you call via the print or call command to generate a signal (e.g., if there’s a bug in the function, or if you passed it incorrect arguments). What happens in that case is controlled by the set unwindonsignal command.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">(gdb) bt</span><br><span class="line"><span class="comment">#0  __GI_raise (sig=sig@entry=6) at ../sysdeps/unix/sysv/linux/raise.c:51</span></span><br><span class="line"><span class="comment">#1  0x00007f258be20801 in __GI_abort () at abort.c:79</span></span><br><span class="line"><span class="comment">#2  0x00007f258be69897 in __libc_message (action=action@entry=do_abort, </span></span><br><span class="line">    fmt=fmt@entry=0x7f258bf96988 <span class="string">&quot;*** %s ***: %s terminated\n&quot;</span>) at ../sysdeps/posix/libc_fatal.c:181</span><br><span class="line"><span class="comment">#3  0x00007f258bf14cd1 in __GI___fortify_fail_abort (need_backtrace=need_backtrace@entry=false, </span></span><br><span class="line">    msg=msg@entry=0x7f258bf96966 <span class="string">&quot;stack smashing detected&quot;</span>) at fortify_fail.c:33</span><br><span class="line"><span class="comment">#4  0x00007f258bf14c92 in __stack_chk_fail () at stack_chk_fail.c:29</span></span><br><span class="line"><span class="comment">#5  0x0000564b218ff8e9 in main () at ./bubble_sort_bug.c:43</span></span><br><span class="line"></span><br><span class="line">(gdb) f 2</span><br><span class="line"><span class="comment">#2  0x00007f258be69897 in __libc_message (action=action@entry=do_abort, </span></span><br><span class="line">    fmt=fmt@entry=0x7f258bf96988 <span class="string">&quot;*** %s ***: %s terminated\n&quot;</span>) at ../sysdeps/posix/libc_fatal.c:181</span><br><span class="line">181	../sysdeps/posix/libc_fatal.c: No such file or directory.</span><br><span class="line">(gdb) up</span><br><span class="line"><span class="comment">#3  0x00007f258bf14cd1 in __GI___fortify_fail_abort (need_backtrace=need_backtrace@entry=false, </span></span><br><span class="line">    msg=msg@entry=0x7f258bf96966 <span class="string">&quot;stack smashing detected&quot;</span>) at fortify_fail.c:33</span><br><span class="line">33	fortify_fail.c: No such file or directory.</span><br><span class="line">(gdb) down</span><br><span class="line"><span class="comment">#2  0x00007f258be69897 in __libc_message (action=action@entry=do_abort, </span></span><br><span class="line">    fmt=fmt@entry=0x7f258bf96988 <span class="string">&quot;*** %s ***: %s terminated\n&quot;</span>) at ../sysdeps/posix/libc_fatal.c:181</span><br><span class="line">181	../sysdeps/posix/libc_fatal.c: No such file or directory.</span><br><span class="line"></span><br><span class="line">(gdb) f 5</span><br><span class="line"><span class="comment">#5  0x0000564b218ff8e9 in main () at ./bubble_sort_bug.c:43</span></span><br><span class="line">43	&#125;</span><br><span class="line">(gdb) info f</span><br><span class="line">Stack level 5, frame at 0x7ffd58ea9f80:</span><br><span class="line"> rip = 0x564b218ff8e9 <span class="keyword">in</span> main (./bubble_sort_bug.c:43); saved rip = 0x7f258be01b97</span><br><span class="line"> <span class="built_in">caller</span> of frame at 0x7ffd58ea9e40</span><br><span class="line"> <span class="built_in">source</span> language c.</span><br><span class="line"> Arglist at 0x7ffd58ea9f70, args: </span><br><span class="line"> Locals at 0x7ffd58ea9f70, Previous frame<span class="string">&#x27;s sp is 0x7ffd58ea9f80</span></span><br><span class="line"><span class="string"> Saved registers:</span></span><br><span class="line"><span class="string">  rbx at 0x7ffd58ea9f68, rbp at 0x7ffd58ea9f70, rip at 0x7ffd58ea9f78</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">(gdb) info args</span></span><br><span class="line"><span class="string">No arguments.</span></span><br><span class="line"><span class="string">(gdb) info locals</span></span><br><span class="line"><span class="string">array = &#123;20424913, 207764369, 232957269, 286304630, 340051919, 418929367, 428095442, 560929304, 622631137, </span></span><br><span class="line"><span class="string">  681405812, 702646332, 717507172, 771731937, 844764348, 871741416, 893622553, 939367001, 953569863, 983680782, </span></span><br><span class="line"><span class="string">  1133421906, 1150235085, 1170267861, 1267699692, 1278859841, 1351132359, 1478380837, 1618765791, 1747714870, </span></span><br><span class="line"><span class="string">  2015283722, 2027462427, 2046956728, 2080576919&#125;</span></span><br><span class="line"><span class="string">i = 36</span></span><br></pre></td></tr></table></figure>

<p>info</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">(gdb) info <span class="built_in">functions</span> thread1_func </span><br><span class="line">All <span class="built_in">functions</span> matching regular expression <span class="string">&quot;thread1_func&quot;</span>:</span><br><span class="line"></span><br><span class="line">File thread1.c:</span><br><span class="line">void *thread1_func(void *);</span><br></pre></td></tr></table></figure>

<p>print</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br></pre></td><td class="code"><pre><span class="line">(gdb) list</span><br><span class="line">1	<span class="comment">#include &lt;stdio.h&gt;</span></span><br><span class="line">2	<span class="comment">#include &lt;string.h&gt;</span></span><br><span class="line">3</span><br><span class="line">4	void printArray(int arr[], int n)</span><br><span class="line">5	&#123;</span><br><span class="line">6	   <span class="keyword">for</span> (int i=0; i&lt;n; i++) &#123;</span><br><span class="line">7	     arr[i]=arr[i]+i;</span><br><span class="line">8	     <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>, arr[i]);</span><br><span class="line">9	   &#125;</span><br><span class="line">10	&#125;</span><br><span class="line">11</span><br><span class="line">12	int main()</span><br><span class="line">13	&#123;</span><br><span class="line">14	    int n = 10;</span><br><span class="line">15	    int arr[n];</span><br><span class="line">16</span><br><span class="line">17	    // Fill whole array with 100.</span><br><span class="line">18	    memset(arr, 10, n*sizeof(arr[0]));</span><br><span class="line">19	    <span class="built_in">printf</span>(<span class="string">&quot;Array after memset()\n&quot;</span>);</span><br><span class="line">20	    printArray(arr, n);</span><br><span class="line">21</span><br><span class="line">22	    <span class="built_in">return</span> 0;</span><br><span class="line">23	&#125;</span><br><span class="line"></span><br><span class="line">(gdb) info b</span><br><span class="line">Num     Type           Disp Enb Address            What</span><br><span class="line">1       breakpoint     keep y   0x00000000004005d5 <span class="keyword">in</span> printArray at test2.c:7</span><br><span class="line">	breakpoint already hit 10 <span class="built_in">times</span></span><br><span class="line">(gdb) c</span><br><span class="line">Continuing.</span><br><span class="line"></span><br><span class="line">Breakpoint 1, printArray (arr=0x7fffffffe0d0, n=10) at test2.c:7</span><br><span class="line">7	     arr[i]=arr[i]+i;</span><br><span class="line">(gdb) <span class="built_in">print</span> arr</span><br><span class="line"><span class="variable">$13</span> = (int *) 0x7fffffffe0d0</span><br><span class="line">(gdb) <span class="built_in">print</span> *arr</span><br><span class="line"><span class="variable">$14</span> = 168430090</span><br><span class="line">(gdb) <span class="built_in">print</span> *arr@</span><br><span class="line">A syntax error <span class="keyword">in</span> expression, near `<span class="string">&#x27;.</span></span><br><span class="line"><span class="string">(gdb) bt full</span></span><br><span class="line"><span class="string">#0  printArray (arr=0x7fffffffe0d0, n=10) at test2.c:7</span></span><br><span class="line"><span class="string">        i = 3</span></span><br><span class="line"><span class="string">#1  0x00000000004006ec in main () at test2.c:20</span></span><br><span class="line"><span class="string">        n = 10</span></span><br><span class="line"><span class="string">        arr = &#123;168430090, 168430091, 168430092, 168430090, 168430090, 168430090, 168430090, 168430090, 168430090, 168430090&#125;</span></span><br><span class="line"><span class="string">(gdb) p i</span></span><br><span class="line"><span class="string">$15 = 4</span></span><br><span class="line"><span class="string">(gdb) p arr[i]</span></span><br><span class="line"><span class="string">$16 = 168430090</span></span><br><span class="line"><span class="string">(gdb) p arr[20]</span></span><br><span class="line"><span class="string">$17 = -7664</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">(gdb) c</span></span><br><span class="line"><span class="string">Continuing.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Breakpoint 1, printArray (arr=0x7fffffffe0d0, n=10) at test2.c:7</span></span><br><span class="line"><span class="string">7	     arr[i]=arr[i]+i;</span></span><br><span class="line"><span class="string">(gdb) p i</span></span><br><span class="line"><span class="string">$20 = 5</span></span><br><span class="line"><span class="string">(gdb) set arr[4]=125</span></span><br><span class="line"><span class="string">(gdb) bt full</span></span><br><span class="line"><span class="string">#0  printArray (arr=0x7fffffffe0d0, n=10) at test2.c:7</span></span><br><span class="line"><span class="string">        i = 5</span></span><br><span class="line"><span class="string">#1  0x00000000004006ec in main () at test2.c:20</span></span><br><span class="line"><span class="string">        n = 10</span></span><br><span class="line"><span class="string">        arr = &#123;168430090, 168430091, 168430092, 168430093, 125, 168430090, 168430090, 168430090, 168430090, 168430090&#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">(gdb) c</span></span><br><span class="line"><span class="string">Continuing.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Breakpoint 1, printArray (arr=0x7fffffffe0d0, n=10) at test2.c:7</span></span><br><span class="line"><span class="string">7	     arr[i]=arr[i]+i;</span></span><br><span class="line"><span class="string">(gdb) bt full</span></span><br><span class="line"><span class="string">#0  printArray (arr=0x7fffffffe0d0, n=10) at test2.c:7</span></span><br><span class="line"><span class="string">        i = 6</span></span><br><span class="line"><span class="string">#1  0x00000000004006ec in main () at test2.c:20</span></span><br><span class="line"><span class="string">        n = 10</span></span><br><span class="line"><span class="string">        arr = &#123;168430090, 168430091, 168430092, 168430093, 168430094, 168430095, 168430090, 168430090, 168430090, 168430090&#125;</span></span><br><span class="line"><span class="string">(gdb) p i</span></span><br><span class="line"><span class="string">No symbol &quot;i&quot; in current context.</span></span><br><span class="line"><span class="string">(gdb) p $i</span></span><br><span class="line"><span class="string">$24 = 5</span></span><br><span class="line"><span class="string">(gdb) set arr[$i]=10</span></span><br><span class="line"><span class="string">(gdb) set arr[$i++]=11</span></span><br><span class="line"><span class="string">(gdb) p arr[5]</span></span><br><span class="line"><span class="string">$26 = 10</span></span><br><span class="line"><span class="string">(gdb) p arr[6]</span></span><br><span class="line"><span class="string">$27 = 11</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">(gdb) p/t arr[6]</span></span><br><span class="line"><span class="string">$28 = 1011</span></span><br><span class="line"><span class="string">(gdb) p/x arr[6]</span></span><br><span class="line"><span class="string">$29 = 0xb</span></span><br><span class="line"><span class="string">(gdb) p/f arr[6]</span></span><br><span class="line"><span class="string">$30 = 1.54142831e-44</span></span><br><span class="line"><span class="string">(gdb) p/c arr[6]</span></span><br><span class="line"><span class="string">$31 = 11 &#x27;</span>\v<span class="string">&#x27;</span></span><br><span class="line"><span class="string">(gdb) p/d arr[6]</span></span><br><span class="line"><span class="string">$32 = 11</span></span><br><span class="line"><span class="string">(gdb) p/o arr[6]</span></span><br><span class="line"><span class="string">$33 = 013</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">examine (x command)</span></span><br><span class="line"><span class="string">(gdb) p arr</span></span><br><span class="line"><span class="string">$37 = &#123;168430090, 168430091, 168430092, 168430093, 168430094, 10, 11, 168430090, 168430090, 168430090&#125;</span></span><br><span class="line"><span class="string">      __________ same with print format</span></span><br><span class="line"><span class="string">      |</span></span><br><span class="line"><span class="string">x/[n][f][u]</span></span><br><span class="line"><span class="string">   |     |</span></span><br><span class="line"><span class="string"> number  -------------- b. Bytes. h. Halfwords (two bytes). w. Words (four bytes) This is the initial default.  g. Giant words (eight bytes)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">(gdb) x/10d arr</span></span><br><span class="line"><span class="string">0x7fffffffe0d0:	168430090	168430091	168430092	168430093</span></span><br><span class="line"><span class="string">0x7fffffffe0e0:	168430094	10	11	168430090</span></span><br><span class="line"><span class="string">0x7fffffffe0f0:	168430090	168430090</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">(gdb) info reg</span></span><br><span class="line"><span class="string">rax            0x400aaae297396d09	4614688658370948361</span></span><br><span class="line"><span class="string">rbx            0x7fffffffe100	140737488347392</span></span><br><span class="line"><span class="string">rcx            0x7fffdfafe9b0	140736946235824</span></span><br><span class="line"><span class="string">rdx            0xa	10</span></span><br><span class="line"><span class="string">rsi            0xa	10</span></span><br><span class="line"><span class="string">rdi            0x7fffffffe0d0	140737488347344</span></span><br><span class="line"><span class="string">rbp            0x7fffffffe0c0	0x7fffffffe0c0</span></span><br><span class="line"><span class="string">rsp            0x7fffffffe090	0x7fffffffe090</span></span><br><span class="line"><span class="string">r8             0xffffffffffffffff	-1</span></span><br><span class="line"><span class="string">r9             0x0	0</span></span><br><span class="line"><span class="string">r10            0x22	34</span></span><br><span class="line"><span class="string">r11            0x246	582</span></span><br><span class="line"><span class="string">r12            0x4004d0	4195536</span></span><br><span class="line"><span class="string">r13            0x7fffffffe210	140737488347664</span></span><br><span class="line"><span class="string">r14            0x0	0</span></span><br><span class="line"><span class="string">r15            0x0	0</span></span><br><span class="line"><span class="string">rip            0x4005da	0x4005da &lt;printArray+29&gt;</span></span><br><span class="line"><span class="string">eflags         0x206	[ PF IF ]</span></span><br><span class="line"><span class="string">cs             0x33	51</span></span><br><span class="line"><span class="string">ss             0x2b	43</span></span><br><span class="line"><span class="string">ds             0x0	0</span></span><br><span class="line"><span class="string">es             0x0	0</span></span><br><span class="line"><span class="string">fs             0x0	0</span></span><br><span class="line"><span class="string">gs             0x0	0</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">(gdb) list</span></span><br><span class="line"><span class="string">1	#include &lt;stdio.h&gt;</span></span><br><span class="line"><span class="string">2	int main()</span></span><br><span class="line"><span class="string">3	&#123;</span></span><br><span class="line"><span class="string">4	        float x = 456.876;</span></span><br><span class="line"><span class="string">5	        printf (&quot;\nx = %f\n&quot;, x);</span></span><br><span class="line"><span class="string">6	        return 0;</span></span><br><span class="line"><span class="string">7	&#125;</span></span><br><span class="line"><span class="string">(gdb) b 4</span></span><br><span class="line"><span class="string">Breakpoint 1 at 0x400535: file float.c, line 4.</span></span><br><span class="line"><span class="string">(gdb) b 5</span></span><br><span class="line"><span class="string">Breakpoint 2 at 0x40053e: file float.c, line 5.</span></span><br><span class="line"><span class="string">(gdb) b 6</span></span><br><span class="line"><span class="string">Breakpoint 3 at 0x400555: file float.c, line 6.</span></span><br><span class="line"><span class="string">(gdb) c</span></span><br><span class="line"><span class="string">The program is not being run.</span></span><br><span class="line"><span class="string">(gdb) start</span></span><br><span class="line"><span class="string">Temporary breakpoint 4 at 0x400535: file float.c, line 4.</span></span><br><span class="line"><span class="string">Starting program: /root/./a.out</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Breakpoint 1, main () at float.c:4</span></span><br><span class="line"><span class="string">4	        float x = 456.876;</span></span><br><span class="line"><span class="string">(gdb) n</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Breakpoint 2, main () at float.c:5</span></span><br><span class="line"><span class="string">5	        printf (&quot;\nx = %f\n&quot;, x);</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">(gdb) p x</span></span><br><span class="line"><span class="string">$5 = 456.876007</span></span><br><span class="line"><span class="string">(gdb) x/fw &amp;x</span></span><br><span class="line"><span class="string">0x7fffffffe12c:	456.876007</span></span><br><span class="line"><span class="string">(gdb) x/tw &amp;x</span></span><br><span class="line"><span class="string">0x7fffffffe12c:	01000011111001000111000000100001</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">### modify the float to double</span></span><br><span class="line"><span class="string">(gdb) list</span></span><br><span class="line"><span class="string">1	#include &lt;stdio.h&gt;</span></span><br><span class="line"><span class="string">2	int main()</span></span><br><span class="line"><span class="string">3	&#123;</span></span><br><span class="line"><span class="string">4	        //float x = 456.876;</span></span><br><span class="line"><span class="string">5	        double x = 456.876;</span></span><br><span class="line"><span class="string">6	        printf (&quot;\nx = %lf\n&quot;, x);</span></span><br><span class="line"><span class="string">7	        return 0;</span></span><br><span class="line"><span class="string">8	&#125;</span></span><br><span class="line"><span class="string">(gdb) x/1fg &amp;x</span></span><br><span class="line"><span class="string">0x7fffffffe128:	456.87599999999998</span></span><br><span class="line"><span class="string">(gdb) x/1tg &amp;x</span></span><br><span class="line"><span class="string">0x7fffffffe128:	0100000001111100100011100000010000011000100100110111010010111100</span></span><br><span class="line"><span class="string">(gdb) p x</span></span><br><span class="line"><span class="string">$6 = 456.87599999999998</span></span><br></pre></td></tr></table></figure>



<h3 id="print-argv"><a href="#print-argv" class="headerlink" title="print argv"></a><a target="_blank" rel="noopener" href="https://wizardforcel.gitbooks.io/100-gdb-tips/set-program-args.html">print argv</a></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">$ gcc -g3 walk1.c -o walk</span><br><span class="line">$ gdb ./walk <span class="comment"># or you could $ gdb -args ./walk /tmp 10</span></span><br><span class="line">Reading symbols from /root/walk...done.</span><br><span class="line"></span><br><span class="line">(gdb) b main</span><br><span class="line">Breakpoint 1 at 0x400bb8: file walk1.c, line 73.</span><br><span class="line">(gdb) r /tmp 10 <span class="comment">#  or you could (gdb) set args /tmp 10</span></span><br><span class="line">Starting program: /root/./walk /tmp 10</span><br><span class="line"></span><br><span class="line">Breakpoint 1, main (argc=3, argv=0x7fffffffe138) at walk1.c:73</span><br><span class="line">73	    <span class="keyword">if</span>(argc != 3)</span><br><span class="line">(gdb) p argc</span><br><span class="line"><span class="variable">$1</span> = 3</span><br><span class="line">(gdb) p argv</span><br><span class="line"><span class="variable">$2</span> = (char **) 0x7fffffffe138</span><br><span class="line">(gdb) p argv[0]</span><br><span class="line"><span class="variable">$3</span> = 0x7fffffffe414 <span class="string">&quot;/root/./walk&quot;</span></span><br><span class="line">(gdb) p argv[1]</span><br><span class="line"><span class="variable">$4</span> = 0x7fffffffe421 <span class="string">&quot;/tmp&quot;</span></span><br><span class="line">(gdb) p argv[2]</span><br><span class="line"><span class="variable">$5</span> = 0x7fffffffe426 <span class="string">&quot;10&quot;</span></span><br><span class="line">(gdb)</span><br><span class="line"></span><br><span class="line"><span class="comment"># attach args</span></span><br><span class="line">$ gdb --args /bin/bash -c <span class="string">&#x27;ls -l&#x27;</span></span><br><span class="line">$ <span class="built_in">set</span> listsize 40</span><br><span class="line">$ p *args@4 </span><br><span class="line"></span><br><span class="line"><span class="comment"># if the software was install by source, you could add --directory for import debug symbol</span></span><br><span class="line"><span class="comment"># re-complie bash</span></span><br><span class="line"></span><br><span class="line">$ gdb --args /usr/<span class="built_in">local</span>/bin/bash -c <span class="string">&#x27;echo [1g]&#x27;</span> --directory ~/tools/bash-4.4</span><br><span class="line">(gdb) la src</span><br><span class="line"></span><br><span class="line"><span class="comment">## if you want disable optimze</span></span><br><span class="line">$ CFLAGS=<span class="string">&quot;-g -O0&quot;</span> CXXFLAGS=<span class="string">&quot;-g -O0&quot;</span> LDFLAGS=<span class="string">&quot;-g&quot;</span>  ./configure --enable-debugger</span><br><span class="line">$ CFLAGS=<span class="string">&quot;-g -O0&quot;</span> CXXFLAGS=<span class="string">&quot;-g -O0&quot;</span> LDFLAGS=<span class="string">&quot;-g&quot;</span>  ./make -j 2</span><br><span class="line"></span><br><span class="line"><span class="comment">## set debug directory</span></span><br><span class="line">(gdb) <span class="built_in">set</span> debug-file-directory &lt;directory&gt;</span><br><span class="line">(gdb) show debug-file-directory</span><br><span class="line">(gdb) <span class="built_in">set</span> debug-file-directory /usr/lib/debug</span><br><span class="line">add-symbol-file filename address</span><br><span class="line">add-symbol-file filename address [ -readnow ] [ -mapped ]</span><br><span class="line">add-symbol-file filename -ssection address ...</span><br></pre></td></tr></table></figure>

<h4 id="threads"><a href="#threads" class="headerlink" title="threads"></a>threads</h4><p>Demo code</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;thread&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;mutex&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line">mutex _mutex;</span><br><span class="line"><span class="keyword">static</span> <span class="keyword">int</span> total = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//g++ -std=c++11 testthread.cpp -o testthread -lpthread -g</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">fun</span><span class="params">(<span class="keyword">int</span> num)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">while</span>(<span class="number">1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        sleep(<span class="number">2</span>);</span><br><span class="line">        lock_guard&lt;mutex&gt;lock(_mutex);</span><br><span class="line">        total +=num;</span><br><span class="line">        <span class="built_in">cout</span>&lt;&lt;<span class="string">&quot;num:&quot;</span>&lt;&lt;num&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="function">thread <span class="title">t1</span><span class="params">(fun,<span class="number">3</span>)</span></span>;</span><br><span class="line">    <span class="function">thread <span class="title">t2</span><span class="params">(fun,<span class="number">5</span>)</span></span>;</span><br><span class="line">    t1.join();</span><br><span class="line">    t2.join();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$ gdb ./testthread</span><br><span class="line">$ info threads</span><br><span class="line">$ thread <span class="number">3</span> </span><br><span class="line">$ <span class="built_in">set</span> scheduler-locking on</span><br></pre></td></tr></table></figure>

<p>generate-core-file<br>``bash<br>(gdb) generate-core-file</p>
<h1 id="or"><a href="#or" class="headerlink" title="or"></a>or</h1><p>gcore $pid</p>
<figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">### golang</span><br><span class="line">```bash</span><br><span class="line">go build -gcflags <span class="string">&quot;-N -l&quot;</span> gdbsandbox.go</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ gdb -p <span class="variable">$pid</span></span><br><span class="line">(gdb) disas readline</span><br></pre></td></tr></table></figure>

<h3 id="debug-with-python"><a href="#debug-with-python" class="headerlink" title="debug with python"></a><a target="_blank" rel="noopener" href="https://mozillazg.com/2017/07/debug-running-python-process-with-gdb.html">debug with python</a></h3><h3 id="gdb-note"><a href="#gdb-note" class="headerlink" title="gdb note"></a>gdb note</h3><figure class="highlight x86asm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">arch/x86/entry/calling<span class="number">.</span>h</span><br><span class="line">x86 function <span class="keyword">call</span> convention, <span class="number">64</span>-bit:</span><br><span class="line">-------------------------------------</span><br><span class="line"> arguments           | callee-saved       | extra caller-saved | return</span><br><span class="line">[callee-clobbered]   |                    | [callee-clobbered] |</span><br><span class="line">---------------------------------------------------------------------------</span><br><span class="line"><span class="built_in">rdi</span> <span class="built_in">rsi</span> <span class="built_in">rdx</span> <span class="built_in">rcx</span> <span class="built_in">r8</span>-<span class="number">9</span> | <span class="built_in">rbx</span> <span class="built_in">rbp</span> [*] <span class="built_in">r12</span>-<span class="number">15</span> | <span class="built_in">r10</span>-<span class="number">11</span>             | <span class="built_in">rax</span>, <span class="built_in">rdx</span> [**]</span><br></pre></td></tr></table></figure>

<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="keyword">int</span> v1 = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">float</span> v2 = <span class="number">0.01</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">func</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">long</span> b, <span class="keyword">short</span> c,<span class="keyword">char</span> d, <span class="keyword">long</span> <span class="keyword">long</span> e, <span class="keyword">float</span> f, <span class="keyword">double</span> g, <span class="keyword">int</span> *h, <span class="keyword">float</span> *i, <span class="keyword">char</span> *j)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">   <span class="built_in">printf</span>(<span class="string">&quot;a: %d, b:%ld, c:%d, d: %c, e: %lld\n&quot;</span></span><br><span class="line">   <span class="string">&quot;f: %.3e, g:%.3e\nh: %p, i: %p, j:%p\n&quot;</span>, a, b, c, d, e, f, g, h, i, j);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  func(<span class="number">100</span>, <span class="number">35000L</span>, <span class="number">5</span>, <span class="string">&#x27;A&#x27;</span>, <span class="number">123456789L</span>L, <span class="number">3.14</span>, <span class="number">2.99792458e8</span>, &amp;v1, &amp;v2, <span class="string">&quot;string&quot;</span>);</span><br><span class="line">  <span class="keyword">return</span> EXIT_SUCCESS;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br></pre></td><td class="code"><pre><span class="line">(gdb) b *func</span><br><span class="line">Breakpoint 1 at 0x40052d: file c_para.c, line 7.</span><br><span class="line">(gdb) run</span><br><span class="line">Starting program: /root/codes/./c_para</span><br><span class="line"></span><br><span class="line">Breakpoint 1, func (a=0, b=1, c=1629, d=0 <span class="string">&#x27;\000&#x27;</span>, e=0, f=2.21061657e-38, g=0, h=0x76, i=0x601038 &lt;v2&gt;, j=0x4006e7 <span class="string">&quot;string&quot;</span>) at c_para.c:7</span><br><span class="line">7	&#123;</span><br><span class="line">(gdb) i r</span><br><span class="line">rax            0x41b1de784a000000	4733809291562057728</span><br><span class="line">rbx            0x0	0</span><br><span class="line">rcx            0x41	65                     -------&gt; args[3]</span><br><span class="line">rdx            0x5	5                      -------&gt; args[2]</span><br><span class="line">rsi            0x88b8	35000                  -------&gt; args[1]</span><br><span class="line">rdi            0x64	100                    -------&gt; args[0]</span><br><span class="line">rbp            0x7fffffffe400	0x7fffffffe400</span><br><span class="line">rsp            0x7fffffffe3d8	0x7fffffffe3d8</span><br><span class="line">r8             0x75bcd15	123456789      -------&gt; args[4], args[5] and args[6] is the <span class="built_in">float</span> and double <span class="built_in">type</span>, save <span class="keyword">in</span> xmm (128 bits)</span><br><span class="line">r9             0x601034	6295604                -------&gt; args[7]</span><br><span class="line">r10            0x7fffffffdf20	140737488346912</span><br><span class="line">r11            0x7ffff7a2f460	140737348039776</span><br><span class="line">r12            0x400440	4195392</span><br><span class="line">r13            0x7fffffffe4e0	140737488348384</span><br><span class="line">r14            0x0	0</span><br><span class="line">r15            0x0	0</span><br><span class="line">rip            0x40052d	0x40052d &lt;func&gt;</span><br><span class="line">eflags         0x202	[ IF ]</span><br><span class="line">cs             0x33	51</span><br><span class="line">ss             0x2b	43</span><br><span class="line">ds             0x0	0</span><br><span class="line">es             0x0	0</span><br><span class="line">fs             0x0	0</span><br><span class="line">gs             0x0	0</span><br><span class="line"></span><br><span class="line"><span class="comment">#because no enough register, two parameters save in stack (rsp register)</span></span><br><span class="line"><span class="comment">#In the stack begining, there is the function return addr, In x86_64, int and point size is the giant word (32 bits, 4 Bytes)</span></span><br><span class="line">0x7fffffffe3e8-0x7fffffffe3d8=16(dec)</span><br><span class="line"></span><br><span class="line">(gdb) x/3g <span class="variable">$rsp</span></span><br><span class="line">0x7fffffffe3d8:	4195844	6295608</span><br><span class="line">0x7fffffffe3e8:	4196071</span><br><span class="line"></span><br><span class="line"><span class="comment">#$rsp+0xc means The memory location 12 bytes above current stack pointer</span></span><br><span class="line"></span><br><span class="line">6295608=0x601038</span><br><span class="line">(gdb) <span class="built_in">printf</span> <span class="string">&quot;%.2f\n&quot;</span>, *(<span class="built_in">float</span>*)0x601038</span><br><span class="line">0.01</span><br><span class="line"></span><br><span class="line">or </span><br><span class="line">(gdb) <span class="built_in">printf</span> <span class="string">&quot;%.2f\n&quot;</span>, *(<span class="built_in">float</span>*)(*(unsigned long*)(<span class="variable">$rsp</span>+0x8))</span><br><span class="line">0.01</span><br><span class="line"></span><br><span class="line">4196071=0x4006E7</span><br><span class="line">(gdb) p (char*)0x4006E7</span><br><span class="line"><span class="variable">$9</span> = 0x4006e7 <span class="string">&quot;string&quot;</span></span><br><span class="line"></span><br><span class="line">long 8 bytes (64bit OS), 4 bytes (32bit OS)</span><br><span class="line">Add 8 bytes, go to <span class="variable">$rsp</span>+0x10</span><br><span class="line"></span><br><span class="line">or</span><br><span class="line">0x10=16</span><br><span class="line">(gdb) p (char*)(*(unsigned long*)(<span class="variable">$rsp</span>+0x10))</span><br><span class="line"><span class="variable">$11</span> = 0x4006e7 <span class="string">&quot;string&quot;</span></span><br><span class="line"></span><br><span class="line">(gdb) disas func</span><br><span class="line">Dump of assembler code <span class="keyword">for</span> <span class="keyword">function</span> func:</span><br><span class="line">=&gt; 0x000000000040052d &lt;+0&gt;:	push   %rbp</span><br><span class="line">   0x000000000040052e &lt;+1&gt;:	mov    %rsp,%rbp</span><br><span class="line">   0x0000000000400531 &lt;+4&gt;:	sub    <span class="variable">$0x50</span>,%rsp</span><br><span class="line">   0x0000000000400535 &lt;+8&gt;:	mov    %edi,-0x4(%rbp)</span><br><span class="line">   0x0000000000400538 &lt;+11&gt;:	mov    %rsi,-0x10(%rbp)</span><br><span class="line">   0x000000000040053c &lt;+15&gt;:	mov    %ecx,%eax</span><br><span class="line">   0x000000000040053e &lt;+17&gt;:	mov    %r8,-0x20(%rbp)</span><br><span class="line">   0x0000000000400542 &lt;+21&gt;:	movss  %xmm0,-0x18(%rbp)</span><br><span class="line">   0x0000000000400547 &lt;+26&gt;:	movsd  %xmm1,-0x28(%rbp)</span><br><span class="line">   0x000000000040054c &lt;+31&gt;:	mov    %r9,-0x30(%rbp)</span><br><span class="line">   0x0000000000400550 &lt;+35&gt;:	mov    %dx,-0x8(%rbp)</span><br><span class="line">   0x0000000000400554 &lt;+39&gt;:	mov    %al,-0x14(%rbp)</span><br><span class="line">   0x0000000000400557 &lt;+42&gt;:	movss  -0x18(%rbp),%xmm0</span><br><span class="line">   0x000000000040055c &lt;+47&gt;:	cvtps2pd %xmm0,%xmm0</span><br><span class="line">   0x000000000040055f &lt;+50&gt;:	movsbl -0x14(%rbp),%r8d</span><br><span class="line">   0x0000000000400564 &lt;+55&gt;:	movswl -0x8(%rbp),%ecx</span><br><span class="line">   0x0000000000400568 &lt;+59&gt;:	mov    -0x28(%rbp),%rax</span><br><span class="line">   0x000000000040056c &lt;+63&gt;:	mov    -0x20(%rbp),%r9</span><br><span class="line">   0x0000000000400570 &lt;+67&gt;:	mov    -0x10(%rbp),%rdx</span><br><span class="line">   0x0000000000400574 &lt;+71&gt;:	mov    -0x4(%rbp),%esi</span><br><span class="line">   0x0000000000400577 &lt;+74&gt;:	mov    0x18(%rbp),%rdi</span><br><span class="line">   0x000000000040057b &lt;+78&gt;:	mov    %rdi,0x10(%rsp)</span><br><span class="line">   0x0000000000400580 &lt;+83&gt;:	mov    0x10(%rbp),%rdi</span><br><span class="line">   0x0000000000400584 &lt;+87&gt;:	mov    %rdi,0x8(%rsp)</span><br><span class="line">   0x0000000000400589 &lt;+92&gt;:	mov    -0x30(%rbp),%rdi</span><br><span class="line">   0x000000000040058d &lt;+96&gt;:	mov    %rdi,(%rsp)</span><br><span class="line">   0x0000000000400591 &lt;+100&gt;:	mov    %rax,-0x38(%rbp)</span><br><span class="line">   0x0000000000400595 &lt;+104&gt;:	movsd  -0x38(%rbp),%xmm1</span><br><span class="line">   0x000000000040059a &lt;+109&gt;:	mov    <span class="variable">$0x4006a0</span>,%edi</span><br><span class="line">   0x000000000040059f &lt;+114&gt;:	mov    <span class="variable">$0x2</span>,%eax</span><br><span class="line">   0x00000000004005a4 &lt;+119&gt;:	callq  0x400410 &lt;<span class="built_in">printf</span>@plt&gt;</span><br><span class="line">   0x00000000004005a9 &lt;+124&gt;:	leaveq</span><br><span class="line">   0x00000000004005aa &lt;+125&gt;:	retq</span><br><span class="line">End of assembler dump.</span><br></pre></td></tr></table></figure>

<ul>
<li><p>stack</p>
<ul>
<li>LIFO (Last In first out)</li>
<li>push data in stack</li>
<li>pop data out of the stack</li>
</ul>
</li>
<li><p>stack frame</p>
<ul>
<li>Lower to high addr</li>
<li>frame point (FP)<ul>
<li>the start of the last frame<ul>
<li>in the bottom</li>
<li>$rbp register</li>
</ul>
</li>
</ul>
</li>
<li>stack point (SP)<ul>
<li>the end of the last frame<ul>
<li>always in the top addr</li>
<li>$sp register</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>$rip (instruction pointer)</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line">(gdb) bt</span><br><span class="line"><span class="comment">#0  sum_till_MAX (n=4) at sum.c:14</span></span><br><span class="line"><span class="comment">#1  0x0000000000400698 in sum_till_MAX (n=4) at sum.c:18</span></span><br><span class="line"><span class="comment">#2  0x0000000000400698 in sum_till_MAX (n=3) at sum.c:18</span></span><br><span class="line"><span class="comment">#3  0x0000000000400698 in sum_till_MAX (n=2) at sum.c:18</span></span><br><span class="line"><span class="comment">#4  0x0000000000400698 in sum_till_MAX (n=1) at sum.c:18</span></span><br><span class="line"><span class="comment">#5  0x0000000000400757 in main (argc=2, argv=0x7fffffffe4e8) at sum.c:33</span></span><br><span class="line">(gdb) i r rip rbp</span><br><span class="line">rip            0x400698	0x400698 &lt;sum_till_MAX+43&gt;</span><br><span class="line">rbp            0x7fffffffe370	0x7fffffffe370</span><br><span class="line">(gdb) x/40w <span class="variable">$sp</span></span><br><span class="line">0x7fffffffe350:	0x00000000	0x00000000	0x00000000	0x00000003</span><br><span class="line">0x7fffffffe360:	0x00000000	0x00000000	0x00000003	0x00000000</span><br><span class="line">0x7fffffffe370:	0xffffe3a0	0x00007fff	0x00400698	0x00000000</span><br><span class="line">0x7fffffffe380:	0x00000000	0x00000000	0xffffe405	0x00000002</span><br><span class="line">0x7fffffffe390:	0xffffffff	0xffffffff	0x00000002	0x00000000</span><br><span class="line">0x7fffffffe3a0:	0xffffe3d0	0x00007fff	0x00400698	0x00000000</span><br><span class="line">0x7fffffffe3b0:	0xffffe400	0x00007fff	0x00400580	0x00000001</span><br><span class="line">0x7fffffffe3c0:	0xffffe4e0	0x00007fff	0x00000001	0x00000000</span><br><span class="line">0x7fffffffe3d0:	0xffffe400	0x00007fff	0x00400757	0x00000000</span><br><span class="line">0x7fffffffe3e0:	0xffffe4e8	0x00007fff	0x00400580	0x00000002</span><br><span class="line">(gdb) i frame 1</span><br><span class="line">Stack frame at 0x7fffffffe350:</span><br><span class="line"> rip = 0x400698 <span class="keyword">in</span> sum_till_MAX (sum.c:18); saved rip 0x400698</span><br><span class="line"> called by frame at 0x7fffffffe380, <span class="built_in">caller</span> of frame at 0x7fffffffe320</span><br><span class="line"> <span class="built_in">source</span> language c.</span><br><span class="line"> Arglist at 0x7fffffffe340, args: n=4</span><br><span class="line"> Locals at 0x7fffffffe340, Previous frame<span class="string">&#x27;s sp is 0x7fffffffe350</span></span><br><span class="line"><span class="string"> Saved registers:</span></span><br><span class="line"><span class="string">  rbp at 0x7fffffffe340, rip at 0x7fffffffe348</span></span><br><span class="line"><span class="string">(gdb) x/i $pc</span></span><br><span class="line"><span class="string">=&gt; 0x400698 &lt;sum_till_MAX+43&gt;:	add    %rax,-0x8(%rbp)</span></span><br><span class="line"><span class="string">(gdb) p $sp</span></span><br><span class="line"><span class="string">$7 = (void *) 0x7fffffffe350</span></span><br><span class="line"><span class="string">(gdb) i proc mapping</span></span><br><span class="line"><span class="string">process 1868</span></span><br><span class="line"><span class="string">Mapped address spaces:</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">          Start Addr           End Addr       Size     Offset objfile</span></span><br><span class="line"><span class="string">            0x400000           0x401000     0x1000        0x0 /root/codes/sum</span></span><br><span class="line"><span class="string">            0x600000           0x601000     0x1000        0x0 /root/codes/sum</span></span><br><span class="line"><span class="string">            0x601000           0x602000     0x1000     0x1000 /root/codes/sum</span></span><br><span class="line"><span class="string">      0x7ffff7a0d000     0x7ffff7bd1000   0x1c4000        0x0 /usr/lib64/libc-2.17.so</span></span><br><span class="line"><span class="string">      0x7ffff7bd1000     0x7ffff7dd0000   0x1ff000   0x1c4000 /usr/lib64/libc-2.17.so</span></span><br><span class="line"><span class="string">      0x7ffff7dd0000     0x7ffff7dd4000     0x4000   0x1c3000 /usr/lib64/libc-2.17.so</span></span><br><span class="line"><span class="string">      0x7ffff7dd4000     0x7ffff7dd6000     0x2000   0x1c7000 /usr/lib64/libc-2.17.so</span></span><br><span class="line"><span class="string">      0x7ffff7dd6000     0x7ffff7ddb000     0x5000        0x0</span></span><br><span class="line"><span class="string">      0x7ffff7ddb000     0x7ffff7dfd000    0x22000        0x0 /usr/lib64/ld-2.17.so</span></span><br><span class="line"><span class="string">      0x7ffff7ff1000     0x7ffff7ff4000     0x3000        0x0</span></span><br><span class="line"><span class="string">      0x7ffff7ff9000     0x7ffff7ffa000     0x1000        0x0</span></span><br><span class="line"><span class="string">      0x7ffff7ffa000     0x7ffff7ffc000     0x2000        0x0 [vdso]</span></span><br><span class="line"><span class="string">      0x7ffff7ffc000     0x7ffff7ffd000     0x1000    0x21000 /usr/lib64/ld-2.17.so</span></span><br><span class="line"><span class="string">      0x7ffff7ffd000     0x7ffff7ffe000     0x1000    0x22000 /usr/lib64/ld-2.17.so</span></span><br><span class="line"><span class="string">      0x7ffff7ffe000     0x7ffff7fff000     0x1000        0x0</span></span><br><span class="line"><span class="string">      0x7ffffffde000     0x7ffffffff000    0x21000        0x0 [stack]</span></span><br><span class="line"><span class="string">  0xffffffffff600000 0xffffffffff601000     0x1000        0x0 [vsyscall]</span></span><br></pre></td></tr></table></figure>

<h3 id="User-space"><a href="#User-space" class="headerlink" title="User space"></a>User space</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># gdb /usr/lib64/libc-2.17.so</span></span><br><span class="line"><span class="string">GNU</span> <span class="string">gdb</span> <span class="string">(GDB)</span> <span class="string">Red</span> <span class="string">Hat</span> <span class="string">Enterprise</span> <span class="string">Linux</span> <span class="number">7.6</span><span class="number">.1</span><span class="number">-119.</span><span class="string">el7</span></span><br><span class="line"><span class="string">Copyright</span> <span class="string">(C)</span> <span class="number">2013 </span><span class="string">Free</span> <span class="string">Software</span> <span class="string">Foundation,</span> <span class="string">Inc.</span></span><br><span class="line"><span class="string">License</span> <span class="string">GPLv3+:</span> <span class="string">GNU</span> <span class="string">GPL</span> <span class="string">version</span> <span class="number">3</span> <span class="string">or</span> <span class="string">later</span> <span class="string">&lt;http://gnu.org/licenses/gpl.html&gt;</span></span><br><span class="line"><span class="attr">This is free software:</span> <span class="string">you</span> <span class="string">are</span> <span class="string">free</span> <span class="string">to</span> <span class="string">change</span> <span class="string">and</span> <span class="string">redistribute</span> <span class="string">it.</span></span><br><span class="line"><span class="string">There</span> <span class="string">is</span> <span class="literal">NO</span> <span class="string">WARRANTY,</span> <span class="string">to</span> <span class="string">the</span> <span class="string">extent</span> <span class="string">permitted</span> <span class="string">by</span> <span class="string">law.</span>  <span class="string">Type</span> <span class="string">&quot;show copying&quot;</span></span><br><span class="line"><span class="string">and</span> <span class="string">&quot;show warranty&quot;</span> <span class="string">for</span> <span class="string">details.</span></span><br><span class="line"><span class="string">This</span> <span class="string">GDB</span> <span class="string">was</span> <span class="string">configured</span> <span class="string">as</span> <span class="string">&quot;x86_64-redhat-linux-gnu&quot;</span><span class="string">.</span></span><br><span class="line"><span class="string">For</span> <span class="string">bug</span> <span class="string">reporting</span> <span class="string">instructions,</span> <span class="attr">please see:</span></span><br><span class="line"><span class="string">&lt;http://www.gnu.org/software/gdb/bugs/&gt;...</span></span><br><span class="line"><span class="string">Reading</span> <span class="string">symbols</span> <span class="string">from</span> <span class="string">/usr/lib64/libc-2.17.so...Reading</span> <span class="string">symbols</span> <span class="string">from</span> <span class="string">/usr/lib/debug/usr/lib64/libc-2.17.so.debug...done.</span></span><br><span class="line"><span class="string">done.</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## show the offset</span></span><br><span class="line"><span class="string">(gdb)</span> <span class="string">disas</span> <span class="string">memcmp</span></span><br><span class="line"><span class="attr">Dump of assembler code for function memcmp:</span></span><br><span class="line">   <span class="number">0x000000000008f2f0</span> <span class="string">&lt;+0&gt;:</span>	<span class="string">mov</span>    <span class="number">0x337b51</span><span class="string">(%rip),%rdx</span>        <span class="comment"># 0x3c6e48</span></span><br><span class="line">   <span class="number">0x000000000008f2f7</span> <span class="string">&lt;+7&gt;:</span>	<span class="string">testl</span>  <span class="string">$0x200,0x80(%rdx)</span></span><br><span class="line">   <span class="number">0x000000000008f301</span> <span class="string">&lt;+17&gt;:</span>	<span class="string">jne</span>    <span class="number">0x8f30b</span> <span class="string">&lt;memcmp+27&gt;</span></span><br><span class="line">   <span class="number">0x000000000008f303</span> <span class="string">&lt;+19&gt;:</span>	<span class="string">lea</span>    <span class="number">0x26</span><span class="string">(%rip),%rax</span>        <span class="comment"># 0x8f330 &lt;__memcmp_sse2&gt;</span></span><br><span class="line">   <span class="number">0x000000000008f30a</span> <span class="string">&lt;+26&gt;:</span>	<span class="string">retq</span></span><br><span class="line">   <span class="number">0x000000000008f30b</span> <span class="string">&lt;+27&gt;:</span>	<span class="string">testl</span>  <span class="string">$0x80000,0x80(%rdx)</span></span><br><span class="line">   <span class="number">0x000000000008f315</span> <span class="string">&lt;+37&gt;:</span>	<span class="string">je</span>     <span class="number">0x8f31f</span> <span class="string">&lt;memcmp+47&gt;</span></span><br><span class="line">   <span class="number">0x000000000008f317</span> <span class="string">&lt;+39&gt;:</span>	<span class="string">lea</span>    <span class="number">0xdac92</span><span class="string">(%rip),%rax</span>        <span class="comment"># 0x169fb0 &lt;__memcmp_sse4_1&gt;</span></span><br><span class="line">   <span class="number">0x000000000008f31e</span> <span class="string">&lt;+46&gt;:</span>	<span class="string">retq</span></span><br><span class="line">   <span class="number">0x000000000008f31f</span> <span class="string">&lt;+47&gt;:</span>	<span class="string">lea</span>    <span class="number">0xde5ba</span><span class="string">(%rip),%rax</span>        <span class="comment"># 0x16d8e0 &lt;__memcmp_ssse3&gt;</span></span><br><span class="line">   <span class="number">0x000000000008f326</span> <span class="string">&lt;+54&gt;:</span>	<span class="string">retq</span></span><br><span class="line"><span class="string">End</span> <span class="string">of</span> <span class="string">assembler</span> <span class="string">dump.</span></span><br></pre></td></tr></table></figure>

<ul>
<li><a target="_blank" rel="noopener" href="http://tacy.github.io/post/binary/">To</a> retrieve a section header table:readelf -S <object></li>
<li>To retrieve a program header table: readelf -l <object></li>
<li>To retrieve a symbol table: readelf -s <object></li>
<li>To retrieve the ELF file header data: readelf -e <object></li>
<li>To retrieve relocation entries: readelf -r <object></li>
<li>To retrieve a dynamic segment: readelf -d <object></li>
</ul>
<h3 id="source-code-directory"><a href="#source-code-directory" class="headerlink" title="source code directory"></a>source code directory</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(gdb) directory /opt/src</span><br></pre></td></tr></table></figure>

<h3 id="gcc-parameters-and-show-macro"><a href="#gcc-parameters-and-show-macro" class="headerlink" title="gcc parameters and show macro"></a><a target="_blank" rel="noopener" href="http://www.lenky.info/archives/2012/08/1910">gcc parameters and show macro</a></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ gcc -Wall -O2 -pg -o t.O2.pg t.c</span><br></pre></td></tr></table></figure>
<ul>
<li>pg: Generate extra code to write profile information suitable for the analysis program gprof.  You must use this option when compiling the source files you want data about, and you must also use it when linking.   </li>
<li>time[=file]: Report the CPU time taken by each subprocess in the compilation sequence</li>
<li>“-Q”:  Makes the compiler print out each function name as it is compiled, and print some statistics about each pass when it finishes.   </li>
<li>fno-inline: Do not expand any functions inline apart from those marked with the “always_inline” attribute.  This is the default when not optimizing.</li>
<li>-g produces debugging information in theOS native format</li>
<li>-ggdb produces debugging information specifically intennded for gdb</li>
<li>-ggdb3 produces extra debugging information, for example: including macro definitions</li>
<li>wall means enable warnning</li>
<li>-O0  turn off all optimization</li>
<li>-O1 ,-O2, -O3  optimization</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><span class="line">cat t.c</span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;t.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> A 1</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> B (2+A)</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">long</span> <span class="title">myfunc</span><span class="params">(<span class="keyword">long</span> a, <span class="keyword">long</span> b, <span class="keyword">long</span> c, <span class="keyword">long</span> d,</span></span></span><br><span class="line"><span class="function"><span class="params">            <span class="keyword">long</span> e, <span class="keyword">long</span> f, <span class="keyword">long</span> g, <span class="keyword">long</span> h)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">long</span> xx = a * b * c * d * e * f * g * h;</span><br><span class="line">    <span class="keyword">long</span> yy = a + b + c + d + e + f + g + h;</span><br><span class="line">    <span class="keyword">long</span> zz = utilfunc(xx, yy, xx % yy);</span><br><span class="line">    <span class="keyword">return</span> zz + <span class="number">20</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> *argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    myfunc(<span class="number">11</span>, <span class="number">22</span>, <span class="number">33</span>, <span class="number">44</span>, <span class="number">55</span>, <span class="number">66</span>, <span class="number">77</span>, <span class="number">88</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, B);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$ cat t.h</span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> _T_H</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> _T_H</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">inline</span> <span class="keyword">long</span> <span class="title">utilfunc</span><span class="params">(<span class="keyword">long</span> a, <span class="keyword">long</span> b, <span class="keyword">long</span> c)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">long</span> xx = a + <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">long</span> yy = b + <span class="number">3</span>;</span><br><span class="line">    <span class="keyword">long</span> zz = c + <span class="number">4</span>;</span><br><span class="line">    <span class="keyword">long</span> sum = xx + yy + zz;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> xx * yy * zz + sum;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"></span><br><span class="line">$ gcc -Wall -O2 -g -o t.O2.g t.c</span><br><span class="line">$ gdb t.O2.g -q</span><br><span class="line">Reading symbols from /home/log_IO1/test/t.O2.g...done.</span><br><span class="line">(gdb) b main</span><br><span class="line">Breakpoint <span class="number">1</span> at <span class="number">0x400440</span>: file t.c, line <span class="number">16.</span></span><br><span class="line">(gdb) r</span><br><span class="line">Starting program: /home/log_IO1/test/t.O2.g</span><br><span class="line"></span><br><span class="line">Breakpoint <span class="number">1</span>, main (argc=<span class="number">1</span>, argv=<span class="number">0x7fffffffe288</span>) at t.c:<span class="number">16</span></span><br><span class="line"><span class="number">16</span>	&#123;</span><br><span class="line">Missing separate debuginfos, use: debuginfo-install glibc<span class="number">-2.17</span><span class="number">-307.</span>el7<span class="number">.1</span>.x86_64</span><br><span class="line">(gdb) info macro A</span><br><span class="line">The symbol `A<span class="number">&#x27;</span> has no definition as a C/C++ preprocessor macro</span><br><span class="line">at &lt;user-defined&gt;:<span class="number">-1</span></span><br><span class="line"></span><br><span class="line">### Add -ggdb3</span><br><span class="line"></span><br><span class="line">$ gcc -Wall -O2 -ggdb3 -o t.O2.gdb3.noinline.g t.c</span><br><span class="line">$ gdb t.O2.gdb3.noinline.g -q</span><br><span class="line">Reading symbols from /home/log_IO1/test/t.O2.gdb3.noinline.g...done.</span><br><span class="line">(gdb) b main</span><br><span class="line">Breakpoint <span class="number">1</span> at <span class="number">0x400440</span>: file t.c, line <span class="number">16.</span></span><br><span class="line">(gdb) r</span><br><span class="line">Starting program: /home/log_IO1/test/t.O2.gdb3.noinline.g</span><br><span class="line"></span><br><span class="line">Breakpoint <span class="number">1</span>, main (argc=<span class="number">1</span>, argv=<span class="number">0x7fffffffe278</span>) at t.c:<span class="number">16</span></span><br><span class="line"><span class="number">16</span>	&#123;</span><br><span class="line">Missing separate debuginfos, use: debuginfo-install glibc<span class="number">-2.17</span><span class="number">-307.</span>el7<span class="number">.1</span>.x86_64</span><br><span class="line">(gdb)  info macro A</span><br><span class="line">Defined at /home/log_IO1/test/t.c:<span class="number">3</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> A 1</span></span><br><span class="line">(gdb)  info macro B</span><br><span class="line">Defined at /home/log_IO1/test/t.c:<span class="number">4</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> B (2+A)</span></span><br><span class="line">(gdb) macro expand A</span><br><span class="line">expands to: <span class="number">1</span></span><br><span class="line">(gdb) macro expand B</span><br><span class="line">expands to: (<span class="number">2</span>+<span class="number">1</span>)</span><br><span class="line">(gdb) <span class="built_in">list</span> utilfunc</span><br><span class="line"><span class="number">3</span>	<span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="number">4</span></span><br><span class="line"><span class="number">5</span>	<span class="function"><span class="keyword">static</span> <span class="keyword">inline</span> <span class="keyword">long</span> <span class="title">utilfunc</span><span class="params">(<span class="keyword">long</span> a, <span class="keyword">long</span> b, <span class="keyword">long</span> c)</span></span></span><br><span class="line"><span class="function">6	</span>&#123;</span><br><span class="line"><span class="number">7</span>	    <span class="keyword">long</span> xx = a + <span class="number">2</span>;</span><br><span class="line"><span class="number">8</span>	    <span class="keyword">long</span> yy = b + <span class="number">3</span>;</span><br><span class="line"><span class="number">9</span>	    <span class="keyword">long</span> zz = c + <span class="number">4</span>;</span><br><span class="line"><span class="number">10</span>	    <span class="keyword">long</span> sum = xx + yy + zz;</span><br><span class="line"><span class="number">11</span></span><br><span class="line"><span class="number">12</span>	    <span class="keyword">return</span> xx * yy * zz + sum;</span><br><span class="line">(gdb) quit</span><br><span class="line">A debugging session is active.</span><br><span class="line"></span><br><span class="line">	Inferior <span class="number">1</span> [process <span class="number">28148</span>] will be killed.</span><br><span class="line"></span><br><span class="line">Quit anyway? (y <span class="keyword">or</span> n) y</span><br></pre></td></tr></table></figure>
</div><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="mailto:undefined">Homer</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="http://yoursite.com/2020/03/03/gdb/">http://yoursite.com/2020/03/03/gdb/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/debug/">debug</a><a class="post-meta__tags" href="/tags/trace/">trace</a></div><div class="post_share"><div class="social-share" data-image="https://homerl.github.io/img/PROPELLER-2-1-1024x1024.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2020/03/03/crash/"><img class="prev-cover" src="https://homerl.github.io/img/PROPELLER-2-1-1024x1024.png" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">Previous Post</div><div class="prev_info">crash practice</div></div></a></div><div class="next-post pull-right"><a href="/2019/12/29/lfs_command/"><img class="next-cover" src="https://homerl.github.io/img/hard-disk_223cf.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">Next Post</div><div class="next_info">lfs command</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span> Related Articles</span></div><div class="relatedPosts-list"><div><a href="/2020/12/08/debug/" title="Linux debug"><img class="cover" src="https://homerl.github.io/img/PROPELLER-2-1-1024x1024.png"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-12-08</div><div class="title">Linux debug</div></div></a></div><div><a href="/2020/07/24/bpftrace/" title="bpftrace"><img class="cover" src="https://homerl.github.io/img/PROPELLER-2-1-1024x1024.png"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-07-24</div><div class="title">bpftrace</div></div></a></div><div><a href="/2020/03/03/crash/" title="crash practice"><img class="cover" src="https://homerl.github.io/img/PROPELLER-2-1-1024x1024.png"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-03-03</div><div class="title">crash practice</div></div></a></div><div><a href="/2019/10/31/bcc/" title="Trace by bcc tools"><img class="cover" src="https://homerl.github.io/img/PROPELLER-2-1-1024x1024.png"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2019-10-31</div><div class="title">Trace by bcc tools</div></div></a></div><div><a href="/2018/11/23/perf/" title="perf"><img class="cover" src="https://homerl.github.io/img/PROPELLER-2-1-1024x1024.png"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2018-11-23</div><div class="title">perf</div></div></a></div><div><a href="/2018/11/22/ftrace/" title="ftrace"><img class="cover" src="https://homerl.github.io/img/PROPELLER-2-1-1024x1024.png"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2018-11-22</div><div class="title">ftrace</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> Comment</span></div></div><div class="comment-wrap"><div><div id="gitalk-container"></div></div></div></div></article></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2015 - 2021 By Homer</div><div class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><section id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Read Mode"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="Switch Between Light And Dark Mode"><i class="fas fa-adjust"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="Setting"><i class="fas fa-cog"></i></button><a id="to_comment" href="#post-comment" title="Scroll To Comments"><i class="fas fa-comments"></i></a><button class="close" id="mobile-toc-button" type="button" title="Table Of Contents"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="Back To Top"><i class="fas fa-arrow-up"></i></button></div></section><div class="search-dialog" id="local-search"><div class="search-dialog__title" id="local-search-title">Local search</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="Search for Posts" type="text"/></div></div></div><hr/><div id="local-search-results"><div id="local-hits"></div><div id="local-stats"><div class="local-search-stats__hr" id="hr"><span>Powered by</span> <a target="_blank" rel="noopener" href="https://github.com/wzpan/hexo-generator-search" style="color:#49B1F5;">hexo-generator-search</a></div></div></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div><div><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>function addGitalkSource () {
  const ele = document.createElement('link')
  ele.rel = 'stylesheet'
  ele.href= 'https://cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.css'
  document.getElementsByTagName('head')[0].appendChild(ele)
}

function loadGitalk () {
  function initGitalk () {
    var gitalk = new Gitalk({
      clientID: '0b9d5b98d0a972b33cf7',
      clientSecret: '769efc11b32f6c0d03bcbf3ee800dfc4e2690459',
      repo: 'homerl.github.io',
      owner: 'homerl',
      admin: ['homerl'],
      id: 'c9b912b7bed7a390794f4dd392bb0841',
      language: 'en',
      perPage: 10,
      distractionFreeMode: false,
      pagerDirection: 'last',
      createIssueManually: false,
      updateCountCallback: commentCount
    })
    gitalk.render('gitalk-container')
  }

  if (typeof Gitalk === 'function') initGitalk()
  else {
    addGitalkSource()
    $.getScript('https://cdn.jsdelivr.net/npm/gitalk@latest/dist/gitalk.min.js', initGitalk)
  }
}

function commentCount(n){
  let isCommentCount = document.querySelector('#post-meta .gitalk-comment-count')
  if (isCommentCount) {
    isCommentCount.innerHTML= n
  }
}

if ('Gitalk' === 'Gitalk' || !false) {
  if (false) btf.loadComment(document.getElementById('gitalk-container'), loadGitalk)
  else loadGitalk()
} else {
  function loadOtherComment () {
    loadGitalk()
  }
}</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></div></body></html>