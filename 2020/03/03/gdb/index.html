<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>GDB tips | 己不由心，身又岂能由己</title><meta name="keywords" content="debug,trace"><meta name="author" content="Ginger"><meta name="copyright" content="Ginger"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><meta name="description" content="OS setttingCore pattern12345678910111213141516$ cat &#x2F;proc&#x2F;sys&#x2F;kernel&#x2F;core_pattern&#x2F;usr&#x2F;share&#x2F;apport&#x2F;apport %p %s %c %d %P %E## kernel variablekernel.core_pattern &#x3D; |&#x2F;usr&#x2F;share&#x2F;apport&#x2F;apport %p %s %c %d">
<meta property="og:type" content="article">
<meta property="og:title" content="GDB tips">
<meta property="og:url" content="http://yoursite.com/2020/03/03/gdb/index.html">
<meta property="og:site_name" content="己不由心，身又岂能由己">
<meta property="og:description" content="OS setttingCore pattern12345678910111213141516$ cat &#x2F;proc&#x2F;sys&#x2F;kernel&#x2F;core_pattern&#x2F;usr&#x2F;share&#x2F;apport&#x2F;apport %p %s %c %d %P %E## kernel variablekernel.core_pattern &#x3D; |&#x2F;usr&#x2F;share&#x2F;apport&#x2F;apport %p %s %c %d">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://yoursite.com/img/photo_by_spacex.jpg">
<meta property="article:published_time" content="2020-03-03T14:17:33.000Z">
<meta property="article:modified_time" content="2020-10-09T12:25:01.907Z">
<meta property="article:author" content="Ginger">
<meta property="article:tag" content="debug">
<meta property="article:tag" content="trace">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://yoursite.com/img/photo_by_spacex.jpg"><link rel="shortcut icon" href="/img/stout-shield.png"><link rel="canonical" href="http://yoursite.com/2020/03/03/gdb/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><script>var GLOBAL_CONFIG = { 
  root: '/',
  hexoversion: '5.2.0',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: 'Just',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: undefined,
  ClickShowText: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  justifiedGallery: {
    js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
    css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: false
};

var saveToLocal = {
  set: function setWithExpiry(key, value, ttl) {
    const now = new Date()
    const expiryDay = ttl * 86400000
    const item = {
      value: value,
      expiry: now.getTime() + expiryDay,
    }
    localStorage.setItem(key, JSON.stringify(item))
  },

  get: function getWithExpiry(key) {
    const itemStr = localStorage.getItem(key)

    if (!itemStr) {
      return undefined
    }
    const item = JSON.parse(itemStr)
    const now = new Date()

    if (now.getTime() > item.expiry) {
      localStorage.removeItem(key)
      return undefined
    }
    return item.value
  }
}</script><script id="config_change">var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isSidebar: true,
  postUpdate: '2020-10-09 20:25:01'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(function () {
  window.activateDarkMode = function () {
    document.documentElement.setAttribute('data-theme', 'dark')
    if (document.querySelector('meta[name="theme-color"]') !== null) {
      document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
    }
  }
  window.activateLightMode = function () {
    document.documentElement.setAttribute('data-theme', 'light')
    if (document.querySelector('meta[name="theme-color"]') !== null) {
      document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
    }
  }

  const autoChangeMode = 'false'
  const t = saveToLocal.get('theme')
  if (autoChangeMode === '1') {
    const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
    const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
    const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
    const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

    if (t === undefined) {
      if (isLightMode) activateLightMode()
      else if (isDarkMode) activateDarkMode()
      else if (isNotSpecified || hasNoSupport) {
        const now = new Date()
        const hour = now.getHours()
        const isNight = hour <= 6 || hour >= 18
        isNight ? activateDarkMode() : activateLightMode()
      }
      window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
        if (saveToLocal.get('theme') === undefined) {
          e.matches ? activateDarkMode() : activateLightMode()
        }
      })
    } else if (t === 'light') activateLightMode()
    else activateDarkMode()
  } else if (autoChangeMode === '2') {
    const now = new Date()
    const hour = now.getHours()
    const isNight = hour <= 6 || hour >= 18
    if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
    else if (t === 'light') activateLightMode()
    else activateDarkMode()
  } else {
    if (t === 'dark') activateDarkMode()
    else if (t === 'light') activateLightMode()
  }
})()</script><meta name="generator" content="Hexo 5.2.0"></head><body><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="/img/244247-guts.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">Articles</div><div class="length_num">58</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">Tags</div><div class="length_num">57</div></a></div></div><div class="mobile_data_item is-center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">Categories</div><div class="length_num">9</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> List</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></li><li><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div></div></div><div id="body-wrap"><div id="sidebar"><i class="fas fa-arrow-right on" id="toggle-sidebar"></i><div class="sidebar-toc"><div class="sidebar-toc__title">Catalog</div><div class="sidebar-toc__progress"><span class="progress-notice">You've read</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#OS-settting"><span class="toc-number">1.</span> <span class="toc-text">OS settting</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Core-pattern"><span class="toc-number">1.1.</span> <span class="toc-text">Core pattern</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Core-single"><span class="toc-number">1.2.</span> <span class="toc-text">Core single</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Enable-ptrace-permissions"><span class="toc-number">1.3.</span> <span class="toc-text">Enable ptrace permissions</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Genarate-the-debug-info"><span class="toc-number">2.</span> <span class="toc-text">Genarate the debug info</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ubuntu"><span class="toc-number">3.</span> <span class="toc-text">ubuntu</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Open-the-core-file"><span class="toc-number">4.</span> <span class="toc-text">Open the core file</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#attach-the-process"><span class="toc-number">5.</span> <span class="toc-text">attach the process</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#gdb-basic-cmd"><span class="toc-number">6.</span> <span class="toc-text">gdb basic cmd</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#set-print-variable-length"><span class="toc-number"></span> <span class="toc-text">set print variable length</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#print-argv"><span class="toc-number">1.</span> <span class="toc-text">print argv</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#golang"><span class="toc-number">2.</span> <span class="toc-text">golang</span></a></li></ol></div></div></div><header class="post-bg" id="page-header" style="background-image: url(/img/photo_by_spacex.jpg)"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">己不由心，身又岂能由己</a></span><span id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> List</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></li><li><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div><span class="close" id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></span></span></nav><div id="post-info"><div id="post-title"><div class="posttitle">GDB tips</div></div><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" datetime="2020-03-03T14:17:33.000Z" title="Created 2020-03-03 22:17:33">2020-03-03</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2020-10-09T12:25:01.907Z" title="Updated 2020-10-09 20:25:01">2020-10-09</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Scripts/">Scripts</a></span></div><div class="meta-secondline"> <span class="post-meta-separator">|</span><span class="post-meta-pv-cv"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">Post View:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout_post" id="content-inner"><article id="post"><div class="post-content" id="article-container"><h3 id="OS-settting"><a href="#OS-settting" class="headerlink" title="OS settting"></a>OS settting</h3><h4 id="Core-pattern"><a href="#Core-pattern" class="headerlink" title="Core pattern"></a>Core pattern</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ cat /proc/sys/kernel/core_pattern<br>/usr/share/apport/apport %p %s %c %d %P %E<br><span class="hljs-comment">## kernel variable</span><br>kernel.core_pattern = |/usr/share/apport/apport %p %s %c %d %P %E<br><span class="hljs-comment">#If the first character of the pattern is a &#x27;|&#x27;, the kernel will treat the rest of the pattern as a command to run.  The core dump will be written to the standard input of that program instead of to a file.</span><br><br>kernel.core_pipe_limit = 0<br><span class="hljs-comment"># This sysctl is only applicable when core_pattern is configured to pipe core files to a user space helper (when the first character of core_pattern is a &#x27;|&#x27;, see above).  When collecting cores via a pipe to an application, it is occasionally useful for the collecting application to gather data about the crashing process from its /proc/pid directory.  In order to do this safely, the kernel must wait for the collecting process to exit, so as not to remove the crashing processes proc files prematurely.  This in turn creates the possibility that a misbehaving userspace collecting process can block the reaping of a crashed process simply by never exiting.  This sysctl defends against that. It defines how many concurrent crashing processes may be piped to user space applications in parallel.  If this value is exceeded, then those crashing processes above that value are noted via the kernel log and their cores are skipped.  0 is a special value, indicating that unlimited processes may be captured in parallel, but that no waiting will take place (i.e. the collecting process is not guaranteed access to `/proc/&lt;crashing pid&gt;/`).</span><br><br>kernel.core_uses_pid = 0<br>kernel.core_patternfs.suid_dumpable = 2<br><br>$ <span class="hljs-built_in">ulimit</span> -S -c unlimited<br><br><span class="hljs-comment"># disable genarate the core file</span><br>$ <span class="hljs-built_in">ulimit</span> -c n<br></code></pre></td></tr></table></figure>

<h4 id="Core-single"><a href="#Core-single" class="headerlink" title="Core single"></a>Core single</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><code class="hljs bash">Standard signals<br>     Linux supports the standard signals listed below.  Several signal  numbers  are  architecture-dependent,  as<br>     indicated  <span class="hljs-keyword">in</span>  the  <span class="hljs-string">&quot;Value&quot;</span> column.  (Where three values are given, the first one is usually valid <span class="hljs-keyword">for</span> alpha<br>     and sparc, the middle one <span class="hljs-keyword">for</span> x86, arm, and most other architectures, and the last one  <span class="hljs-keyword">for</span>  mips.   (Values<br>     <span class="hljs-keyword">for</span>  parisc  are  not shown; see the Linux kernel <span class="hljs-built_in">source</span> <span class="hljs-keyword">for</span> signal numbering on that architecture.)  A dash<br>     (-) denotes that a signal is absent on the corresponding architecture.<br><br>     First the signals described <span class="hljs-keyword">in</span> the original POSIX.1-1990 standard.<br><br>     Signal     Value     Action   Comment<br>     ──────────────────────────────────────────────────────────────────────<br>     SIGQUIT       3       Core    Quit from keyboard<br>     SIGILL        4       Core    Illegal Instruction<br>     SIGABRT       6       Core    Abort signal from abort(3)<br>     SIGFPE        8       Core    Floating-point exception<br>     SIGSEGV      11       Core    Invalid memory reference<br><br>     The signals SIGKILL and SIGSTOP cannot be caught, blocked, or ignored.<br><br>     Next the signals not <span class="hljs-keyword">in</span> the POSIX.1-1990 standard but described <span class="hljs-keyword">in</span> SUSv2 and POSIX.1-2001.<br><br>     Signal       Value     Action   Comment<br>     ────────────────────────────────────────────────────────────────────<br>     SIGBUS      10,7,10     Core    Bus error (bad memory access)<br>     SIGSYS      12,31,12    Core    Bad system call (SVr4);<br>                                     see also seccomp(2)<br>     SIGTRAP        5        Core    Trace/breakpoint <span class="hljs-built_in">trap</span><br>     SIGXCPU     24,24,30    Core    CPU time <span class="hljs-built_in">limit</span> exceeded (4.2BSD);<br>                                     see setrlimit(2)<br>     SIGXFSZ     25,25,31    Core    File size <span class="hljs-built_in">limit</span> exceeded (4.2BSD);<br>                                     see setrlimit(2)<br>     Up to and including Linux 2.2, the default behavior <span class="hljs-keyword">for</span> SIGSYS,  SIGXCPU,  SIGXFSZ,  and  (on  architectures<br>     other  than  SPARC and MIPS) SIGBUS was to terminate the process (without a core dump).  (On some other UNIX<br>     systems the default action <span class="hljs-keyword">for</span> SIGXCPU and SIGXFSZ is to terminate the process without a core dump.)   Linux<br>     2.4 conforms to the POSIX.1-2001 requirements <span class="hljs-keyword">for</span> these signals, terminating the process with a core dump.<br><br>     Next various other signals.<br><br>     Signal       Value     Action   Comment<br>     ────────────────────────────────────────────────────────────────────<br>     SIGIOT         6        Core    IOT <span class="hljs-built_in">trap</span>. A synonym <span class="hljs-keyword">for</span> SIGABRT<br>     SIGUNUSED    -,31,-     Core    Synonymous with SIGSYS<br><br>     (Signal 29 is SIGINFO / SIGPWR on an alpha but SIGLOST on a sparc.)<br><br>     SIGEMT  is  not  specified  <span class="hljs-keyword">in</span>  POSIX.1-2001, but nevertheless appears on most other UNIX systems, <span class="hljs-built_in">where</span> its<br>     default action is typically to terminate the process with a core dump.<br><br>     SIGPWR (<span class="hljs-built_in">which</span> is not specified <span class="hljs-keyword">in</span> POSIX.1-2001) is typically ignored by default on those other UNIX  systems<br>     <span class="hljs-built_in">where</span> it appears.<br><br>     SIGIO (<span class="hljs-built_in">which</span> is not specified <span class="hljs-keyword">in</span> POSIX.1-2001) is ignored by default on several other UNIX systems.<br><br>     Where defined, SIGUNUSED is synonymous with SIGSYS on most architectures.  Since glibc 2.26, SIGUNUSED is no<br>     longer defined on any architecture.<br></code></pre></td></tr></table></figure>

<h4 id="Enable-ptrace-permissions"><a href="#Enable-ptrace-permissions" class="headerlink" title="Enable ptrace permissions"></a>Enable ptrace permissions</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs bash">cat /etc/sysctl.d/10-ptrace.conf<br>kernel.yama.ptrace_scope = 0<br><br>0 - classic ptrace permissions: a process can PTRACE_ATTACH to any other<br>    process running under the same uid, as long as it is dumpable (i.e.<br>    did not transition uids, start privileged, or have called<br>    prctl(PR_SET_DUMPABLE...) already). Similarly, PTRACE_TRACEME is<br>    unchanged.<br><br>1 - restricted ptrace: a process must have a predefined relationship<br>    with the inferior it wants to call PTRACE_ATTACH on. By default,<br>    this relationship is that of only its descendants when the above<br>    classic criteria is also met. To change the relationship, an<br>    inferior can call prctl(PR_SET_PTRACER, debugger, ...) to <span class="hljs-built_in">declare</span><br>    an allowed debugger PID to call PTRACE_ATTACH on the inferior.<br>    Using PTRACE_TRACEME is unchanged.<br><br>2 - admin-only attach: only processes with CAP_SYS_PTRACE may use ptrace<br>    with PTRACE_ATTACH, or through children calling PTRACE_TRACEME.<br><br>3 - no attach: no processes may use ptrace with PTRACE_ATTACH nor via<br>    PTRACE_TRACEME. Once <span class="hljs-built_in">set</span>, this sysctl value cannot be changed.<br><br></code></pre></td></tr></table></figure>

<h3 id="Genarate-the-debug-info"><a href="#Genarate-the-debug-info" class="headerlink" title="Genarate the debug info"></a>Genarate the debug info</h3><ul>
<li>-g produces debugging information in theOS native format</li>
<li>-ggdb produces debugging information specifically intennded for gdb</li>
<li>-ggdb3 produces extra debugging information, for example: including macro definitions</li>
<li>wall means enable warnning</li>
<li>-O0  turn off all optimization</li>
<li>-O1 ,-O2, -O3  optimization<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ ./configure CFLAGS=<span class="hljs-string">&quot;-Wall -O2 -ggdb3&quot;</span><br>``` <br><br><span class="hljs-comment">### Genarate the core file</span><br>usage:  gcore [-a] [-o filename] pid<br>```bash<br>$ gcore -o /tmp/core -p <span class="hljs-variable">$pid</span><br></code></pre></td></tr></table></figure>

</li>
</ul>
<p>for the kernel</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">echo</span> c &gt; /proc/sysrq-trigger<br></code></pre></td></tr></table></figure>

<h3 id="ubuntu"><a href="#ubuntu" class="headerlink" title="ubuntu"></a>ubuntu</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ sudo apt install ubuntu-dbgsym-keyring<br></code></pre></td></tr></table></figure>

<h3 id="Open-the-core-file"><a href="#Open-the-core-file" class="headerlink" title="Open the core file"></a>Open the core file</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ gdb ./a.out ./bubble_sort_core<br><br>GNU gdb (Ubuntu 8.1-0ubuntu3.2) 8.1.0.20180409-git<br>Copyright (C) 2018 Free Software Foundation, Inc.<br>License GPLv3+: GNU GPL version 3 or later &lt;http://gnu.org/licenses/gpl.html&gt;<br>This is free software: you are free to change and redistribute it.<br>There is NO WARRANTY, to the extent permitted by law.  Type <span class="hljs-string">&quot;show copying&quot;</span><br>and <span class="hljs-string">&quot;show warranty&quot;</span> <span class="hljs-keyword">for</span> details.<br>This GDB was configured as <span class="hljs-string">&quot;x86_64-linux-gnu&quot;</span>.<br>Type <span class="hljs-string">&quot;show configuration&quot;</span> <span class="hljs-keyword">for</span> configuration details.<br>For bug reporting instructions, please see:<br>&lt;http://www.gnu.org/software/gdb/bugs/&gt;.<br>Find the GDB manual and other documentation resources online at:<br>&lt;http://www.gnu.org/software/gdb/documentation/&gt;.<br>For <span class="hljs-built_in">help</span>, <span class="hljs-built_in">type</span> <span class="hljs-string">&quot;help&quot;</span>.<br>Type <span class="hljs-string">&quot;apropos word&quot;</span> to search <span class="hljs-keyword">for</span> commands related to <span class="hljs-string">&quot;word&quot;</span>...<br>Reading symbols from ./a.out...done.<br>[New LWP 20410]<br>Core was generated by `./a.out<span class="hljs-string">&#x27;.</span><br><span class="hljs-string">Program terminated with signal SIGABRT, Aborted.</span><br><span class="hljs-string">#0  __GI_raise (sig=sig@entry=6) at ../sysdeps/unix/sysv/linux/raise.c:51</span><br><span class="hljs-string">51	../sysdeps/unix/sysv/linux/raise.c: No such file or directory.</span><br></code></pre></td></tr></table></figure>

<h3 id="attach-the-process"><a href="#attach-the-process" class="headerlink" title="attach the process"></a>attach the process</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ gdb attach <span class="hljs-variable">$PID</span><br>$ gdb ./the_programA_binray <span class="hljs-variable">$pid_of_the_programA</span><br></code></pre></td></tr></table></figure>

<h3 id="gdb-basic-cmd"><a href="#gdb-basic-cmd" class="headerlink" title="gdb basic cmd"></a>gdb basic cmd</h3><p>break<br>break +offset<br>break -offset<br>break linenum<br>break filename:linenum<br>break func_name<br>break filename:func_name<br>break *address<br>break … if <condition></p>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs arduino">#<span class="hljs-meta"># not work</span><br><span class="hljs-keyword">break</span> foo <span class="hljs-keyword">if</span> i&gt;<span class="hljs-number">0</span><br>commands<br><span class="hljs-built_in">printf</span> <span class="hljs-string">&quot;i is %d\n&quot;</span>, i<br><span class="hljs-keyword">continue</span><br><span class="hljs-built_in">end</span><br></code></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">b func_name <span class="hljs-keyword">if</span> var_name == 5<br></code></pre></td></tr></table></figure>

<p>info break (i b)<br>i b n</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs bash">(gdb) b main<br>Breakpoint 1 at 0x564b218ff830: file ./bubble_sort_bug.c, line 29.<br>(gdb) b <span class="hljs-built_in">exit</span><br>Breakpoint 2 at 0x7f258be23120: file exit.c, line 139.<br>(gdb) i b<br>Num     Type           Disp Enb Address            What<br>1       breakpoint     keep y   0x0000564b218ff830 <span class="hljs-keyword">in</span> main at ./bubble_sort_bug.c:29<br>2       breakpoint     keep y   0x00007f258be23120 <span class="hljs-keyword">in</span> __GI_exit at exit.c:139<br>(gdb) i b 2<br>Num     Type           Disp Enb Address            What<br>2       breakpoint     keep y   0x00007f258be23120 <span class="hljs-keyword">in</span> __GI_exit at exit.c:139<br>(gdb) b main <span class="hljs-keyword">if</span> i==1<br>Breakpoint 4 at 0x555555554830: file ./bubble_sort_bug.c, line 29.<br></code></pre></td></tr></table></figure>

<p>watch var   It is stopped by the gdb after the write has occurred<br>rwatch var  It is stopped by the gdb after the read has occurred<br>awatch var  It is stopped by the gdb after the read and write have occurred</p>
<p>step  (in function0<br>next  (not go to function)</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs bash">(gdb) info b<br>No breakpoints or watchpoints.<br>(gdb) watch a <span class="hljs-keyword">if</span> a==5 <br>Hardware watchpoint 3: a<br>(gdb) info b<br>Num     Type           Disp Enb Address            What<br>3       hw watchpoint  keep y                      a<br>	stop only <span class="hljs-keyword">if</span> a==5<br>(gdb) c<br>Continuing.<br><br>Thread 2 <span class="hljs-string">&quot;a.out&quot;</span> hit Hardware watchpoint 3: a<br><br>Old value = 4<br>New value = 5<br>thread1_func (p_arg=0x555555554844) at thread1.c:10<br>10	                sleep(10);<br>(gdb)<br><br>(gdb) info watchpoints<br>Num     Type           Disp Enb Address            What<br>3       hw watchpoint  keep y                      a<br>	stop only <span class="hljs-keyword">if</span> a==5<br>	breakpoint already hit 1 time<br><br><br>(gdb) watch 0x600850<br>Cannot watch constant value 0x600850.<br>(gdb) watch *(int *) 0x600850<br>Watchpoint 1: *(int *) 6293584 <br></code></pre></td></tr></table></figure>

<p>catch <event><br>tcatch <event>  (temp catch)<br>event: throw,catch,exec,fork,load,unload,exception,exception unhandled,assert,syscall [name | number ],</p>
<p>(gdb) catch syscall open<br>Catchpoint 7 (syscall ‘open’ [2])<br>(gdb) catch syscall 5<br>Catchpoint 8 (syscall ‘fstat’ [5])<br>(gdb) help catch syscall<br>Catch system calls by their names, groups and/or numbers.<br>Arguments say which system calls to catch.  If no arguments are given,<br>every system call will be caught.  Arguments, if given, should be one<br>or more system call names (if your system supports that), system call<br>groups or system call numbers.</p>
<p>for more syscall<br>/usr/include/x86_64-linux-gnu/asm/unistd_64.h</p>
<p>clear #clear all<br>clear function<br>clear linenum</p>
<p>delete beakpoints [range,eg: 1-5]</p>
<p>enable/disable breakpoints [range]<br>enable breakpoints once range<br>enable breakpoints delete range</p>
<p>set logging file the_log_filename<br>set logging on/off<br>set env PATH=/tmp/bin<br>set listsize 25</p>
<h1 id="set-print-variable-length"><a href="#set-print-variable-length" class="headerlink" title="set print variable length"></a>set print variable length</h1><p>set print elements 250<br>set print elements 0 #no limit</p>
<p>set step-mode on<br>This is useful in cases where you may be interested in inspecting the machine instructions of a function which has no symbolic info and do not want GDB to automatically skip over this function.</p>
<p>save br .gdb_20200601<br>-x .gdb_20200601</p>
<p>finish<br>Continue running until just after function in the selected stack frame returns. Print the returned value (if any). This command can be abbreviated as fin.</p>
<p>return</p>
<p>print expr<br>Evaluate the expression expr and display the resulting value. The expression may include calls to functions in the program being debugged.</p>
<p>call expr<br>Evaluate the expression expr without displaying void returned values.<br>You can use this variant of the print command if you want to execute a function from your program that does not return anything (a.k.a. a void function), but without cluttering the output with void returned values that GDB will otherwise print. If the result is not void, it is printed and saved in the value history.<br>It is possible for the function you call via the print or call command to generate a signal (e.g., if there’s a bug in the function, or if you passed it incorrect arguments). What happens in that case is controlled by the set unwindonsignal command.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs bash">(gdb) bt<br><span class="hljs-comment">#0  __GI_raise (sig=sig@entry=6) at ../sysdeps/unix/sysv/linux/raise.c:51</span><br><span class="hljs-comment">#1  0x00007f258be20801 in __GI_abort () at abort.c:79</span><br><span class="hljs-comment">#2  0x00007f258be69897 in __libc_message (action=action@entry=do_abort, </span><br>    fmt=fmt@entry=0x7f258bf96988 <span class="hljs-string">&quot;*** %s ***: %s terminated\n&quot;</span>) at ../sysdeps/posix/libc_fatal.c:181<br><span class="hljs-comment">#3  0x00007f258bf14cd1 in __GI___fortify_fail_abort (need_backtrace=need_backtrace@entry=false, </span><br>    msg=msg@entry=0x7f258bf96966 <span class="hljs-string">&quot;stack smashing detected&quot;</span>) at fortify_fail.c:33<br><span class="hljs-comment">#4  0x00007f258bf14c92 in __stack_chk_fail () at stack_chk_fail.c:29</span><br><span class="hljs-comment">#5  0x0000564b218ff8e9 in main () at ./bubble_sort_bug.c:43</span><br><br>(gdb) f 2<br><span class="hljs-comment">#2  0x00007f258be69897 in __libc_message (action=action@entry=do_abort, </span><br>    fmt=fmt@entry=0x7f258bf96988 <span class="hljs-string">&quot;*** %s ***: %s terminated\n&quot;</span>) at ../sysdeps/posix/libc_fatal.c:181<br>181	../sysdeps/posix/libc_fatal.c: No such file or directory.<br>(gdb) up<br><span class="hljs-comment">#3  0x00007f258bf14cd1 in __GI___fortify_fail_abort (need_backtrace=need_backtrace@entry=false, </span><br>    msg=msg@entry=0x7f258bf96966 <span class="hljs-string">&quot;stack smashing detected&quot;</span>) at fortify_fail.c:33<br>33	fortify_fail.c: No such file or directory.<br>(gdb) down<br><span class="hljs-comment">#2  0x00007f258be69897 in __libc_message (action=action@entry=do_abort, </span><br>    fmt=fmt@entry=0x7f258bf96988 <span class="hljs-string">&quot;*** %s ***: %s terminated\n&quot;</span>) at ../sysdeps/posix/libc_fatal.c:181<br>181	../sysdeps/posix/libc_fatal.c: No such file or directory.<br><br>(gdb) f 5<br><span class="hljs-comment">#5  0x0000564b218ff8e9 in main () at ./bubble_sort_bug.c:43</span><br>43	&#125;<br>(gdb) info f<br>Stack level 5, frame at 0x7ffd58ea9f80:<br> rip = 0x564b218ff8e9 <span class="hljs-keyword">in</span> main (./bubble_sort_bug.c:43); saved rip = 0x7f258be01b97<br> <span class="hljs-built_in">caller</span> of frame at 0x7ffd58ea9e40<br> <span class="hljs-built_in">source</span> language c.<br> Arglist at 0x7ffd58ea9f70, args: <br> Locals at 0x7ffd58ea9f70, Previous frame<span class="hljs-string">&#x27;s sp is 0x7ffd58ea9f80</span><br><span class="hljs-string"> Saved registers:</span><br><span class="hljs-string">  rbx at 0x7ffd58ea9f68, rbp at 0x7ffd58ea9f70, rip at 0x7ffd58ea9f78</span><br><span class="hljs-string"></span><br><span class="hljs-string">(gdb) info args</span><br><span class="hljs-string">No arguments.</span><br><span class="hljs-string">(gdb) info locals</span><br><span class="hljs-string">array = &#123;20424913, 207764369, 232957269, 286304630, 340051919, 418929367, 428095442, 560929304, 622631137, </span><br><span class="hljs-string">  681405812, 702646332, 717507172, 771731937, 844764348, 871741416, 893622553, 939367001, 953569863, 983680782, </span><br><span class="hljs-string">  1133421906, 1150235085, 1170267861, 1267699692, 1278859841, 1351132359, 1478380837, 1618765791, 1747714870, </span><br><span class="hljs-string">  2015283722, 2027462427, 2046956728, 2080576919&#125;</span><br><span class="hljs-string">i = 36</span><br></code></pre></td></tr></table></figure>

<p>info</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">(gdb) info <span class="hljs-built_in">functions</span> thread1_func <br>All <span class="hljs-built_in">functions</span> matching regular expression <span class="hljs-string">&quot;thread1_func&quot;</span>:<br><br>File thread1.c:<br>void *thread1_func(void *);<br></code></pre></td></tr></table></figure>

<p>print</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br></pre></td><td class="code"><pre><code class="hljs bash">(gdb) list<br>1	<span class="hljs-comment">#include &lt;stdio.h&gt;</span><br>2	<span class="hljs-comment">#include &lt;string.h&gt;</span><br>3<br>4	void printArray(int arr[], int n)<br>5	&#123;<br>6	   <span class="hljs-keyword">for</span> (int i=0; i&lt;n; i++) &#123;<br>7	     arr[i]=arr[i]+i;<br>8	     <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d &quot;</span>, arr[i]);<br>9	   &#125;<br>10	&#125;<br>11<br>12	int main()<br>13	&#123;<br>14	    int n = 10;<br>15	    int arr[n];<br>16<br>17	    // Fill whole array with 100.<br>18	    memset(arr, 10, n*sizeof(arr[0]));<br>19	    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Array after memset()\n&quot;</span>);<br>20	    printArray(arr, n);<br>21<br>22	    <span class="hljs-built_in">return</span> 0;<br>23	&#125;<br><br>(gdb) info b<br>Num     Type           Disp Enb Address            What<br>1       breakpoint     keep y   0x00000000004005d5 <span class="hljs-keyword">in</span> printArray at test2.c:7<br>	breakpoint already hit 10 <span class="hljs-built_in">times</span><br>(gdb) c<br>Continuing.<br><br>Breakpoint 1, printArray (arr=0x7fffffffe0d0, n=10) at test2.c:7<br>7	     arr[i]=arr[i]+i;<br>(gdb) <span class="hljs-built_in">print</span> arr<br><span class="hljs-variable">$13</span> = (int *) 0x7fffffffe0d0<br>(gdb) <span class="hljs-built_in">print</span> *arr<br><span class="hljs-variable">$14</span> = 168430090<br>(gdb) <span class="hljs-built_in">print</span> *arr@<br>A syntax error <span class="hljs-keyword">in</span> expression, near `<span class="hljs-string">&#x27;.</span><br><span class="hljs-string">(gdb) bt full</span><br><span class="hljs-string">#0  printArray (arr=0x7fffffffe0d0, n=10) at test2.c:7</span><br><span class="hljs-string">        i = 3</span><br><span class="hljs-string">#1  0x00000000004006ec in main () at test2.c:20</span><br><span class="hljs-string">        n = 10</span><br><span class="hljs-string">        arr = &#123;168430090, 168430091, 168430092, 168430090, 168430090, 168430090, 168430090, 168430090, 168430090, 168430090&#125;</span><br><span class="hljs-string">(gdb) p i</span><br><span class="hljs-string">$15 = 4</span><br><span class="hljs-string">(gdb) p arr[i]</span><br><span class="hljs-string">$16 = 168430090</span><br><span class="hljs-string">(gdb) p arr[20]</span><br><span class="hljs-string">$17 = -7664</span><br><span class="hljs-string"></span><br><span class="hljs-string">(gdb) c</span><br><span class="hljs-string">Continuing.</span><br><span class="hljs-string"></span><br><span class="hljs-string">Breakpoint 1, printArray (arr=0x7fffffffe0d0, n=10) at test2.c:7</span><br><span class="hljs-string">7	     arr[i]=arr[i]+i;</span><br><span class="hljs-string">(gdb) p i</span><br><span class="hljs-string">$20 = 5</span><br><span class="hljs-string">(gdb) set arr[4]=125</span><br><span class="hljs-string">(gdb) bt full</span><br><span class="hljs-string">#0  printArray (arr=0x7fffffffe0d0, n=10) at test2.c:7</span><br><span class="hljs-string">        i = 5</span><br><span class="hljs-string">#1  0x00000000004006ec in main () at test2.c:20</span><br><span class="hljs-string">        n = 10</span><br><span class="hljs-string">        arr = &#123;168430090, 168430091, 168430092, 168430093, 125, 168430090, 168430090, 168430090, 168430090, 168430090&#125;</span><br><span class="hljs-string"></span><br><span class="hljs-string">(gdb) c</span><br><span class="hljs-string">Continuing.</span><br><span class="hljs-string"></span><br><span class="hljs-string">Breakpoint 1, printArray (arr=0x7fffffffe0d0, n=10) at test2.c:7</span><br><span class="hljs-string">7	     arr[i]=arr[i]+i;</span><br><span class="hljs-string">(gdb) bt full</span><br><span class="hljs-string">#0  printArray (arr=0x7fffffffe0d0, n=10) at test2.c:7</span><br><span class="hljs-string">        i = 6</span><br><span class="hljs-string">#1  0x00000000004006ec in main () at test2.c:20</span><br><span class="hljs-string">        n = 10</span><br><span class="hljs-string">        arr = &#123;168430090, 168430091, 168430092, 168430093, 168430094, 168430095, 168430090, 168430090, 168430090, 168430090&#125;</span><br><span class="hljs-string">(gdb) p i</span><br><span class="hljs-string">No symbol &quot;i&quot; in current context.</span><br><span class="hljs-string">(gdb) p $i</span><br><span class="hljs-string">$24 = 5</span><br><span class="hljs-string">(gdb) set arr[$i]=10</span><br><span class="hljs-string">(gdb) set arr[$i++]=11</span><br><span class="hljs-string">(gdb) p arr[5]</span><br><span class="hljs-string">$26 = 10</span><br><span class="hljs-string">(gdb) p arr[6]</span><br><span class="hljs-string">$27 = 11</span><br><span class="hljs-string"></span><br><span class="hljs-string">(gdb) p/t arr[6]</span><br><span class="hljs-string">$28 = 1011</span><br><span class="hljs-string">(gdb) p/x arr[6]</span><br><span class="hljs-string">$29 = 0xb</span><br><span class="hljs-string">(gdb) p/f arr[6]</span><br><span class="hljs-string">$30 = 1.54142831e-44</span><br><span class="hljs-string">(gdb) p/c arr[6]</span><br><span class="hljs-string">$31 = 11 &#x27;</span>\v<span class="hljs-string">&#x27;</span><br><span class="hljs-string">(gdb) p/d arr[6]</span><br><span class="hljs-string">$32 = 11</span><br><span class="hljs-string">(gdb) p/o arr[6]</span><br><span class="hljs-string">$33 = 013</span><br><span class="hljs-string"></span><br><span class="hljs-string">examine (x command)</span><br><span class="hljs-string">(gdb) p arr</span><br><span class="hljs-string">$37 = &#123;168430090, 168430091, 168430092, 168430093, 168430094, 10, 11, 168430090, 168430090, 168430090&#125;</span><br><span class="hljs-string">      __________ same with print format</span><br><span class="hljs-string">      |</span><br><span class="hljs-string">x/[n][f][u]</span><br><span class="hljs-string">   |     |</span><br><span class="hljs-string"> number  -------------- b. Bytes. h. Halfwords (two bytes). w. Words (four bytes) This is the initial default.  g. Giant words (eight bytes)</span><br><span class="hljs-string"></span><br><span class="hljs-string">(gdb) x/10d arr</span><br><span class="hljs-string">0x7fffffffe0d0:	168430090	168430091	168430092	168430093</span><br><span class="hljs-string">0x7fffffffe0e0:	168430094	10	11	168430090</span><br><span class="hljs-string">0x7fffffffe0f0:	168430090	168430090</span><br><span class="hljs-string"></span><br><span class="hljs-string">(gdb) info reg</span><br><span class="hljs-string">rax            0x400aaae297396d09	4614688658370948361</span><br><span class="hljs-string">rbx            0x7fffffffe100	140737488347392</span><br><span class="hljs-string">rcx            0x7fffdfafe9b0	140736946235824</span><br><span class="hljs-string">rdx            0xa	10</span><br><span class="hljs-string">rsi            0xa	10</span><br><span class="hljs-string">rdi            0x7fffffffe0d0	140737488347344</span><br><span class="hljs-string">rbp            0x7fffffffe0c0	0x7fffffffe0c0</span><br><span class="hljs-string">rsp            0x7fffffffe090	0x7fffffffe090</span><br><span class="hljs-string">r8             0xffffffffffffffff	-1</span><br><span class="hljs-string">r9             0x0	0</span><br><span class="hljs-string">r10            0x22	34</span><br><span class="hljs-string">r11            0x246	582</span><br><span class="hljs-string">r12            0x4004d0	4195536</span><br><span class="hljs-string">r13            0x7fffffffe210	140737488347664</span><br><span class="hljs-string">r14            0x0	0</span><br><span class="hljs-string">r15            0x0	0</span><br><span class="hljs-string">rip            0x4005da	0x4005da &lt;printArray+29&gt;</span><br><span class="hljs-string">eflags         0x206	[ PF IF ]</span><br><span class="hljs-string">cs             0x33	51</span><br><span class="hljs-string">ss             0x2b	43</span><br><span class="hljs-string">ds             0x0	0</span><br><span class="hljs-string">es             0x0	0</span><br><span class="hljs-string">fs             0x0	0</span><br><span class="hljs-string">gs             0x0	0</span><br><span class="hljs-string"></span><br><span class="hljs-string">(gdb) list</span><br><span class="hljs-string">1	#include &lt;stdio.h&gt;</span><br><span class="hljs-string">2	int main()</span><br><span class="hljs-string">3	&#123;</span><br><span class="hljs-string">4	        float x = 456.876;</span><br><span class="hljs-string">5	        printf (&quot;\nx = %f\n&quot;, x);</span><br><span class="hljs-string">6	        return 0;</span><br><span class="hljs-string">7	&#125;</span><br><span class="hljs-string">(gdb) b 4</span><br><span class="hljs-string">Breakpoint 1 at 0x400535: file float.c, line 4.</span><br><span class="hljs-string">(gdb) b 5</span><br><span class="hljs-string">Breakpoint 2 at 0x40053e: file float.c, line 5.</span><br><span class="hljs-string">(gdb) b 6</span><br><span class="hljs-string">Breakpoint 3 at 0x400555: file float.c, line 6.</span><br><span class="hljs-string">(gdb) c</span><br><span class="hljs-string">The program is not being run.</span><br><span class="hljs-string">(gdb) start</span><br><span class="hljs-string">Temporary breakpoint 4 at 0x400535: file float.c, line 4.</span><br><span class="hljs-string">Starting program: /root/./a.out</span><br><span class="hljs-string"></span><br><span class="hljs-string">Breakpoint 1, main () at float.c:4</span><br><span class="hljs-string">4	        float x = 456.876;</span><br><span class="hljs-string">(gdb) n</span><br><span class="hljs-string"></span><br><span class="hljs-string">Breakpoint 2, main () at float.c:5</span><br><span class="hljs-string">5	        printf (&quot;\nx = %f\n&quot;, x);</span><br><span class="hljs-string"></span><br><span class="hljs-string">(gdb) p x</span><br><span class="hljs-string">$5 = 456.876007</span><br><span class="hljs-string">(gdb) x/fw &amp;x</span><br><span class="hljs-string">0x7fffffffe12c:	456.876007</span><br><span class="hljs-string">(gdb) x/tw &amp;x</span><br><span class="hljs-string">0x7fffffffe12c:	01000011111001000111000000100001</span><br><span class="hljs-string"></span><br><span class="hljs-string">### modify the float to double</span><br><span class="hljs-string">(gdb) list</span><br><span class="hljs-string">1	#include &lt;stdio.h&gt;</span><br><span class="hljs-string">2	int main()</span><br><span class="hljs-string">3	&#123;</span><br><span class="hljs-string">4	        //float x = 456.876;</span><br><span class="hljs-string">5	        double x = 456.876;</span><br><span class="hljs-string">6	        printf (&quot;\nx = %lf\n&quot;, x);</span><br><span class="hljs-string">7	        return 0;</span><br><span class="hljs-string">8	&#125;</span><br><span class="hljs-string">(gdb) x/1fg &amp;x</span><br><span class="hljs-string">0x7fffffffe128:	456.87599999999998</span><br><span class="hljs-string">(gdb) x/1tg &amp;x</span><br><span class="hljs-string">0x7fffffffe128:	0100000001111100100011100000010000011000100100110111010010111100</span><br><span class="hljs-string">(gdb) p x</span><br><span class="hljs-string">$6 = 456.87599999999998</span><br></code></pre></td></tr></table></figure>



<h3 id="print-argv"><a href="#print-argv" class="headerlink" title="print argv"></a><a target="_blank" rel="noopener" href="https://wizardforcel.gitbooks.io/100-gdb-tips/set-program-args.html">print argv</a></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ gcc -g3 walk1.c -o walk<br>$ gdb ./walk <span class="hljs-comment"># or you could $ gdb -args ./walk /tmp 10</span><br>Reading symbols from /root/walk...done.<br><br>(gdb) b main<br>Breakpoint 1 at 0x400bb8: file walk1.c, line 73.<br>(gdb) r /tmp 10 <span class="hljs-comment">#  or you could (gdb) set args /tmp 10</span><br>Starting program: /root/./walk /tmp 10<br><br>Breakpoint 1, main (argc=3, argv=0x7fffffffe138) at walk1.c:73<br>73	    <span class="hljs-keyword">if</span>(argc != 3)<br>(gdb) p argc<br><span class="hljs-variable">$1</span> = 3<br>(gdb) p argv<br><span class="hljs-variable">$2</span> = (char **) 0x7fffffffe138<br>(gdb) p argv[0]<br><span class="hljs-variable">$3</span> = 0x7fffffffe414 <span class="hljs-string">&quot;/root/./walk&quot;</span><br>(gdb) p argv[1]<br><span class="hljs-variable">$4</span> = 0x7fffffffe421 <span class="hljs-string">&quot;/tmp&quot;</span><br>(gdb) p argv[2]<br><span class="hljs-variable">$5</span> = 0x7fffffffe426 <span class="hljs-string">&quot;10&quot;</span><br>(gdb)<br><br><span class="hljs-comment"># attach args</span><br>$ gdb --args /bin/bash -c <span class="hljs-string">&#x27;ls -l&#x27;</span><br>$ <span class="hljs-built_in">set</span> listsize 40<br>$ p *args@4 <br><br><span class="hljs-comment"># if the software was install by source, you could add --directory for import debug symbol</span><br><span class="hljs-comment"># re-complie bash</span><br><br>$ gdb --args /usr/<span class="hljs-built_in">local</span>/bin/bash -c <span class="hljs-string">&#x27;echo [1g]&#x27;</span> --directory ~/tools/bash-4.4<br>(gdb) la src<br><br><span class="hljs-comment">## if you want disable optimze</span><br>$ CFLAGS=<span class="hljs-string">&quot;-g -O0&quot;</span> CXXFLAGS=<span class="hljs-string">&quot;-g -O0&quot;</span> LDFLAGS=<span class="hljs-string">&quot;-g&quot;</span>  ./configure --enable-debugger<br>$ CFLAGS=<span class="hljs-string">&quot;-g -O0&quot;</span> CXXFLAGS=<span class="hljs-string">&quot;-g -O0&quot;</span> LDFLAGS=<span class="hljs-string">&quot;-g&quot;</span>  ./make -j 2<br><br><span class="hljs-comment">## set debug directory</span><br>(gdb) <span class="hljs-built_in">set</span> debug-file-directory &lt;directory&gt;<br>(gdb) show debug-file-directory<br>(gdb) <span class="hljs-built_in">set</span> debug-file-directory /usr/lib/debug<br>add-symbol-file filename address<br>add-symbol-file filename address [ -readnow ] [ -mapped ]<br>add-symbol-file filename -ssection address ...<br></code></pre></td></tr></table></figure>

<h3 id="golang"><a href="#golang" class="headerlink" title="golang"></a>golang</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">go build -gcflags <span class="hljs-string">&quot;-N -l&quot;</span> gdbsandbox.go<br></code></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ gdb -p <span class="hljs-variable">$pid</span><br>(gdb) disas readline<br></code></pre></td></tr></table></figure>
</div><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="mailto:undefined">Ginger</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="http://yoursite.com/2020/03/03/gdb/">http://yoursite.com/2020/03/03/gdb/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/debug/">debug</a><a class="post-meta__tags" href="/tags/trace/">trace</a></div><div class="post_share"><div class="social-share" data-image="/img/photo_by_spacex.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2020/03/16/network_hardware/"><img class="prev-cover" src="/img/photo_by_spacex.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">Previous Post</div><div class="prev_info">network topology</div></div></a></div><div class="next-post pull-right"><a href="/2019/12/29/lfs_command/"><img class="next-cover" src="/img/photo_by_spacex.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">Next Post</div><div class="next_info">lfs command</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span> Related Articles</span></div><div class="relatedPosts-list"><div><a href="/2019/10/31/bcc/" title="bcc tools"><img class="cover" src="/img/photo_by_spacex.jpg"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2019-10-31</div><div class="title">bcc tools</div></div></a></div><div><a href="/2018/11/22/ftrace/" title="ftrace"><img class="cover" src="/img/photo_by_spacex.jpg"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2018-11-22</div><div class="title">ftrace</div></div></a></div><div><a href="/2018/11/23/perf/" title="perf"><img class="cover" src="/img/photo_by_spacex.jpg"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2018-11-23</div><div class="title">perf</div></div></a></div><div><a href="/2016/04/01/blktrace/" title="Blktrace"><img class="cover" src="/img/photo_by_spacex.jpg"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2016-04-01</div><div class="title">Blktrace</div></div></a></div><div><a href="/2020/07/24/bpftrace/" title="bpftrace"><img class="cover" src="/img/photo_by_spacex.jpg"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-07-24</div><div class="title">bpftrace</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> Comment</span></div></div><div class="comment-wrap"><div><div id="gitalk-container"></div></div></div></div></article></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2015 - 2020 By Ginger</div><div class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><section id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Read Mode"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="Switch Between Light And Dark Mode"><i class="fas fa-adjust"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="Setting"><i class="fas fa-cog"></i></button><a id="to_comment" href="#post-comment" title="Scroll To Comments"><i class="fas fa-comments"></i></a><button class="close" id="mobile-toc-button" type="button" title="Table Of Contents"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="Back To Top"><i class="fas fa-arrow-up"></i></button></div></section><div><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><div class="js-pjax"><script>function addGitalkSource () {
  const ele = document.createElement('link')
  ele.rel = 'stylesheet'
  ele.href= 'https://cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.css'
  document.getElementsByTagName('head')[0].appendChild(ele)
}

function loadGitalk () {
  function initGitalk () {
    var gitalk = new Gitalk({
      clientID: '0b9d5b98d0a972b33cf7',
      clientSecret: '769efc11b32f6c0d03bcbf3ee800dfc4e2690459',
      repo: 'homerl.github.io',
      owner: 'homerl',
      admin: ['homerl'],
      id: 'c9b912b7bed7a390794f4dd392bb0841',
      language: 'en',
      perPage: 10,
      distractionFreeMode: false,
      pagerDirection: 'last',
      createIssueManually: false,
      updateCountCallback: commentCount
    })
    gitalk.render('gitalk-container')
  }

  if (typeof Gitalk === 'function') initGitalk()
  else {
    addGitalkSource()
    $.getScript('https://cdn.jsdelivr.net/npm/gitalk@latest/dist/gitalk.min.js', initGitalk)
  }
}

function commentCount(n){
  let isCommentCount = document.querySelector('#post-meta .gitalk-comment-count')
  if (isCommentCount) {
    isCommentCount.innerHTML= n
  }
}

if ('Gitalk' === 'Gitalk' || !false) {
  if (false) btf.loadComment(document.getElementById('gitalk-container'), loadGitalk)
  else loadGitalk()
} else {
  function loadOtherComment () {
    loadGitalk()
  }
}</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></div></body></html>